function checkTime(n, t) { dateNow = new Date; var i = dateNow.getHours(); i >= 0 && i < 10 && (n === "north" ? deliveryInfoNewContent = 'Commandez <span style="color: #F94D4A;">avant 18h<\/span> et recevez le demain' : UpdateTime()); i >= 10 && i < 18 && UpdateTime(); $(".js--deliveryOrDelayMessage").remove(); $(t)[0].innerHTML = deliveryInfoNewContent } function UpdateTime() { var i = new Date; dateNow.toLocaleTimeString(navigator.language); i.setHours(18, 0, 0, 0); var r = i.getTime() - dateNow.getTime(), n = Math.floor(r / 6e4), t = Math.floor(n / 60) % 24; n = n % 60 + 1; n >= 0 && n <= 9 && (n = "0" + n); n === 60 && (t = t + 1, n = "00"); deliveryInfoNewContent = t === 0 ? 'Plus que <span style="color: #F94D4A;">' + n + " min. <\/span> pour être livré demain" : 'Plus que <span style="color: #F94D4A;">' + t + "h" + n + "<\/span> pour être livré demain" } function fs_filter_apply_filter(n) { var t = $("[data-fs-cats]").map(function () { return $(this) }).get(), i = $(".fs-filters-filter_button").map(function () { return $(this) }).get(); t.forEach(t => { let i = $(t).attr("data-fs-cats"); n == "all" ? $(t).show() : i.includes(n) ? $(t).show() : $(t).hide() }); i.forEach(t => { $(t).hasClass("selected") && $(t).attr("data-apply-fs-filter") != n ? $(t).removeClass("selected") : $(t).attr("data-apply-fs-filter") == n && $(t).addClass("selected") }) } var deliveryInfoNewContent, dateNow, UiGiftCardInfos, UiSelector, thumbnailContainer, UiProductFilters, WISHLIST_MODE, UiWishListAdd; $("#FR515V2").on("FR515NV2-visible", function () { setInterval(checkTime("north", "#FR515V2"), 1e4) }); $("#FR515V2").on("FR515SV2-visible", function () { setInterval(checkTime("south", "#FR515V2"), 1e4) }); dateNow = new Date; $("#FR632V2").on("FR632V2-visible", function () { var n = []; $(".breadcrumb-container .breadcrumb li a").each(function (t) { this.className = "rounded-link"; t !== 0 && n.push(this) }); $(".more-categories .rounded-link").each(function () { this.href.indexOf("cat-") !== -1 && n.push(this) }); $(".breadcrumb-container").css("display", "none"); n.forEach(function (n) { $("#FR632V2").append(n) }) }); $("#FR633V1").on("FR633V1-visible", function () { var n = []; $(".more-categories .rounded-link").each(function () { this.href.indexOf("cat-") !== -1 && n.push(this) }); n.forEach(function (n) { $("#FR633V1").append(n) }) }); (function (n) { n.fn.bootstrapValidator.validators.giftCardValidatorEmail = { validate: function (t, i, r) { return r.ownerIsChecked === "recipient" ? n("#myAddress").is(":checked") || n("#recipient").is(":checked") && n("#receiverEmail").val() !== "" && RegExp(r.regexp).test(n("#receiverEmail").val()) : r.ownerIsChecked === "myAddress" ? n("#recipient").is(":checked") || n("#myAddress").is(":checked") && n("#buyerEmail").val() !== "" && RegExp(r.regexp).test(n("#buyerEmail").val()) : void 0 } } })(window.jQuery), function (n) { n.fn.bootstrapValidator.validators.giftCardValidatorMessageText = { validate: function (n, t, i) { var r = new RegExp(i.regexp, "gm"); return t.val() !== undefined && t.val() !== null && t.val().match(r) ? !1 : !0 } } }(window.jQuery), function (n) { n.fn.bootstrapValidator.validators.giftCardMandatoryDate = { validate: function (t, i) { return n("#myAddress").is(":checked") ? !0 : n("#recipient").is(":checked") ? i.val() !== "" : void 0 } } }(window.jQuery); UiGiftCardInfos = UiBloc.extend({ init: function (n, t) { var i = this, f, r, u; i._super(n, t); f = $("#eGiftCardContainer"); i.IsValid = function () { var n, t; r && r.validate(); n = !0; for (t in this.validateField) this.validateField.hasOwnProperty(t) && (n = n && this.validateField[t]); return n }; i.ComputeCharLeft = function (n) { var t = $(n).val().replace(/[\n]/gi, "  ").length; this.maxNumberChar - t > 0 ? $("#labelTextAttached").find("span").text(this.maxNumberChar - t) : $("#labelTextAttached").find("span").text("0") }; i.ChangeReceiptChoice = function () { var n = !0; $(".email-choice input[type='radio']:checked").val() == "recipient" ? ($(".recipient-choice").removeClass("fadeOut").stop().slideDown(300), $(".my-address-choice").addClass("fadeOut").stop().slideUp(300)) : $(".email-choice input[type='radio']:checked").val() == "myAddress" && (n = !1, $(".recipient-choice").addClass("fadeOut").stop().slideUp(300), $(".my-address-choice").removeClass("fadeOut").stop().slideDown(300)); r.updateStatus("receiverDate", "NOT_VALIDATED"); $("#receiverDate").blur(); n ? (r.updateStatus("receiverEmail", "NOT_VALIDATED"), $("#receiverEmail").blur()) : (r.updateStatus("buyerEmail", "NOT_VALIDATED"), $("#buyerEmail").blur()) }; i.GetInfo = function () { var n = {}; return n.PersonalisedMessage = $("#textAttached").val(), this.Model.isEGiftCard && (n.Sender = { FirstName: $("#buyerName").val() }, n.Recipient = { FirstName: $("#receiverName").val() }, $("#recipient").is(":checked") ? (n.DeliveryDate = $(".input-group.date").datepicker("getDate").toJSON(), n.Recipient.EmailAddress = $("#receiverEmail").val()) : (n.DeliveryDate = "", n.Sender.EmailAddress = $("#buyerEmail").val())), n }; u = "/js/Libraries/bootstrap-datepicker"; $.when($.get(u + ".min.js")).done(function () { $.get(u + "_1.js", "", function () { var s, e, t, n, h, c, l; if ($("<link/>", { rel: "stylesheet", href: u + "3.standalone.min.css" }).appendTo("head"), i.options = {}, $("#data-giftCard-date").length && (i.options = JSON.parse($("#data-giftCard-date").html())), i.Model.isEGiftCard && i.Model.Mode === "MOD_BASKET" && (i.Datas = JSON.parse(Utils.CookieManager.ReadCookie("giftCard-article-modify"))), i.Model.isEGiftCard) { $(".input-group.date").datepicker({ format: "dd/mm/yyyy", language: "fr", startDate: i.options.minDate, endDate: i.options.maxDate, autoclose: !0 }); $(".input-group.date").datepicker().on("changeDate", function (n) { n.format(n) === i.options.minDate ? $("#receiverDateInfo").show() : $("#receiverDateInfo").hide() }); $(".email-choice input[type='radio']").on("change", function () { i.ChangeReceiptChoice() }); i.maxNumberChar = parseInt($("#textAttached").attr("maxlength")); $("#textAttached").on("keyup", function () { i.ComputeCharLeft($(this)) }); s = $("#textAttached"); s.on("keydown keyup change focus blur", function (n) { n.which === 13 && n.preventDefault() }); $("#textAttached").keypress(function (n) { if (n.keyCode == 34) return !1 }); i.validateField = { email: !1, receiverDate: !0, textAttached: !0 }; e = Utils.Enum.Form.Input.Email.ValidationRegExp; t = i.Model.giftCardMessageRegexp; f.bootstrapValidator({ message: "error on eGiftCard field", trigger: "blur", fields: { buyerEmail: { message: labels.MobileV3_PDP.EmailError, validators: { stringLength: { min: 0, max: 37, message: labels.MobileV3_PDP.EmailLengthError }, giftCardValidatorEmail: { regexp: e, ownerIsChecked: "myAddress", message: labels.MobileV3_PDP.EmailFormatError } } }, receiverEmail: { message: labels.MobileV3_PDP.EmailError, validators: { stringLength: { min: 0, max: 37, message: labels.MobileV3_PDP.EmailLengthError }, giftCardValidatorEmail: { regexp: e, ownerIsChecked: "recipient", message: labels.MobileV3_PDP.EmailFormatError } } }, receiverDate: { message: "date obligatoire !!!", validators: { giftCardMandatoryDate: {} } }, textAttached: { message: labels.MobileV3_PDP.GiftCardFormatError, validators: { giftCardValidatorMessageText: { regexp: t } } }, buyerName: { message: labels.MobileV3_PDP.GiftCardFormatError, validators: { giftCardValidatorMessageText: { regexp: t } } }, receiverName: { message: labels.MobileV3_PDP.GiftCardFormatError, validators: { giftCardValidatorMessageText: { regexp: t } } } } }); r = f.data("bootstrapValidator"); var a = new MutationObserver(function (n) { n.forEach(function (n) { var u = $(n.target), r, t; n.attributeName === "class" && (r = u.find("input"), t = r.attr("name"), t !== undefined && t !== null && t.toLowerCase().indexOf("email") !== -1 && (t = "email"), i.validateField[t] = $(n.target).hasClass("has-success")) }); i.Model.set_giftCardInfos_status(i.IsValid()) }), o = document.querySelectorAll(".form-group"), v = { attributes: !0 }; for (n = 0; n < o.length; ++n)o[n].classList.contains("gift-message-field") || a.observe(o[n], v); $(".gift-ecard-message").blur(function () { i.validateField.textAttached = !$(".gift-message-field").hasClass("has-error") }) } i.Model.Mode === "MOD_BASKET" ? (h = i.Datas.deliveryDate != "", h === !0 ? (c = new Date(i.Datas.deliveryDateLocal), l = new Date(i.options.minDate), c < l ? $(".input-group.date").datepicker("update", i.options.minDate) : $(".input-group.date").datepicker("update", i.Datas.deliveryDateLocal), $("#recipient").prop("checked", !0)) : ($("#myAddress").prop("checked", !0), $(".input-group.date").datepicker("update", i.options.minDate)), $("#textAttached").val(i.Datas.persoText), $("#buyerName").val(i.Datas.buyerName), $("#receiverName").val(i.Datas.receiverName), $("#buyerEmail").val(i.Datas.buyerEmail), $("#receiverEmail").val(i.Datas.receiverEmail), i.ChangeReceiptChoice()) : $(".input-group.date").datepicker("update", i.options.minDate) }) }) } }), function (n, t) { "use strict"; n.UiInformations = UiBloc.extend({ init: function (i, r) { var o; this._super(i, r); var e = this, u = e.Model, l = n.Utils.Common, a = i.shortCountry.toUpperCase(), v = a === "FR", y = u.productId, s = e.isMobileDevice ? "iceberg" : "popin", f = t("#vendorName_" + y), p = t("#purchaseDetailsTabsMainVendor"), w = t("#vendorId"); u.isLRAndMe && (o = t("<span>", { "class": "lr-icon lr-icon-lrplus-vendor-delivery-fee" })); var tt = t("<span>", { "class": "lr-icon lr-icon-lrandme-color" }), b = function (n, t) { n.forEach(function (n) { t.Dimension1 == n.Dimension1 && t.DocumentId == n.DocumentId && n.Dimension2VendorIds.forEach(function (i) { t.Dimension2 == i.Dimension2 && i.VendorId == t.VendorId && k(n) }) }) }, k = function (n) { var i; if (n.Positions.length > 0) { var f = n.PopinContent != null && n.PopinContent != "", r = n.Link != null && n.Link != "", u = t("<div>", { id: "productTagModal" + n.Id, "class": "productTag_modal", style: "display: none;" }).html(n.PopinContent), h = JSON.parse(t("#pdpData").text()), e = t("<a>", { href: n.Link, "class": "lr-button lr-button-secondary margin-t" }).html(h.labelProductTagSeeMore), o = t("<a>", { href: n.Link, "class": "productTag_link producTag_" + n.Template.toLowerCase() }).html(n.TagContent); if (n.Positions[0].Location == "PDP" && n.Positions[0].Position == "MkpBelowCTA") { if (n.TagType == "TextWithLink") { if (f) { i = t("<span>", { "class": "productTag_link producTag_" + n.Template.toLowerCase(), id: "productTagLink" }).html(n.TagContent); i.on("click", function () { t("#productTagModal" + n.Id).modal({ method: "open", type: s, id: "productTag_Panel" + n.Id, gradientOnScroll: !0, title: n.TagContent }) }); t("#MkpBelowCTA").html(i); t("#MkpBelowCTA").append(u); r && t(u).append(e) } else r ? t("#MkpBelowCTA").append(o) : t("#MkpBelowCTA").html(t("<span>", { "class": "producTag_" + n.Template.toLowerCase() }).html(n.TagContent)); t("#MkpBelowCTA").show() } } else if (n.Positions[0].Location == "PDP" && n.Positions[0].Position == "MkpServices" && n.TagType == "TextWithLink") { if (f) { i = t("<span>", { "class": "productTag_link producTag_" + n.Template.toLowerCase(), id: "productTagLink" }).html(n.TagContent); i.on("click", function () { t("#productTagModal" + n.Id).modal({ method: "open", type: s, id: "productTag_Panel" + n.Id, gradientOnScroll: !0, title: n.TagContent }) }); t("#MkpServices").html(i); t("#MkpServices").append(u); r && t(u).append(e) } else r ? t("#MkpServices").append(o) : t("#MkpServices").html(t("<span>", { "class": "producTag_" + n.Template.toLowerCase() }).html(n.TagContent)); t("#MkpServices").show() } } }, d = function () { var i = t(".delivery-info-item.athome-delivery"), n = u.article; i.data("productid") == n.ProductId && v && ((n.Vendor.VendorId == 0 || n.Vendor.VendorId == 100) && n.ProductClassification == "RedouteBulky" ? i.show() : i.hide()) }, g = function () { var i = t(".delivery-info-item.ondemand-production"), n = u.article; i.data("productid") == n.ProductId && ((n.Vendor.VendorId == 0 || n.Vendor.VendorId == 100) && n.ProductClassification == "RedouteBulky" && n.AvailabilityCode == "L" && n.FastestDeliveryDelay != undefined && parseInt(n.FastestDeliveryDelay) > 30 ? i.show() : i.hide()) }, nt = function () { var e = t(".mkp.services"), f = t(".mkp.delivery"), n = u.article, r, i; if (n.Vendor.MinimumShipmentCosts > 0 ? t(".js--minimumShipmentCosts").html(n.Vendor.MinimumShipmentCosts) : f.hide(), n.Vendor.DeliveryTerms !== undefined) for (t(".mkp.services .delivery-info-content-mkpservice").remove(), r = n.Vendor.DeliveryTerms.split("|"), i = 0; i < r.length; i++)t(".mkp.services").append('<li class="delivery-info-item delivery-info delivery-info-content-mkpservice"><span>' + r[i] + "<\/span><\/li>"); e.show(); f.show() }, h = function () { var n = t(".mkp.services"), i = t(".mkp.delivery"); n.hide(); i.hide() }, c = function () { var r = u.article, et = u.tags, ot = f.find(".name-vendor"), it = f.find(".reviews-vendor"), st = t(".loyalty-lrme-delivery-info-item"), s = u.$productContainer.find(".delivery-info"), a = u.$productContainer.find(".delivery-return-info"), y = t("#servicePanel"), rt = f.find("#nbReview"), ht, ct, at, k, vt, yt, tt; if (a.hide(), r != null) { if (ht = r.Vendor.Name === "La Redoute", ct = t.inArray(r.ProductClassification, ["MarketplaceRegular", "MarketplaceBulky"]) !== -1, f.length > 0 && f.data("text").length > 0) { var pt = f.data("mkpurl").replace("{vendorId}", r.Vendor.VendorId), lt = "", ut = ""; r.Vendor.VendorId === "0" || r.Vendor.VendorId === 0 ? ut = r.Vendor.Name : (ut = '<a href="' + pt + '">' + r.Vendor.Name + "<\/a>", i.switchBuyBoxAB === !0 && p.html("<span>" + f.data("text").replaceAll("et expédié ", "").replaceAll(":", "") + r.Vendor.Name + "<\/span>")); r.Vendor.IsCertified && (lt = '<span id="openLabelMarketPlace" class="logo-topSeller"> <\/span><div class="plugin-popin popin" data-trigger="#openLabelMarketPlace" data-url="/popuplabelmarketplace"><\/div>'); ot.html(ut + lt); n.contextInfo && n.contextInfo.Configuration.ConfigFlags.EnableVendorReviews && (r.Vendor.NumberOfReviews > 0 && parseInt(r.Vendor.VendorId) > 0 ? (at = r.Vendor.AverageOverallRating * 20, it.find(".enable-stars").attr("style", "width: " + at + "%;"), w.val(r.Vendor.VendorId), rt.html("(" + r.Vendor.NumberOfReviews + " " + u.ReviewLabel + ")"), it.show(), rt.show()) : (it.hide(), rt.hide())); t("#MkpBelowCTA").empty(); t("#MkpServices").empty(); et.length > 0 && b(et, r); ot.find(".plugin-popin").popin(); f.show(); u.isChildProduct && (t("#MkpServicesVendor").show(), t("#MkpBelowCTAVendor").show()) } var ft = "[[DELIVERYPRICE]]", v = s.data("text"), c = v; if (s.data("marketplace-delivery") && ct) if (s.show(), k = r.Vendor.ShippingThresholdValue || 0, k > 0) { var wt = parseInt(r.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithChargesWithoutCurrency, 10), bt = wt >= k, kt = l.formatPrice(k); c = bt ? "<div>" + u.MKPFreeDeliveryLabel + "<\/div>" : "<div>" + u.MKPFreeDeliveryLabelWithTreshold + " <b>" + kt + "<\/b><\/div>" } else vt = r.IsDeliverableInPlace ? "marketplace-deliveryinplace" : "marketplace-delivery", c = s.data(vt).replace(ft, r.FormattedDeliveryFee); else v !== undefined && v.indexOf(ft) !== -1 && (c = v.replace(ft, r.FormattedDeliveryFee)); ht ? (st.show(), h(), d(), g()) : (st.hide(), nt()); a.attr("data-vendorUrl") && r.WebInfo.VendorFreeReturnsMessage && (yt = a.attr("data-vendorUrl").replace("{vendorId}", r.Vendor.VendorId) + "#vendor-free-return", a.find("a").html("<span>" + r.WebInfo.VendorFreeReturnsMessage + '<\/span><i class="lr-icon lr-icon-info"><\/i>').attr("href", yt), a.show()); o !== undefined ? u.$productContainer.find(".delivery-info-content").html("<span>" + c + "<\/span>").prepend(o.clone()) : u.$productContainer.find(".delivery-info-content").html("<span>" + c + "<\/span>"); s.data("isLrAndMe") === "True" && c === v ? s.show() : s.show(); n._LaRedoute.getScreenType() > 1 && (tt = y.find("ul"), tt.empty(), r.RelatedServices.forEach(function (n) { tt.append(t("<li>", { "class": "pdp-services-element icon icon-check-small icon-block-left", text: n.Name })) }), tt.children().length > 0 ? y.show() : y.hide()) } else y.hide(), h(); t("#sequraInstalmentDiv").length != 0 && e.Page.Blocs.Price.LoadSequraPayment() }; u.$eventContainer.on(n.pdpEvent.selectVariant1, function () { u.article || c() }).on(n.pdpEvent.articleSelected, c); t(".reviews-vendor").on("click", function () { window.location.href = t(this).data("basevendorurl").replace("{vendorId}", t("#vendorId").val()) + "#vendor-reviews" }) }, GenerateLRMOrPlusTag: function (n, i) { var r = "lrText--semiBold", u = "lr-icon", f = "", e = "", o; return n.isLRPlusActivated ? (n.isLRAndMe ? f = "padding: 20px 0; cursor:auto" : (r += " stickerLRPlus", e = "LRAndMe-link"), u += " stickerLRPlus-icon lr-icon-lrplus-color") : (n.isLRAndMe ? f = "padding: 20px 0; cursor:auto" : (r += " stickerLRAndMe", e = "LRAndMe-link"), u += " stickerLRAndMe-icon lr-icon-lrandme-color"), o = t("<span>").attr("class", u), t("<span>").attr("id", e).attr("class", r).attr("style", f).html(o[0].outerHTML + i.TagContent)[0].outerHTML } }) }(window, window.jQuery), function (n, t) { "use strict"; n.pdpEvent = { ATBUpdate: "pdp.ATB.update", buyBoxAB: "buybox_AB", articleSelected: "pdp.article.selected", articleUnselected: "pdp.article.unselected", articleUpdated: "pdp.article.updated", atbOpen: "pdp.atb.open", carouselUpdated: "pdp.carousel.updated", priceUpdate: "pdp.price.update", productReloaded: "pdp.product.reloaded", selectorClose: "selector.close", selectorOpen: "selector.open", selectVariant1: "pdp.variant1.selected", servicesRemoved: "services.removed", unselectVariant2: "variant2.unselected", realTimePriceReady: "pdp.realTimePrice.ready", reviewsFilterAndSortUpdated: "pdp.reviewsFilterAndSort.updated", syteCompleteLookLoaded: "pdp.syteCompleteLookLoaded" }; n.artType = { redReg: "RedouteRegular", redBul: "RedouteBulky", mktReg: "MarketplaceRegular" }; n.ModelPDP = n.Model.extend({ init: function (i, r) { var u = this; u._super(i, r); var f = u.productId, c, e = t("body").data("countrycode") === "fr-FR", l, d = [n.artType.redReg, n.artType.redBul].indexOf(u.productClassification) < 0 ? !1 : !0, a = t("#pdpBrand_" + f).text(), v = t("#dataPurchaseDetails_" + f).text(), y = t("#dataSelector_" + f).text(), p = !u.isEGiftCard, w = t("#customisable_" + f).length === 0, o = !1, g = [Utils.CookieManager.ReadCookie("ratedReviews") || "[]"], nt = Utils.CookieManager.ReadCookie("reportedReviews") || "[]", b = t("#dataReviews"); u.article = null; u.idCartLine = t("#hidCartLineId_" + f).val(); u.Mode = u.idCartLine === "" ? "ATB" : "MOD_BASKET"; u.isChildProduct = u.isChildProduct || u.isPdpComparator; u.isCustomizable = t("#customisable_" + f).length > 0; u.isFromCompleteLook = u.isFromCompleteLook || !1; u.loadCompleteLookFromSyte = u.loadCompleteLookFromSyte || !1; u.spockeeStoreId = u.spockeeStoreId || null; u.spockeeBroadcastId = u.spockeeBroadcastId || null; u.spockeeTimeStart = u.spockeeTimeStart || null; u.shoppingTool = u.shoppingTool || n.wa_data && n.wa_data.eVar12; u.sortFields = { submissionTime: "SubmissionTime", rating: "Rating", helpfulness: "Helpfulness" }; u.sortDirections = { ascending: "Ascending", descending: "Descending" }; u.voteTypes = { positive: "Positive", negative: "Negative", inappropriate: "Inappropriate" }; u.reviews = []; u.totalNbOfReviews = 0; u.offset = 8; u.selectedSortDir = u.sortDirections.descending; u.selectedSortField = u.sortFields.submissionTime; u.selectedRatingFilter; u.selectedLanguageFilter; u.reviewsData = { initialSelectedLanguage: "" }; b.length > 0 && (u.reviewsData = JSON.parse(b.text())); u.alreadyRatedReviews = JSON.parse(g); u.reportedReviews = JSON.parse(nt); v !== "" && t.extend(u, JSON.parse(v)); y !== "" && t.extend(u, JSON.parse(y)); u.isMultiPDP === undefined && (u.isMultiPDP = !1); u.product === undefined ? (u.productList = n["hidProductVariants_" + f] || {}, u.listVariant = t.isArray(u.productList) ? u.productList[0].Variants : u.productList.Variants) : u.listVariant = u.product.Variants; n.Utils.UrlManager.getUrlParameter("wishListLineId") !== undefined && (u.Mode = "MOD_WISHLIST"); u.$button = t("#btnAddToBasket_" + f); u.$buttonsContainer = t("#buttonsContainer_" + f); u.$buttonViewPdp = t("#btnViewProduct_" + f); u.$deliveryInfo = t("#pdpDeliveryInfo_" + f); u.$filterColor = t("#filterColor_" + f); u.$filterQuantity = t("#filterQuantity_" + f); u.$filterSize = t("#filterSize_" + f); u.$eventContainer = t("#pdpEventContainer_" + f); u.$productContainer = t("#product-" + f); u.$btnAddToWishlistInButtonsContainer = t("#buttonsContainer_" + f).find(".btn-add-to-wishlist"); u.$btnAddToWishlistInBackOrderedBlock = t("#backOrderedBlock").find(".btn-add-to-wishlist"); u.$reviewsList = t(".product-rating ul"); u.isChildProduct || (u.$sizeGuide = t("#sizeGuide")); var h = function () { u.ATB_isActive = o && p && w; u.$eventContainer.trigger(n.pdpEvent.ATBUpdate) }, tt = function () { u.LRandMe_isAvailable = o && l || !o && c; u.$eventContainer.trigger(n.pdpEvent.articleUpdated) }, it = function () { u.$eventContainer.trigger(n.pdpEvent.carouselUpdated) }, rt = function () { ut(); u.$eventContainer.trigger(n.pdpServiceEvent.reviewsRequested) }, ut = function () { u.offset = 0; u.$reviewsList.empty() }, s = function (n, t) { for (var i = 0; n.length > i; i++)if (n[i].VariantId === t) return i }, ft = function (n, t) { var i = 0, r = 0; return n !== "" && t !== "" ? (i = s(u.listVariant, n), r = s(u.listVariant[i].Variants, t)) : n !== "" && (i = s(u.listVariant, n)), u.listVariant[i].Variants[r].Article.ItemOfferId }, k = function (n) { for (var t = n, i = 0; 4 - n.length > i; i++)t = "0" + t; return t }, et = function (n, t) { if (t === "") { var i = s(u.listVariant, n); t = u.listVariant[i].Variants[0].VariantId } return f + k(n) + k(t) + u.documentId }; if (u.getDataReco = function (i) { var r = {}, y, p, w, l; if (["ATB", "PDPCrossSell", "PDPUpSell"].indexOf(i) > -1) { var s = "", c = "", h = "", v = "B_", o = n.tc_vars.page_breadcrumb_label; o && o.length > 1 && (s = o[1], c = o.length === 2 ? o[1] : o[2], h = o.length === 2 ? o[1] : o.length === 3 ? o[2] : o[3]); u.siteName === n.siteName.Castaluna ? v = "CASTALUNA" : a && (v += a.replace(/[ .']/g, "-").toLowerCase()); r.$brand = v; r.$page_cat0 = "CAT_" + u.siteName; r.$page_cat1 = "CAT_" + s; r.$page_cat2 = "CAT_" + c; r.$page_cat3 = "CAT_" + h } if (i === "ATB" && (y = "", p = [], e && (h !== c && h !== s && (y = "CAT_" + h), t(".product").each(function () { var n = t(this).data("productid"); n !== undefined && p.push(n.toString()) })), r.$productId = n.tc_vars.add_product_id, [s, c].indexOf(h) > -1 && (r.$page_cat3 = ""), e ? (r.$page_cat = y, r.$gamme = n.tc_vars.add_product_gamme || "", r.$toBan = p) : r.$price = n.tc_vars.add_product_unitprice_ati), i === "PDPCrossSell" && (e && (w = [], n.tc_vars && n.tc_vars.product_vendor_ids && (w = n.tc_vars.product_vendor_ids.indexOf("|") ? n.tc_vars.product_vendor_ids.split("|") : n.tc_vars.product_vendor_ids)), r.$gamme = n.tc_vars.product_gamme || "", r.$productId = f.toString(), s.indexOf("Nouvelle") > -1 && (r.$page_cat1 = "CAT_Nouveautés"), s.indexOf("Collection") > -1 && (r.$page_cat1 = ""), c === h && (r.$page_cat3 = ""), e ? r.$productVendorIds = w : r.$price = n.tc_vars.product_unitprice_ati), i === "PDPUpSell") { var d = u.$filterColor.find("button.selected").length !== 0, g = u.$filterSize.find("button.selected").length !== 0, b = d ? u.$filterColor.find("button.selected").val() : "", k = g ? u.$filterSize.find("button.selected").val() : ""; e ? (l = "PAP", s === "Linge de maison" && (l = "LDM"), s === "Meubles, déco" && (l = "M&D"), r.$genericColorId = t(".color-item.selected").data("genericcolor") || "", r.$universe = l, r.$offerId = ft(b, k)) : r.$offerId = et(b, k); r.$gamme = n.tc_vars.product_gamme || ""; r.$price = n.tc_vars.product_unitprice_ati; r.$productId = f.toString() } return r }, u.set_giftCardInfos_status = function (n) { p = n; h() }, u.set_selector_status = function (n) { o = n; l = u.article !== null ? u.article.Vendor.VendorId === "0" : d; h(); tt() }, u.set_personalization_status = function (n) { w = n; h() }, u.set_carousel_images = function (n) { u.listImg = n; it() }, u.filterAvailableVoteOptions = function (n) { var i = t("[data-review-id=" + n.reviewId + "]"), r = i.find("[value=" + u.voteTypes.positive + "]"), f = i.find("[value=" + u.voteTypes.inappropriate + "]"); n.voteType === u.voteTypes.inappropriate && f.hide(); n.voteType === u.voteTypes.positive && r.addClass("lr-button-success").attr("disabled", "disabled") }, !u.isChildProduct) u.$eventContainer.on(n.globalTrackingEvent.dataLayerUpdated, function () { u.shoppingTool || (u.shoppingTool = n.wa_data.eVar12) }).on(n.pdpServiceEvent.realTimePriceSucceeded, function (t, i) { u.$eventContainer.trigger(n.pdpEvent.realTimePriceReady, [i]) }).on(n.pdpEvent.reviewsFilterAndSortUpdated, function () { rt() }); c = u.$deliveryInfo.find("#loyalty").is(":visible"); u.selectedLanguageFilter = u.reviewsData.initialSelectedLanguage; u.alreadyRatedReviews.forEach(function (n) { u.filterAvailableVoteOptions(n) }) } }) }(window, window.jQuery), function (n, t) { "use strict"; n.MultiPDP = n.Page.extend({ init: function (i, r) { var u = this, f; u.listProduct = r.listProd; u.loadCompleteLookFromSyte = r.loadCompleteLookFromSyte != null ? r.loadCompleteLookFromSyte : !1; u.products = []; r.isPdpComparator && (r.products = n.hidProductVariants_comparison); u.listProduct.forEach(function (i, f) { var e = { Selector: "UiSelector", Price: "UiPrice", WishListAdd: "UiWishListAdd", Thumbnail: "thumbnailContainer" }; r.isPdpComparator || (e.Informations = "UiInformations"); u.isBackOrderedEnabled() && (e.backOrdered = "UiBackOrdered"); t.extend(r, { hasVideo: !1, isGiftCard: !1, isEGiftCard: !1, productId: i, ProductID: i, isMultiPDP: !0, displayTagFromPLP: !0 }); r.products !== undefined && (r.product = r.products[f]); u.products.push(new n.PDP(e, r, n.model.PDP)) }); r.isPdpComparator && u._super(i, r); r.isPdpComparator && !u.isMobileDevice && (f = [], t.each(u.listProduct, function (n, i) { f.push({ productId: i, imageUrl: t("#seeProduct_" + i).children(".product-img").attr("src") }) }), n.Utils.StorageManager.CreateStorageValue("comparedProducts", f)) }, isBackOrderedEnabled: function () { var n = this.Page; return n && n.country === "fr" ? !0 : !1 }, removeProduct: function (i) { var f = i.toString(), r = n.Utils.StorageManager.ReadStorageValue("comparedProducts"), u = -1; return (t.each(r, function (n, t) { if (t.productId === f) { u = n; return } }), u !== -1) ? (r.splice(u, 1), n.Utils.StorageManager.CreateStorageValue("comparedProducts", r), !0) : !1 } }) }(window, jQuery), function (n, t) { "use strict"; n.PDP = n.Page.extend({ init: function (i, r, u) { function ir() { var n = t(popin_olapic_undefined).children().length, i = [].slice.call(t(popin_olapic_undefined).children()); i.forEach(function (i) { var r, u; gt(document.getElementById(t(i).attr("id")).querySelector(".olapicProductCounter")) && (r = t(i).attr("id").replace("image_", ""), t("#olapicCounter").text("" + (parseInt(r) + 1) + "/" + n + ""), u = t(i).attr("data-product-id"), t(i).attr("data-already-viewed") == "false" && (t.ajax({ async: !0, type: "GET", url: "https://data.photorank.me/track/widget/" + b + "/best/media/" + u + "/view?auth_token=" + k + "&analytics_id=" + d + "&pics=1" }), t(i).attr("data-already-viewed", "true"))) }) } var y, ot, h, gt, ui, it, ht, c, v, ct, fi; this._super(i, r, u); var f = this, e = f.Model, ei = f.Tracking, lt = e.article, l = {}, rt = !1, oi = !1, o = e.productId, p = n.wa_data, at = "productImageFromPLP", nt = localStorage.getItem(at), ut = n.globalServiceEvent, vt = !1, w = f.isMobileDevice ? "iceberg" : "panel", si = f.isMobileDevice ? "iceberg" : "popin", yt = !1, hi, pt = 0; f.switchBuyBox = !1; var s = JSON.parse(t("#olapicTextRessources").text()), ci = s.olapicPopinShopTitle, li = s.olapicCarouselViewMoreText, b = s.olapicInstanceID, k = s.olapicAuthToken, d = s.olapicRandomString, ai = s.olapicReportButtonText, vi = s.olapicReportZoneTitle, yi = s.olapicReportZoneExplaination, pi = s.olapicReportZoneEmailInputText, wi = s.olapicReportZoneInputReasonText, bi = s.olapicReportZoneCancelButtonText, ki = s.olapicReportZoneSubmitButtonText, di = s.olapicReportConfirmationMessage, gi = s.olapicReportErrorMessage; e.isMonoColor || e.isMonoSize ? f.countryCode === "fr-FR" && t("#vendorsListHeading").attr("data-vendors") !== "1" ? f.switchBuyBox = f.switchBuyBoxAB === !0 ? !0 : !1 : t("#purchaseDetailsTabs").hide() : t("#purchaseDetailsTabs").hide(); var tt = t("#ATBSuccess_" + o), wt = t(".business-push-button"), a = t("#layerAtb"), bt = t("#openPdpDeliveryInfo_" + o), kt = t("#seeProduct_" + o), ft = t("#repairabilityIndex"); f.$searchField = t("#headerSearchField"); var et = t("#productTagIceberg"), dt = t(".product-link-splited"), nr = t("#ModalLrAndMeSwitchPdp"), tr = t("#lrAndMeSwitchPdp"); e.isChildProduct || (y = t("#sizeGuide"), y.hide()); gt = function (n) { var t = n.getBoundingClientRect(), i = t.top, r = t.height, n = n.parentNode; do { if ((t = n.getBoundingClientRect(), i <= t.bottom == !1) || i + r <= t.top) return !1; n = n.parentNode } while (n != document.body); return i + 50 <= document.documentElement.clientHeight }; var rr = function () { var n = t("#olapicContainer"), i; n.length && (i = { request: { ProductId: o, IsMobile: f.isMobileDevice } }, t.ajax({ url: "/serviceproductnosession/loadmyredoute", data: JSON.stringify(i), contentType: "application/json; charset=utf-8", dataType: "json", type: "POST" }).done(function (i) { var u, y, l, r, s; if (i.d != null && (i = i.d), i.IsSuccess && Utils.Common.getCurrentPrivacy().indexOf(Utils.PrivacyValues.SitePersonalization) > -1) { if (p.events = p.events.length == 0 ? p.events.concat("event116") : p.events.concat(",event116"), u = i.Media, u.length == 0) t("#olapicContainer").css("display", "none"); else { t("#olapicContainer").css("display", "block"); f.isSiteFR() && n.find(".my-redoute-image").hide(); var a = window.innerWidth, c = [], g = [], v = [], e = document.createElement("div"); t(e).attr("id", "olapicCarouselContainer"); t(e).addClass("carousel"); y = 0; u.forEach(function (n) { var i, u; v.push(n.Id); i = document.createElement("div"); t(i).attr("id", "carouselItem_" + y); t(i).addClass("carousel-item"); t(i).addClass("olapicCarouselItems"); t(i).css("position", "relative"); t(i).css("text-align", "center"); var s = document.createElement("picture"), f = document.createElement("div"), o = n.ImageUrl, r = document.createElement("img"); t(r).attr("src", o); t(r).css("min-width", "100%"); t(r).css("min-height", "100%"); t(r).css("object-fit", "cover"); t(r).attr("loading", "lazy"); t(f).append(r); t(i).append(f); t(i).attr("tabindex", "0"); u = document.createElement("p"); t(u).addClass("olapicPicturePublisherName"); t(u).text("@" + n.Username); t(i).append(u); t(e).append(i); c.push(i); y++ }); l = document.createElement("div"); t(l).attr("id", "olapicCarouselContainer"); t(l).append(t(e)); t("#olapicContainer").append(t(l)); a >= 1024 ? t(e).carousel({ itemnumber: 3 }) : a < 1024 && a >= 768 ? t(e).carousel({ itemnumber: 2 }) : t(e).carousel({ itemnumber: 1 }); r = document.createElement("div"); t(r).attr("id", "popin_olapic_" + s); t(r).css("display", "none"); t(r).addClass("popin_olapic"); f.isMobileDevice && f.isTablet == !1 ? t(r).addClass("olapic-Mobile") : t(r).addClass("olapic-Desktop"); var w = [], o = 0, h = document.createElement("h5"); t(h).attr("id", "olapicCounter"); t(h).addClass("olapicCounter"); t(h).text(`1/${u.length}`); c.forEach(function () { var g = u[o], rt = u[o].Products, nt = document.createElement("section"), ut, ft, st, vt, v, ht, ct, yt, i, pt, wt, y, n, e, c, h, l, p, lt, tt, it; t(nt).addClass("mainOlapicPopinImage"); t(nt).attr("id", `picture_${s}_main_image_container`); var a = document.createElement("div"), bt = document.createElement("picture"), kt = document.createElement("img"); t(kt).attr("src", g.ImageUrl); t(bt).append(t(kt)); t(a).append(t(bt)); t(nt).append(t(a)); w.push(t(a)); ut = document.createElement("div"); t(ut).addClass("olapicCounterZone"); ft = document.createElement("div"); t(ft).attr("id", `counter_${o}`); t(ft).addClass("olapicProductCounter"); t(ut).append(t(ft)); var et = document.createElement("div"), ot = document.createElement("div"), at = document.createElement("div"); t(et).addClass("Olapic-mainImageAdditionnalInfo"); t(ot).addClass("olapic-addInfo-Container"); t(at).addClass("ig-Logo-CircleBG"); st = document.createElement("div"); t(st).addClass("popin-ig-logo-container"); vt = document.createElement("span"); t(vt).addClass("OlapicBlackIGLogo"); t(st).append(t(vt)); t(at).append(t(st)); t(ot).append(t(at)); v = document.createElement("a"); t(v).addClass("olapicReportButton"); t(v).addClass("lr-link lr-link-dark"); t(v).text(ai); t(v).on("click", function () { var n = t(v).parent().parent().parent().parent().attr("id").replace("image_", "reportZone_"); t("#" + n).show() }); ht = document.createElement("p"); t(ht).addClass("olapicUsernameOverlay"); t(ht).text("@" + g.Username); t(ot).append(t(ht)); t(et).append(t(ot)); t(et).append(t(v)); ct = document.createElement("div"); t(ct).addClass("gradientBackgroundContainer"); yt = document.createElement("div"); t(yt).addClass("gradientBackground"); t(ct).append(t(yt)); i = document.createElement("div"); t(i).addClass("olapicReportZone"); t(i).attr("id", "reportZone_" + o); t(i).hide(); pt = document.createElement("h4"); t(pt).text(vi); wt = document.createElement("p"); t(wt).text(yi); y = document.createElement("form"); t(y).addClass("olapicReportForm"); n = document.createElement("input"); t(n).attr("type", "email"); t(n).addClass("olapicReportFormEmail"); t(n).attr("placeholder", pi); e = document.createElement("textarea"); t(e).addClass("olapicReportFormReasonInput"); t(e).attr("placeholder", wi); t(n).on("keyup", function () { t(n).val() != "" && t(e).val() != "" && /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t(n).val()) ? t(n).parent().find(".olapicSubmitFormSubmitButton").hasClass("unclickable") && (t(n).parent().find(".olapicSubmitFormSubmitButton").removeClass("unclickable"), t(n).parent().find(".olapicSubmitFormSubmitButton").addClass("lr-button"), t(n).parent().find(".olapicSubmitFormSubmitButton").addClass("lr-button-primary")) : t(n).parent().find(".olapicSubmitFormSubmitButton").hasClass("unclickable") || (t(n).parent().find(".olapicSubmitFormSubmitButton").addClass("unclickable"), t(n).parent().find(".olapicSubmitFormSubmitButton").removeClass("lr-button-primary"), t(n).parent().find(".olapicSubmitFormSubmitButton").removeClass("lr-button")) }); t(e).on("keyup", function () { t(n).val() != "" && t(e).val() != "" && /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t(n).val()) ? t(e).parent().find(".olapicSubmitFormSubmitButton").hasClass("unclickable") && (t(e).parent().find(".olapicSubmitFormSubmitButton").removeClass("unclickable"), t(n).parent().find(".olapicSubmitFormSubmitButton").addClass("lr-button"), t(n).parent().find(".olapicSubmitFormSubmitButton").addClass("lr-button-primary")) : t(e).parent().find(".olapicSubmitFormSubmitButton").hasClass("unclickable") || (t(e).parent().find(".olapicSubmitFormSubmitButton").addClass("unclickable"), t(n).parent().find(".olapicSubmitFormSubmitButton").removeClass("lr-button-primary"), t(n).parent().find(".olapicSubmitFormSubmitButton").removeClass("lr-button")) }); c = document.createElement("button"); t(c).text(bi); t(c).addClass("olapicReportFormCancelButton"); t(c).addClass("olapicButton"); t(c).addClass("lr-button"); t(c).addClass("lr-button-primary"); h = document.createElement("button"); t(h).text(ki); t(h).addClass("olapicSubmitFormSubmitButton"); t(h).addClass("olapicButton"); t(h).addClass("unclickable"); t(c).on("click", function (n) { n.preventDefault(); t(c).parent().parent().hide() }); t(h).on("click", function (n) { var r, u, f; n.preventDefault(); r = t(h).parent(); t(r).find(".olapicReportFormEmail").val() != "" && t(r).find(".olapicReportFormReasonInput").val() != "" && (u = t(r).find(".olapicReportFormEmail").val(), f = t(r).find(".olapicReportFormReasonInput").val(), _LaRedoute.ReportMyRedouteMedia(g.Id, u, f, n => { var r = document.createElement("div"), u = document.createElement("p"), f; t(u).addClass("reportMessageText"); t(r).addClass("olapicReportConfirmationMessage"); n === !1 ? t(u).text(gi) : t(u).text(di); t(r).append(t(u)); f = t(i).attr("id"); t(`#image_${f.replace("reportZone_", "")}`).find(".popin_main_image_container").append(t(r)); setTimeout(function () { t(r).hide(); t(r).remove() }, 1e4) }), t(r).find(".olapicReportFormEmail").val(""), t(r).find(".olapicReportFormReasonInput").val(""), t(h).addClass("unclickable"), t(h).parent().parent().hide()) }); t(y).append(n); t(y).append(e); t(y).append(h); t(y).append(c); t(i).append(pt); t(i).append(wt); t(i).append(y); t(a).append(t(ut)); t(a).append(t(ct)); t(a).append(t(et)); t(a).append(t(i)); l = document.createElement("section"); t(l).addClass("olapicPopinContainer"); t(l).attr("id", "image_" + o); t(l).attr("data-product-id", g.Id); t(l).attr("data-already-viewed", "false"); t(l).append(t(nt)); rt != null && rt.length > 0 && rt.length ? (p = document.createElement("section"), t(p).addClass("olapicRelatedProductsZone"), lt = document.createElement("h4"), t(lt).text(ci), t(lt).addClass("productZoneTitle"), t(p).append(t(lt)), tt = document.createElement("div"), t(tt).addClass("carousel"), it = document.createElement("div"), t(it).addClass("olapicProductList"), rt.forEach(function (n) { var r = document.createElement("div"), u, i; t(r).addClass("productContainer"); var f = document.createElement("picture"), o = n.ImageUrl, e = document.createElement("img"); t(e).attr("src", o); t(f).append(t(e)); u = document.createElement("a"); i = document.createElement("p"); t(i).addClass("productName"); t(i).text(n.Title); t(r).append(t(f)); t(r).append(t(i)); t(r).on("mouseenter", function () { t(i).css("text-decoration", "underline") }).on("mouseleave", function () { t(i).css("text-decoration", "none") }); t(u).append(t(r)); t(u).on("click", function (i) { _satellite.track("DC_PDP_OlapicReviews_Click"); i.preventDefault(); t.ajax({ async: !1, contentType: "application/json", type: "GET", url: `https://data.photorank.me/track/widget/${b}/best/media/${g.Id}/shop?auth_token=${k}&analytics_id=${d}&pics=1&redirect_url=${n.ShareLink}` }); window.location.href = n.ShareLink }); t(it).append(t(u)); t(it).css("margin-bottom", "24px") }), t(p).append(t(it)), t(l).append(t(p)), f.isMobile && f.isTablet == !1 ? (t(i).removeClass("olapicReportZone"), t(i).addClass("olapicReportZoneMobile"), t(l).append(t(i))) : t(a).append(t(i)), f.isMobileDevice && t(p).append(t(tt))) : (t(nt).css("margin-bottom", "24px"), f.isMobile && f.isTablet == !1 && t(i).addClass("olapicReportZoneMobile")); f.isMobileDevice && (t(p).append(t(tt)), t(tt).carousel()); t(r).append(t(l)); o++ }); t("#olapicContainer").append(t(r)); s = 0; c.forEach(function (n) { var y, o, l, a, i, c; t(n).attr("data-item-number", s); y = u[s]; t(n).find("img").css("height", t(n).find("img").width()); o = document.createElement("div"); t(o).addClass("olapicPictureOverlay"); l = document.createElement("p"); t(l).addClass("olapicUsernameOverlay"); t(l).text("@" + y.Username); a = document.createElement("span"); t(a).addClass("black-plus-icon"); i = document.createElement("div"); t(i).attr("id", "iconContainer"); t(i).append(a); c = document.createElement("div"); t(c).attr("id", "userNameContainer"); t(c).append(i); t(o).append(c); let e = document.createElement("p"); t(e).text(li); t(i).append(e); t(e).addClass("OlapicCarouselViewMoreButtonText"); t(e).hide(); t(n).on("mouseenter", function () { t(i).addClass("hovered"); setTimeout(function () { t(e).show() }, 50) }).on("mouseleave blur", function () { t(i).removeClass("hovered"); t(e).hide() }).on("focus", function () { t(i).addClass("hovered"); setTimeout(function () { t(e).show() }, 50) }); t(n).append(t(o)); t(o).css("height", t(n).find("img").width()); t(n).on("click", function (i) { var u; if (_satellite.track("DC_PDP_OlapicCarousel_Click"), u = t(popin_olapic_undefined).children().length, t("#olapicCounter").text(`1/${u}`), f.isMobileDevice && !f.isTablet ? (t(r).modal({ method: "open", type: "iceberg", classList: "olapic_popin" }), setTimeout(function () { t("#modalContainer").find(".modal_titleBar").prepend(t(h)) }, 200)) : (t(r).modal({ method: "open", type: "popin", classList: "olapic_popin" }), setTimeout(function () { t("#modalContainer").find(".modal_titleBar").prepend(t(h)) }, 200)), w.forEach(function (n) { t(n).addClass("popin_main_image_container"); setTimeout(function () { t(n).css("height", t(n).width()) }, 200) }), t.ajax({ async: !0, type: "GET", url: `https://data.photorank.me/track/widget/${b}/best/media/${v[parseInt(t(n).attr("data-item-number"))]}/click?auth_token=${k}&analytics_id=${d}&pics=1` }), pt == 0) { u = t(popin_olapic_undefined).children().length; t("#olapicCounter").text(`1/${u}`); t("#popin_olapic_undefined").parent().on("scroll", function () { ir() }); pt = 1 } u = t(popin_olapic_undefined).children().length; t("#olapicCounter").text(`1/${u}`); let e = `#image_${t(n).attr("data-item-number")}`; i.preventDefault(); t("#popin_olapic_undefined").parent().scrollTop(0); t("#popin_olapic_undefined").parent().stop().delay(500).animate({ scrollTop: t(`#image_${t(n).attr("data-item-number")}`).position().top }, 1e3) }); t(n).on("keypress", function (i) { i.key === "Enter" && (t(r).modal({ method: "open", type: "popin", classList: "olapic_popin" }), t.ajax({ async: !0, type: "GET", url: `https://data.photorank.me/track/widget/${b}/best/media/${v[parseInt(t(n).attr("data-item-number"))]}/click?auth_token=${k}&analytics_id=${d}&pics=1` })) }); g.push(o); s += 1 }); t(window).on("resize", function () { setTimeout(function () { c.forEach(function (n) { t(n).find("img").css("height", t(n).find("img").width()); t(n).find(".olapicPictureOverlay").css("height", t(n).find("img").width()) }); w.forEach(function (n) { t(n).css("height", t(n).width()) }) }, 200) }); t.ajax({ async: !0, type: "GET", url: `https://data.photorank.me/track/widget/${b}/best/render?auth_token=${k}&analytics_id=${d}&pics=1` }) } f.isMobile && (t("#olapicContainer").css("padding-left", "8"), t("#olapicContainer").css("padding-right", "8")) } else t("#olapicContainer").css("display", "none") })) }, ur = function () { t("#spockeeVideoCTA").length && (window.addEventListener("spockeeLoaded", i => { const u = i.detail; console.log("@debug:spockeeLoadedDOM", u); var r = t("#spockeeVideoCTA"); r.show(); r.off("click").on("click", function (t) { t.preventDefault(); t.stopPropagation(); const i = new CustomEvent("spockeeOpenShoppingParty", { detail: { id: e.spockeeBroadcastId, time: e.spockeeTimeStart } }); window.dispatchEvent(i); e.$eventContainer.trigger(n.trackingRule.PDP.SPOCKEE_VIDEO_PDP_WATCH) }) }), function () { var t = { storeId: e.spockeeStoreId, storeType: "storetype", customColor: "#000000", displayType: "none", staging: !1, keywords: [], refreshOnClose: !1, useDefaultStyles: !0, transactionType: "addToCart" }, n = document.createElement("script"); n.setAttribute("src", "https://party.spockee.io/builder/" + t.storeId); n.setAttribute("data-spck", JSON.stringify(t)); document.body.appendChild(n) }()) }, fr = function (t) { t && t.OmnitureIntegration && vt || e.isFromCompleteLook && n.Utils.CookieManager.CreateCookie("mainshoppingtool", "associatedlookpdp") }, er = function (i) { var r = f.GetArticleInfo(), u, o; r.articleIsSelected && (u = { request: { quant: r.quantity, basketSize: r.basketSize, presCode: r.presCode, itemOfferId: r.itemOfferId, CartLineId: e.idCartLine, personalisation: r.personalisation } }, (e.isEGiftCard || e.isGiftCard) && (u.request.giftCardInfo = f.Blocs.GiftCardInfos.GetInfo()), f.refProduct = r.presCode, o = e.$deliveryInfo.find(".name-vendor"), l = { name: o.text() }, t.ajax({ async: !1, cache: !1, type: "POST", contentType: "application/json; charset=utf-8", url: "/shoppingbasket/UpdateItemOfCart", data: JSON.stringify(u), success: function () { (e.isEGiftCard || e.isGiftCard) && n.Utils.CookieManager.EraseCookie("giftCard-article-modify"); f.AddToBasketSuccessEvent(i) }, error: function (t) { n.console.error("AJAX Error on: " + this.url + " --- method: " + this.type + " --- status: " + t.status + " --- statusText: " + t.statusText) } })) }, or = function (i, r) { h = r === e.article.ItemOfferId ? e.$button : t(".button-container[data-itemid=" + r + "]").find(".lr-button"); typeof i === n.varType.bool ? (i ? (h.addClass("lr-button--iconRight"), h.addClass("lr-button--iconChecked"), h.data("text-add-success") !== undefined && h.text(h.data("text-add-success"))) : h.addClass("lr-button-error"), e.isChildProduct && n.setTimeout(ti, 2e3)) : console.error("pdp : success is not a boolean") }, sr = function (n, i) { (e.isMultiPDP || e.isFromCompleteLook) && ii(); var r = t.extend({}, i || {}, { itemOfferId: n.itemOfferId, componant: "pdp", hasLoyalty: n.loyalty }); f.pageType === "ProductPage" && tt.length === 0 && (r.hasATBlayer = !0); e.$eventContainer.trigger(ut.addToCartRequested, [n, r]) }, hr = function () { oi && (t("#quantitySelect_" + o).addDisabled().attr("disabled", "disabled"), ar()) }, ni = function () { (!e.isEGiftCard || e.isEGiftCard && f.Blocs.GiftCardInfos.IsValid()) && (t("#quantitySelect_" + o).removeDisabled().removeAttr("disabled"), f.HideErrorMessage(e.$buttonsContainer)) }, cr = function () { if (t(".ecopart-link").length > 0) t(".ecopart-link").on("click", function (n) { n.preventDefault(); n.stopPropagation(); t("#ecopartPopin").popin({ method: "open", trigger: t(this) }) }) }, lr = function () { if (t(".js-popin-sticker").length > 0) t(".js-popin-sticker").on("click", function (n) { n.preventDefault(); n.stopPropagation(); t("#js-popin-sticker_" + t(this).data("id")).popin({ method: "open", trigger: t(this) }) }) }, ar = function () { var t = "", i = n.labels.MobileV3_PDP, r = f.Blocs.Selector !== undefined && f.Blocs.Selector.hasCustomizable() && f.Blocs.Selector.customizableBV.isValid() === !1; e.isEGiftCard && !f.Blocs.GiftCardInfos.IsValid() ? t = "Veuillez choisir un montant et remplir les informations carte cadeau" : e.isGiftCard && !f.Blocs.GiftCardInfos.IsValid() ? t = "Veuillez choisir un montant pour la carte cadeau" : f.GetVariant2() === null ? (t = i.NoSizeError, r && (t = i.NoSizeAndCustomTextError)) : r && (t = i.NoCustomTextError); vr() && ot.children("#atbTooltipMessage_" + o).text(t) }, vr = function () { return ot !== undefined && ot.length > 0 ? !0 : !1 }, yr = function () { var u = f.GetVariant1() != null ? f.GetVariant1().VariantMedia : [], i = { image: t(".article-atb-image"), title: t(".article-atb-details-title"), ref: t(".article-atb-details-ref"), size: t(".article-atb-details-size"), color: t(".article-atb-details-color"), qty: t(".article-atb-details-qty"), price: t(".article-atb-price"), vendor: t(".article-atb-details-vendor") }, e = i.image, s, h, r; e.empty(); u[0].FileName !== undefined && (s = t("<img>", { "class": "additional-img", src: u[0].FileName.replace("|Dimension|", "products/100by100") }), e.append(s)); h = t("#product-" + o + " .info-price-total").clone(!1).find("*").removeAttr("id"); i.title.text(t("#product-" + o + " .pdp-title").text()); f.refProduct !== 0 ? (i.ref.text(f.refProduct), i.ref.parent().show()) : i.ref.parent().hide(); i.size.text(t("#filterSizeLabel_" + o).text()); i.color.text(t("#filterColorLabel_" + o).text()); i.qty.text(f.Blocs.Selector.qty); r = i.vendor; r.length > 0 && (r.html(l.name), r.text() || r.text(t(".pdp-brand").text()), l.url !== undefined ? r.attr("data-vendor-url", l.url).click(function () { n.location.href = l.url }) : r.removeAttr("data-vendor-url").off("click")); f.$currentPrice !== undefined ? i.price.html(t("<span>", { html: f.$currentPrice, style: "font-size: 32px;" })) : i.price.html(h); a.popin("open") }, pr = function () { t(".mask").addClass("atb-mask"); t("body").prepend(a); a.addClass("layer-atb").show() }, ti = function () { h !== undefined && (h.removeClass("lr-button-success lr-button-error lr-button--iconRight lr-button--iconChecked"), h.data("text-add") !== undefined && h.text(h.data("text-add"))) }, ii = function () { ei.set_productOrigin({ type: "RECO", subType: e.loadCompleteLookFromSyte ? "Auto" : "Manual", extraData: [1, e.isFromCompleteLook ? e.loadCompleteLookFromSyte ? "syte-shopthelook" : "shopthelook" : "productrange"] }) }, ri = function () { e.ATB_isActive ? ni() : hr() }, wr = function () { var t = n.Utils.UrlManager.GetHashValue("searchkeyword"); t != null && /vendor([0-9]+)/.test(t) && f.$searchField.val("") }, br = function (n) { var t = "", i = n.split("&"); return i.forEach(function (n) { if (n.indexOf("searchkeyword") !== -1) { var i = n.split("="); t = i[1]; return } }), decodeURI(t) }, st = function (n, t) { var i = "", r = n.split("&"); return r.forEach(function (n) { if (n.indexOf(t) !== -1) { var r = n.split("="); i = r[1]; return } }), decodeURI(i) }, g = function (n) { ft.addClass("repairability-index-" + n) }, kr = function (n) { var t = parseInt(n); t < 2 ? g("0-2") : t < 4 ? g("2-4") : t < 6 ? g("4-6") : t < 8 ? g("6-8") : g("8-10") }; if (f.AddToBasket = function (n) { var t = function () { var t = f.GetArticleInfo(), r, u, i; hi = f.GetArticle().EAN; rt = !1; r = e.$deliveryInfo.find(".name-vendor"); l = { name: r.text() }; r.find("a").length > 0 && (l.url = r.find("a").attr("href")); n !== undefined ? (t.itemOfferId = n.itemOfferId, t.presCode = n.prescode, l = n.vendor, f.$currentPrice = n.$price, rt = !0) : delete f.$currentPrice; f.refProduct = t.presCode; e.$button.feedback("add"); u = typeof f.Blocs.Loyalty != "undefined" ? f.Blocs.Loyalty.shouldAddLoyalty : !1; i = { quant: t.quantity, basketSize: t.basketSize, presCode: t.presCode, itemOfferId: t.itemOfferId, personalisation: t.personalisation, contextCategoryId: t.contextCategoryId, productId: t.ProductId, loyaltySource: "pdp", loyalty: u }; (e.isEGiftCard || e.isGiftCard) && (i.giftCardInfo = f.Blocs.GiftCardInfos.GetInfo()); e.isFromCompleteLook ? i.origin = "associatedlookpdp" : e.isMultiPDP === !0 ? i.origin = "multipdp" : typeof e.shoppingTool != "undefined" && e.shoppingTool !== "undefined" && (i.origin = e.shoppingTool); sr(i, { fromOtherVendor: n ? n.fromOtherVendor : !1, hasOtherVendors: e.hasOtherVendors }) }; f.GetArticleInfo().articleIsSelected ? t() : f.requestSizeBefore(t) }, f.AddToBasketSuccessEvent = function () { n.Utils.Common.isCFAO() || fr(f.ATBOmnitureInformation); n._LaRedoute.updateBasketCountItem(); tt.length > 0 ? (tt.tooltip("open"), setTimeout(function () { tt.tooltip("close") }, 2e3)) : f.showAtb() }, f.CloseLayerAtb = function () { f.isMobileDevice ? (t(".mask").removeClass("atb-mask"), a.hide(), a.trigger("popin.close")) : a.popin("close") }, f.GetTags = function () { return e.tags = null, f.GetVariant2() != null && f.GetVariant2().Tags != null && (e.tags = f.GetVariant2().Tags), e.tags }, f.GetArticle = function () { return e.article = null, e.article = f.GetVariant1() == null || f.GetVariant1().Article == null && (f.GetVariant2() == null || f.GetVariant2().Article == null) ? null : f.GetVariant2().Article, e.article }, f.GetArticleInfo = function () { var i = e.article, r = null, u = null, o = null, t = {}; return i !== null && (r || (r = i.ItemOfferId), u == null && (u = f.Blocs.Selector.GetQuantity()), o == null && (o = f.Blocs.Selector.GetPersonalisation()), t.basketSize = i.BasketSize, t.presCode = i.PresCode, t.contextCategoryId = null, n.contextInfo && n.contextInfo.CategoryId && (t.contextCategoryId = n.contextInfo.CategoryId), t.ProductId = i.ProductId, t.DocumentId = i.DocumentId, t.Dimension1 = i.Dimension1, t.Dimension2 = i.Dimension2), t.articleIsSelected = i != null, t.quantity = u, t.personalisation = o, t.itemOfferId = r, t }, f.GetVariant1 = function () { var i = null, r = f.Blocs.Selector.GetIdVariant1(); if (e.listVariant) { if (e.listVariant.length == 1) return e.listVariant[0]; if (i = t.grep(e.listVariant, function (n) { return r == n.VariantId }), i != null && i.length == 1) return i[0]; n.console.error("PDP - CurrentVariant.GetVariant1 : Can't select color variant (id : " + r + ") in variant list " + e.listVariant) } }, f.GetVariant2 = function () { var n = null, i = f.Blocs.Selector.GetIdVariant2(); return i != null && (n = t.grep(f.GetVariant1().Variants, function (n) { return i == n.VariantId }), n != null && n.length == 1) ? n[0] : n }, f.LoadDefaultArticle = function () { var r = n.Utils.CookieManager.ReadCookie("wishList_ItemToAdd"), i, u; r !== null && (r = JSON.parse(r), parseInt(r.productAdded) === parseInt(o) && (t("#divAddedToWishList").show(), n.setTimeout(function () { t("#divAddedToWishList").addClass("fade") }, "5000"), i = r.Dimension1, u = r.Dimension2, n.Utils.CookieManager.EraseCookie("wishList_ItemToAdd"))); i === undefined && e.$filterColor.find("button.selected").length > 0 && (i = e.$filterColor.find("button.selected").val()); u === undefined && e.$filterSize.find("button.selected").length > 0 && (u = e.$filterSize.find("button.selected").val()); nt !== undefined && nt !== null && e.$filterColor.find("button.selected").find("img").attr("data-twic-src") !== undefined && nt != n.Utils.UrlManager.getLastElementFromUrl(e.$filterColor.find("button.selected").find("img").attr("data-twic-src")) && t.each(e.$filterColor.find("button"), function () { if (nt === n.Utils.UrlManager.getLastElementFromUrl(t(this).find("img").attr("data-twic-src"))) { i = t(this).val(); var r = new URL(window.location.href); r.searchParams.has("dim1") ? r.searchParams.set("dim1", i) : r.searchParams.append("dim1", i); history.replaceState(null, null, r); window.location.href.indexOf(o) > -1 && localStorage.removeItem(at); return } }); i !== undefined && f.Blocs.Selector.SelectVariant1(i, !1); u !== undefined && f.Blocs.Selector.SelectVariant2(u, !1); f.Blocs.Selector.UpdateATBButtonStatus(!1) }, f.requestSizeBefore = function (n) { var i = f.Blocs.Selector; e.$filterSize.modal({ method: "open", type: w, title: e.$filterSize.attr("data-label"), classList: "pdp-filter-popin", id: e.$filterSize.attr("id") + "_Panel", gradientOnScroll: !0, source: t("#filterSizeContainer_" + o) }); t("#eventContainer").one("modal.close", function () { f.GetArticle().IsBackOrdered != !0 && setTimeout(function () { f.GetArticleInfo().articleIsSelected && n() }, 100) }) }, f.showAtb = function () { f.isMobileDevice ? pr() : yr(); n.$eventContainer.trigger(n.pdpEvent.atbOpen) }, f.toggleBuyBox = function () { var r; f.switchBuyBox = !0; r = t("#globalPDPDetailsContainer"); r.addClass("purchase-details-container"); var u = t("#purchaseDetailsTabs"), n = t("#purchaseDetailsTabsMainVendor"), e = t("#mainProductDetailsContainer"), i = t("#purchaseDetailsTabsOtherVendors"), o = t("#otherVendorsDetailsContainer"); u.show(); u.removeClass("hidden"); n.on("click", function () { n.attr("aria-expanded", !0); i.attr("aria-expanded", !1); e.attr("data-expanded", !0); o.attr("data-expanded", !1) }); i.on("click", function () { i.attr("aria-expanded", !0); n.attr("aria-expanded", !1); o.attr("data-expanded", !0); e.attr("data-expanded", !1) }) }, Utils.Common.getCurrentPrivacy().indexOf(Utils.PrivacyValues.SitePersonalization) > -1 && f.countryCode === "fr-FR" && (ui = "", document.cookie.indexOf("s_ecid=") > -1)) { it = document.cookie.split("; "); for (ht in it) if (it[ht].startsWith("s_ecid=")) { ui = it[ht].split("=")[1]; break } } if (t(".productTag_link").each(function (n) { t(this).parent().prev(".productTag_modal").attr("id", "productTagModal" + n); var i = t(this).text(); t(this).on("click", function () { t("#productTagModal" + n).modal({ method: "open", type: si, id: "productTag_Panel" + n, gradientOnScroll: !0, title: i }) }) }), !e.isChildProduct) { t("#switchButtonLRAndMeLabels").length > 0 && (c = JSON.parse(t("#switchButtonLRAndMeLabels").text())); tr.on("click", function () { var i = t(this).attr("data-loyalty") === "pdp" ? "pdp" : "header", r = t(this).attr("data-loyalty") === "pdp" ? !1 : !0; window._UiHeader.isLoyaltyInCart === !1 ? (t(".loyaltyLrAndMe_zone_switch").addClass("selected"), t(".checkLrAndMeBox").prop("checked", !0).attr("checked", "checked"), t(".switch_label").html('<span class="bold">' + c.switchLRAndMeOn + "<\/span> " + c.LoyaltyLRAndMePrice), e.$eventContainer.trigger(n.globalServiceEvent.addLoyaltyToCartRequested, [null, { fromHeader: r, componant: i }]), window._UiHeader.isLoyaltyInCart = !0) : window._UiHeader.isLoyaltyInCart === !0 && (t(".loyaltyLrAndMe_zone_switch").removeClass("selected"), t(".checkLrAndMeBox").prop("checked", !1).removeAttr("checked"), t(".switch_label").html('<span class="bold">' + c.switchLRAndMeOff + "<\/span><\/br>" + c.LoyaltyLRAndMePrice), e.$eventContainer.trigger(n.globalServiceEvent.removeLoyaltyToCartRequested, [null, { fromHeader: r, componant: i }]), window._UiHeader.isLoyaltyInCart = !1); n._LaRedoute.updateBasketCountItem() }); nr.on("click", function () { var i = t(this).attr("data-loyalty") === "pdp" ? "pdp" : "header", r = t(this).attr("data-loyalty") === "pdp" ? !1 : !0; window._UiHeader.isLoyaltyInCart === !1 ? (t(".loyaltyLrAndMe_zone_switch").addClass("selected"), t(".checkLrAndMeBox").prop("checked", !0).attr("checked", "checked"), t(".switch_label").html('<span class="bold">' + c.switchLRAndMeOn + "<\/span> " + c.LoyaltyLRAndMePrice), e.$eventContainer.trigger(n.globalServiceEvent.addLoyaltyToCartRequested, [null, { fromHeader: r, componant: i }]), window._UiHeader.isLoyaltyInCart = !0) : window._UiHeader.isLoyaltyInCart === !0 && (t(".loyaltyLrAndMe_zone_switch").removeClass("selected"), t(".checkLrAndMeBox").prop("checked", !1).removeAttr("checked"), t(".switch_label").html('<span class="bold">' + c.switchLRAndMeOff + "<\/span> " + c.LoyaltyLRAndMePrice), e.$eventContainer.trigger(n.globalServiceEvent.removeLoyaltyToCartRequested, [null, { fromHeader: r, componant: i }]), window._UiHeader.isLoyaltyInCart = !1); n._LaRedoute.updateBasketCountItem() }) } if (n.contextInfo.Configuration.ConfigFlags.EnableUIRTA && !e.isChildProduct && e.$eventContainer.trigger(n.pdpServiceEvent.realTimePriceRequested), e.switchBuyBox === !0 && f.toggleBuyBox(), wt.length > 0) wt.on("click", function () { t("html, body").animate({ scrollTop: t("#businessInfo").offset().top }, 0) }); e.$button.on("click", function () { e.Mode === "MOD_WISHLIST" ? f.Blocs.WishListAdd.HandleWishListEvent() : lt != null && lt.IsBackOrdered === !0 ? f.Blocs.backOrdered.show() : e.Mode === "MOD_BASKET" ? f.Blocs.Selector !== undefined && f.Blocs.Selector.hasCustomizable() && f.Blocs.Selector.customizableBV.validate().isValid() === !1 || er() : f.Blocs.Selector !== undefined && f.Blocs.Selector.hasCustomizable() && !f.Blocs.Selector.customizableBV.validate().isValid() || e.isEGiftCard && !f.Blocs.GiftCardInfos.IsValid() || f.AddToBasket() }); t("#productRatingClickZone").on("click", function () { t("#productRating").is(":visible") === !1 && t("#productRatingHeading").trigger("click"); t("html, body").animate({ scrollTop: t(".product-rating").offset().top - t("#header").height() }, 200) }); t("#productRatingTitle").on("keypress", function () { t("#productRating").is(":visible") === !1 && t("productRatingHeading").trigger("click"); t("html, body").animate({ scrollTop: t(".product-rating").offset().top - t("#header").height() }, 200) }); e.$buttonViewPdp.off("click").on("click", function () { var n = t(this).data("href"); n && (window.location = n) }); if (kt.length > 0) kt.on("click", function () { var i = ""; f.Blocs.Selector.currentVariant1 !== undefined && (i += (i === "" ? "#" : "&") + "variant1=" + f.Blocs.Selector.currentVariant1); f.Blocs.Selector.currentVariant2 !== undefined && (i += (i === "" ? "#" : "&") + "variant2=" + f.Blocs.Selector.currentVariant2); n.location = t(this).data("url") + i }); if (bt.length > 0) bt.on("click", function () { e.$deliveryInfo.stop().slideToggle(300); t(this).find(".lr-arrow").toggleClass("lr-arrow-down lr-arrow-up") }); t("#closeLayerAtb").off("click").on("click", function () { f.CloseLayerAtb() }); if (f.isMobileDevice) t(".mobileLayerAtb_closeCross").on("click", function () { f.CloseLayerAtb() }); t(".mask").off("click").on("click", function () { t(this).hasClass("atb-mask") === !0 && f.CloseLayerAtb() }); t("#seeCompleteLookLayerATB").off("click").on("click", function () { f.CloseLayerAtb() }); if (!e.isChildProduct) { t("#sizeGuideLinkOutside").off("click").on("click", function () { y.modal({ type: w, method: "open", id: "sizeGuide_Panel", title: y.attr("data-label"), source: t("#sizeGuideLinkOutside") }); console.log(o); t(window).trigger("modalEvent.sizeGuideOpen") }); t("#sizeGuideLinkInside").off("click").on("click", function () { y.modal({ type: w, method: "open", id: "sizeGuide_Panel", title: y.attr("data-label"), source: t("#sizeGuideLinkOutside") }); t("sizeGuide_Panel") && t("#filterSize_" + o + "_Panel") ? t("#sizeGuide_Panel").css("zIndex", parseInt(t("#filterSize_" + o + "_Panel")[0].style.zIndex) + 1) : t(window).trigger("modalEvent.sizeGuideOpen") }); t("#backPdp").on("click", function () { document.referrer.indexOf(".laredoute.") !== -1 ? n.history.back() : n.location.href = t(".breadcrumb .active a").attr("href") }) } a.on("popin.open", function () { var n = "fromAtbLayer"; t(this).on("click", ".ecopart-link", function (i) { i.preventDefault(); i.stopPropagation(); t("#ecopartPopin").addClass(n).popin({ method: "open", trigger: t(this) }); f.CloseLayerAtb() }).on("click", ".colored-price-tag", function (i) { i.preventDefault(); i.stopPropagation(); t("#colorPricePopin").addClass(n).popin({ method: "open", trigger: t(this) }); f.CloseLayerAtb() }); t("#ecopartPopin, #colorPricePopin").on("popin.close", function () { t(this).hasClass(n) && (t(this).removeClass(n), f.showAtb()) }) }); e.$eventContainer.on(n.pdpEvent.ATBUpdate, function () { ri() }); if (!e.isChildProduct) a.on("popin.close", function () { n.setTimeout(ti, 2e3) }); e.$eventContainer.on(ut.addToCartSucceeded, function (i, r, u) { f.ATBOmnitureInformation = r; var s = r.TagCommanderHTML; s != "" && s != null && (t("#tc_vars").empty(), t("#tc_vars").html(s)); r.AnalyticsDataLayer !== undefined && (vt = !0); r.ErrorMessage !== undefined && r.ErrorMessage !== null ? (e.$buttonsContainer.find(".block-info.block-error").text().search(r.ErrorMessage) < 0 && t("<div>", { "class": "block-info block-error", html: r.ErrorMessage, "data-cerberus": "basket_full_error" }).prependTo(e.$buttonsContainer), rt && t("html, body").animate({ scrollTop: e.$buttonsContainer.offset().top - 30 }, 1e3)) : (or(!0, u.itemOfferId), f.AddToBasketSuccessEvent()); typeof tc_events_1 == "function" && n.contextInfo.Breadcrumb !== null && n.contextInfo.Breadcrumb !== undefined && n.tc_events_1(this, "addToCart", { add_product_id: o, add_breadcrumb_id: n.contextInfo.Breadcrumb, add_quantity: r.Quantity }) }); e.$eventContainer.on(ut.addToCartAnswered, function () { ni(); e.$button.feedback("remove") }); e.$eventContainer.on(n.pdpEvent.buyBoxAB, function () { f.toggleBuyBox() }); if (e.isMultiPDP || e.isFromCompleteLook) n.Utils.Common.onCustomClick(e.$productContainer.find('.product-img-container > a, [id^="btnViewProduct_"]'), ii); t("#productTagPopin").on("click", function () { et.iceberg("emerge") }); et.find(".lr-icon-cross-small").on("click", function () { et.iceberg("immerse") }); e.isChildProduct || n._OmnitureTracking.handleShoppingTool(); f.LoadDefaultArticle(); !e.isChildProduct && t("#divMyRedoutePlaceholder").length > 0 && rr(); e.isChildProduct || ur(); e.Mode === "MOD_WISHLIST" && e.$button.text(n.labels.MobileV3_PDP.ModifyWishlistButton); f.Blocs.Selector.UpdateDeliveryLinkStatus(); n.Utils.UrlManager.GetHashValue("variant1") !== null && e.$filterColor.find("button[value=" + n.Utils.UrlManager.GetHashValue("variant1") + "]").trigger("click"); n.Utils.UrlManager.GetHashValue("variant2") !== null && e.$filterSize.find("button[value=" + n.Utils.UrlManager.GetHashValue("variant2") + "]").trigger("click"); cr(); lr(); e.isFromCompleteLook ? n.Utils.OmnitureManager.addShoppingToolHash(e.$productContainer.find("a").first(), "associatedlookpdp") : e.isMultiPDP === !0 && n.Utils.OmnitureManager.addShoppingToolHash(e.$productContainer.find("a").first(), "multipdp"); e.ATB_isActive !== undefined && ri(); e.shouldAddToWishlist && f.Blocs.WishListAdd.$this.trigger("click"); t(".fs-countdown").each(function () { var i = new n.UiFsCountDown(f, "UiFsCountDown", null, t(this)) }); v = n.location.hash; ct = br(v); v != null && v != "" && st(v, "shoppingtool") != "brandpage" && st(v, "shoppingtool") != "bottomlinkreco" && st(v, "shoppingtool") != "serp" && (f.$searchField.val(ct), f.$searchField.val().length >= 1 && t("#eraseSearchButton").show()); ct != "" && wr(); ft && kr(ft.text()); t("#eventContainer").on("teester.teestervideo", function () { var r = t("#teester_player_tag"), i = t("#videoArea"); i.is(":visible") || r && i && (i.append(r).show(), f.isMobileDevice && t("#videoButton").show(), e.$eventContainer.trigger(n.trackingRule.PDP.VIDEO_DISPLAYED)) }); if (e.isPdpComparator !== !0 && yt === !1 && (yt = !0, window.onTeesterReady = window.onTeesterReady || [], window.onTeesterReady.push(function (t) { t.addEventListener("VIDEO_PLAY", function () { e.$eventContainer.trigger(n.trackingRule.PDP.VIDEO_PLAYED) }) })), dt && dt.each(function () { if (t(this).data("urlupdated") === !1) { var n = t(this).data("urlparams") != "" ? t(this).attr("href") + "?" + t(this).data("urlparams") : t(this).attr("href"); t(this).attr("href", n); t(this).data("urlupdated", !0) } }), t("#modalLRAndMe").length > 0) { t("#LRAndMe-link").on("click", function () { t("#modalLRAndMe").modal({ method: "open", type: w, id: "LRAndMe_Panel", gradientOnScroll: !0 }) }); t("#icon-lrandme").on("click", function () { t("#modalLRAndMe").modal({ method: "open", type: w, id: "LRAndMe_Panel", gradientOnScroll: !0 }) }) } t("#loyaltyCondition").off("click").on("click", function () { t(this).modal({ method: "open", type: "popin", url: "/cgu-la-redoute-et-moi.aspx", fullscreen: !1, gradientOnScroll: !0, block: "#offre" }) }); t("#loyaltyConditionAddToCartModal").off("click").on("click", function () { t(this).modal({ method: "open", type: "popin", url: "/cgu-la-redoute-et-moi.aspx", fullscreen: !1, gradientOnScroll: !0, block: "#offre" }) }); t("#vendorsPanel").css("display", "none"); fi = t(".buttonVendorsPanel"); t(fi).on("click", function () { var r, i, u; t("#vendorsPanel").parent(".modal_content").scrollTop(0); r = t(".vendor").length; i = r > 1 ? r + " " + n.labels.MobileV3_PDP.OtherVendors.toString() : r + " " + n.labels.MobileV3_PDP.OtherVendor.toString(); u = t("#modalIdvendorsPanel h3").html(); u != i && t("#modalIdvendorsPanel h3").html(i); f.isMobileDevice ? t("#vendorsPanel").modal({ method: "open", type: "iceberg", title: i }) : t("#vendorsPanel").modal({ method: "open", type: "panel", title: i }); t("#vendorsPanel").find("button").on("click", function () { t("#modalIdvendorsPanel").find(".modal_close").first().trigger("click") }); console.log(t("vendorsPanel").find(".infoPrice")); t("vendorsPanel").find(".infoPrice").on("click", function () { t("#modalIdvendorsPanel").find(".modal_close").first().trigger("click") }) }); t(".size-item").on("click", function () { t("#MkpBelowCTA").show(); t("#MkpServices").show() }) } }) }(window, window.jQuery), function () { "use strict"; function tt(n, t) { w.on(n, t) } function f(n) { var t = n; return t = t.split("?")[0], t = t.replace("|Dimension|", "products"), t = t.replace("https://cdn.laredoute.com", ""), t = t.replace("https://cdn.laredoute.ru", ""), t = t.replace("72by72/", ""), t = t.replace("250by250/", ""), t = t.replace("640by640/", ""), t = t.replace("680by680/", ""), t.replace("1200by1200/", "") } function ht() { var n = u.g.innerWidth; return n < 768 ? e.xs : n < 992 ? e.sm : n < 1200 ? e.md : n < 1360 ? e.lg : e.xl } var u = {}, v, d, g, y, p, nt, s, w, e; !function () { u.n = function (n) { var t = n && n.__esModule ? function () { return n["default"] } : function () { return n }; return u.d(t, { a: t }), t } }(); !function () { u.d = function (n, t) { for (var i in t) u.o(t, i) && !u.o(n, i) && Object.defineProperty(n, i, { enumerable: !0, get: t[i] }) } }(); !function () { u.g = function () { if (typeof globalThis == "object") return globalThis; try { return this || new Function("return this")() } catch (n) { if (typeof window == "object") return window } }() }(); !function () { u.o = function (n, t) { return Object.prototype.hasOwnProperty.call(n, t) } }(); var it = jQuery, n = u.n(it), c; (function (n) { n.addToBasket = "pdp.addToBasket"; n.carouselSwiped = "carousel.swiped"; n.colorHovered = "color.hovered"; n.colorSelected = "color.selected"; n.colorUnhovered = "color.unhovered"; n.mainImageClicked = "mainImage.clicked"; n.mainImageDoubleTapped = "mainImage.doubleTapped"; n.productReloaded = "pdp.product.reloaded"; n.productUpdated = "pdp.product.updated"; n.sizeSelected = "size.selected"; n.sizeUnselected = "size.unselected"; n.thumbnailHovered = "thumbnail.hovered"; n.lastSeenIdsAvailable = "pdp.lastSeenIdsAvailable"; n.syteCompleteLookLoaded = "pdp.syteCompleteLookLoaded" })(c || (c = {})); var t = c, l = undefined && undefined.__assign || function () { return l = Object.assign || function (n) { for (var t, r, i = 1, u = arguments.length; i < u; i++) { t = arguments[i]; for (r in t) Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]) } return n }, l.apply(this, arguments) }, rt = JSON.parse(n()("#dataGlobal").text()), ut = l({}, rt), ft = ut, o = undefined && undefined.__assign || function () { return o = Object.assign || function (n) { for (var t, r, i = 1, u = arguments.length; i < u; i++) { t = arguments[i]; for (r in t) Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]) } return n }, o.apply(this, arguments) }, a, b = JSON.parse(n()("#pdpData").text()), et = ((a = Object.getOwnPropertyDescriptor(window, "hidProductVariants_" + b.productId)) === null || a === void 0 ? void 0 : a.value) || [], ot = o(o(o({}, ft), b), { productList: et }), i = ot, st = function (r, u) { var h = i.productList.find(function (n) { return n.ProductId === r }), c = h.Variants, f = c[0], l = f.Variants, e, s, o = u || n()("#pdpEventContainer_" + r), a = function () { return e ? e.Article : undefined }, v = function () { return f }, y = function () { return f.VariantId }, p = function (n) { var t = f.VariantMedia; return n ? t.filter(function (t) { return t.Type === n }) : t }, w = function () { return h }, b = function () { return e }, k = function () { return s }, d = function (n) { var i = c.find(function (t) { return t.VariantId === n }); i !== f && (f = i, o.trigger(t.colorSelected, [f.VariantId]), l = f.Variants) }, g = function (n) { s = n; e = l.find(function (t) { return t.VariantId === n }); o.trigger(t.sizeSelected) }, nt = function () { s = undefined; e = undefined; o.trigger(t.sizeUnselected) }; return { $eventContainer: o, get_article: a, get_color: v, get_colorId: y, get_media: p, get_product: w, get_size: b, get_sizeId: k, productId: r, set_colorId: d, set_sizeId: g, unset_size: nt } }, k = st, r; (function (n) { n.image = "Image"; n.video = "Video" })(r || (r = {})), function (n) { n.redouteRegular = "RedouteRegular"; n.redouteBulky = "RedouteBulky"; n.marketplaceRegular = "MarketplaceRegular" }(v || (v = {})), function (n) { n.l = "L"; n.outOfStock = "E" }(d || (d = {})); g = { resized: "page.size.change" }; y = g, function (n) { n[n.xxs = 72] = "xxs"; n[n.xs = 250] = "xs"; n[n.s = 302] = "s"; n[n.m = 362] = "m"; n[n.l = 641] = "l"; n[n.xl = 680] = "xl"; n[n.xxl = 1200] = "xxl" }(p || (p = {})), function (n) { n.laRedoute = "Laredoute"; n.laRedouteForBusiness = "LaRedouteForBusiness" }(nt || (nt = {})); s = "/images/Common/placeholder.svg"; w = n()(window), function (n) { n.xs = "xs"; n.sm = "sm"; n.md = "md"; n.lg = "lg"; n.xl = "xl" }(e || (e = {})); var ct = function (u) { var l = "in", k = JSON.parse(n()("#PDPDescriptionLabels").text()), a = n()(".additional-img-container"), nt = n()("#productDescriptionImg"), p = n()("#productReference_" + u.productId), h = n()("#productDescription_" + u.productId), o = h.closest(".pdp-description-container"), d = h.find(".productDescriptionShowMore-container"), e = n()("#productDescriptionShowMore_" + u.productId), it = h.height(), rt = a.height(), g = function () { h.height() > o.height() && (d.addClass(l), e.attr({ "aria-expanded": "false", "aria-controls": "pdpDescriptionContainer" }), i.isMobileDevice || n()(".additional-img").prop("complete") && w()); it <= rt && (o.css("max-height", "none"), d.remove(), e.remove()) }, w = function () { var t = n()(".additional-img").height(); o.height() > t && o.css({ "max-height": t, "min-height": t }) }, b = function () { var t = u.get_media(r.image), i = t.length === 1 ? 0 : 1, e = t[i].FileName !== undefined ? f(t[i].FileName) : s, o = n()("<img>", { "class": "additional-img", "data-twic-src": "image:" + e + "?imgopt=twic", "data-twic-bot": "resize=640" }); a.removeClass(l).html(o.get(0)); o.on("load", function () { a.addClass(l) }); nt.attr("data-twic-src", "image:" + e + "?imgopt=twic&twic=v1/resize=640") }, c = function () { var t = u.get_article() || u.get_color().Variants[0].Article, i, n; if (t.ProductClassification === v.marketplaceRegular) { p.hide(); return } i = t.PresCode; n = u.get_product().MainProductCode; p.html(p.data("label") + " <strong>" + i + (n ? " / " + n : "") + "<\/strong>").show() }; e.on("click", function () { var t = e.attr("aria-expanded") === "true" ? !0 : !1; if (e.attr("aria-expanded", (!t).toString()), t === !0) e.html(k.openDescription + '<span class="lr-arrow lr-arrow-down"><\/span>'), i.isMobileDevice ? o.css("max-height", "200px") : w(); else { e.html(k.closeDescription + '<span class="lr-arrow lr-arrow-up"><\/span>'); o.css("max-height", "100%"); e.on("click", function () { var t = n()("#productDescriptionHeading"), i = t.offset() || { left: 0, top: 0 }; n()("html,body").animate({ scrollTop: i.top }, "slow") }) } }); u.$eventContainer.on(t.colorSelected, function () { b(); c() }).on(t.sizeSelected, function () { c() }).on(t.productUpdated, function () { n()(".pdp-description-title").text(u.get_product().Title); n()("#mainProductDescription").html(u.get_product().LongDescription); c(); g(); b() }); tt(y.resized, function () { w() }); c(); g(); b() }, lt = ct, at = function () { var e = "flixmedia--expanded", o, t = n()("#pdpFlixmediaZone"), i = t.find(".flixmedia"), r = t.find(".flixmedia_expandBtn--more"), u = t.find(".flixmedia_expandBtn--less"), s = document.getElementById("flix-inpage"), f; r.on("click", function () { i.addClass(e); r.hide(); u.show() }); u.on("click", function () { var f; n()("html, body").animate({ scrollTop: (f = t.offset()) === null || f === void 0 ? void 0 : f.top }, { duration: 1e3, complete: function () { i.animate({ height: "530px" }, { duration: 100, complete: function () { i.removeClass(e).css("height", ""); u.hide(); r.show() } }) } }) }); window.tC && window.tC.event && window.tC.event.loadManufacturerProductInfos ? window.tC.event.loadManufacturerProductInfos(null, { container_id: "flix-inpage" }) : i.hide(); f = new MutationObserver(function (n, i) { window.Utils.Common.hasSomethingToDisplay(s) && (t.show(), clearTimeout(o), i.disconnect()) }); f.observe(s, { childList: !0, subtree: !0 }); o = setTimeout(function () { f.disconnect() }, 3e4) }, vt = at, yt = function (u) { var c = {}, s = 0, l, o = i.imageUrlPrefix, e = n()("#pdpCarouselContainer_" + u.productId).find(".mainMedia_imageContainer"), h = function (t, i) { var u = e.find(".mainMedia_image"), s = e.find(".mainMedia pictureContainer"), r = f(t); u.attr("src") !== r && (u.detach(), s.detach(), e === null || e === void 0 ? void 0 : e.prepend(c[r] || n()("<picture>", { "class": "mainMedia_pictureContainer" }).append(n()("<source>", { srcset: o + r + "?imgopt=twic&twic=v1/cover=400x400 400w," + o + r + "?imgopt=twic&twic=v1/cover=550x550 550w," + o + r + "?imgopt=twic&twic=v1/cover=650x650 650w," + o + r + "?imgopt=twic&twic=v1/cover=700x700 700w," + o + r + "?imgopt=twic&twic=v1/cover=800x800 800w," + o + r + "?imgopt=twic&twic=v1/cover=1100x1100 1100w," + o + r + "?imgopt=twic&twic=v1/cover=1200x1200 1200w", sizes: "(min-width: 1360px) 680px, (min-width: 1200px) 641px, (min-width: 992px) 535px, (min-width: 768px) 407px, 100vw" })).append(c[r] = n()("<img>", { src: o + r + "?imgopt=twic&twic=v1/cover=640x640", "class": "mainMedia_image", alt: "", title: "", "data-cerberus": "img_pdp_thumbnails" + i, "data-twic-bot": "resize=640" })))) }, a; u.$eventContainer.on(t.thumbnailHovered, function (n, t) { s = t.index; h(t.src, t.index) }).on(t.colorSelected, function () { s = 0; var n = u.get_media(r.image)[s].FileName; h(n, s); l = n }).on(t.colorHovered, function (n, t) { var i = u.get_product().Variants.find(function (n) { return n.VariantId === t.colorId }).VariantMedia[0].FileName; l = e.find(".mainMedia_image").attr("src"); h(i, 0) }).on(t.colorUnhovered, function () { h(l, s) }).on(t.productUpdated, function () { h(u.get_media(r.image)[0].FileName, 0) }); e.on("click", ".mainMedia_image", function () { u.$eventContainer.trigger(t.mainImageClicked, [{ index: s },]) }); a = e.find(".mainMedia_image"); c[a.attr("src")] = a; u.get_media(r.image)[0].AllowZoom || e.addClass("mainMedia--noZoom") }, pt = yt, wt = function (u) { var o, c = !1, h = !1, a, v = 15, y = i.imageUrlPrefix, e = n()("#prodCarousel_" + u.productId), p = n()("#leftArrow"), w = n()("#rightArrow"), b = function () { var i = e.find(".item"); return new window.Swipe(e[0], { startSlide: 0, speed: 400, width: 440, draggable: !1, continuous: !0, disableScroll: !1, stopPropagation: !1, callback: function () { c = !0; k() }, transitionEnd: function (r) { c = !1; h = !1; i.removeActive(); n()(i[r]).addActive(); u.$eventContainer.trigger(t.carouselSwiped) } }) }, l = function () { var i = u.get_media(r.image), t; i.length !== 0 && (t = e.find(".swipe-wrap"), o !== undefined && o.kill(), t.find(".item:not(.mainMedia_video)").remove(), i.forEach(function (i, r) { var u = document.createElement("img"), o = f(i.FileName), e; r === 0 || r === 1 ? (u.src = y + o + "?imgopt=twic&twic=v1/resize=640", u.setAttribute("data-twic-bot", "resize=640")) : (u.src = s, u.src = y + o + "?imgopt=twic&twic=v1/resize=640", u.setAttribute("data-twic-bot", "resize=640"), u.setAttribute("style", "width: 100%;")); u.setAttribute("data-cerberus", "img_pdp_thumbnails" + r); u.setAttribute("itemprop", "image"); e = document.createElement("div"); e.className = "item " + (r === 0 ? "active" : ""); e.appendChild(u); e.style.backgroundImage = s; t.append(e); t.append(n()(".mainMedia_video")) }), e.find("div.item").first().attr("data-index", 0), i.length > 1 && (o = b())) }, k = function () { var r, u, f, s = o.getPos() + 1, c = e.find(".item").length, h = e.find(".item:nth-child(" + s + ")"), n = h.find("img"), t = s === 1 ? e.find(".item:last-child").find("img") : h.prev().find("img"), i = s === c ? e.find(".item:first-child").find("img") : h.next().find("img"); ((r = n === null || n === void 0 ? void 0 : n.prop("src")) === null || r === void 0 ? void 0 : r.length) && n.prop("src").indexOf("placeholder") !== -1 && n.prop("src", n.data("src")); ((u = t === null || t === void 0 ? void 0 : t.prop("src")) === null || u === void 0 ? void 0 : u.length) && t.prop("src").indexOf("placeholder") !== -1 && t.prop("src", t.data("src")); ((f = i === null || i === void 0 ? void 0 : i.prop("src")) === null || f === void 0 ? void 0 : f.length) && i.prop("src").indexOf("placeholder") !== -1 && i.prop("src", i.data("src")) }, d = function () { o.next() }, g = function () { o.prev() }, nt = function (n) { o.slide(n) }; p.on("click", g); w.on("click", d); n()("#mobileVideoLink").on("click", function () { nt(e.find(".item").length - n()(".mainMedia_video").length) }); e.on("touchstart", "img", function () { c || (h ? (h = !1, clearTimeout(a), u.$eventContainer.trigger(t.mainImageDoubleTapped, [{ src: this.src },])) : (h = !0, a = setTimeout(function () { h = !1 }, 300))) }).on("touchmove", "img", function (t) { var i, r = ((i = n()(t.target).offset()) === null || i === void 0 ? void 0 : i.left) || 0; c = r <= -v || r >= v }); u.$eventContainer.on(t.colorSelected, l).on(t.productUpdated, l); l() }, bt = wt, kt = function (n) { var s = "in", u = "show-more", i = $("#rse-zone"), e = $("#pdpRse"), t = e.find(".pdpRse-container"), o = e.find(".pdpRse-showMore"), h = function () { var n = t.find(".pdpRse-content"); n.height() > (t === null || t === void 0 ? void 0 : t.height()) ? (o.addClass(s), t.removeClass(u)) : (t.addClass(u), o.removeClass(s), $(".pdpRse-showMore").remove()); $(".pdpRse-container").height() <= 90 && $(".pdpRse-showMore").remove() }, c = function () { var n = $("<div>", { "class": "pdpRse-content" }), r; i.find("b").remove(); i.find("br").remove(); r = i.html(); i.remove(); n.html(r); t.append(n) }, l = function () { var n = $(".pdpRse-pictos"); t.append(n); $("#pdpDescription").remove(".pdpRse-pictos") }, a = function () { var e = n.get_media(r.image)[0], i = $("<img>", { "class": "pdpRse-image" }).attr("data-twic-src", "image:" + f(e.FileName) + "?imgopt=twic").attr("data-twic-bot", "none"), u = $(".mainMedia_image"); i.attr("title", u.attr("title") || ""); i.attr("alt", u.attr("alt") || ""); i.attr("width", 326); i.attr("height", 326); t.append(i) }; $("#pdpRse-showMoreBtn").on("click", function () { t.addClass(u); o.remove() }); i.length !== 0 && (c(), a(), l(), e.show(), h()) }, dt = kt, gt = function (r) { var a = []; r.$eventContainer.on(t.lastSeenIdsAvailable, function () { a = u.g.window.lastSeenProductsIds }); r.$eventContainer.on(t.syteCompleteLookLoaded, function () { o("completeLook") }); var y = [], d = n()("#syteButton"), c = n()("body"), s = n()("#syteContainer"), e = n()("#syteProductList"), h = n()("#sytePersonalizationList"), l = n()("#syteSelector"), g = n()("#syteThumbnailImageWrapper"), p = window.labels.Sytepricefrom, nt = function (t, i, r) { var u = "&sku=" + t, f = typeof r != "undefined" && r !== "" ? "&size=" + r : ""; n().ajax({ url: "/serviceproductnosession/getsimilarproductbounds.aspx?imageUrl=" + i + u + f, type: "GET", dataType: "json", success: function (n) { var u = n; it(u, t, i, typeof r != "undefined" && r !== "") }, error: function (n) { console.log("An error has occured while fetching Syte data: " + n) } }) }, w = function (t, i) { var r = "/serviceproductnosession/getsimilarproductoffers.aspx?isArticleLevel=" + i + "&offerUrl="; e.addLoading(); n().ajax({ url: r + t, type: "GET", dataType: "json", success: function (t) { var r = t; e.html(""); e.removeLoading(); ft(r, i); y = n()("#syteProductList .product").toArray(); e.animate({ scrollTop: 0 }, 1e3) }, error: function (n) { console.log("An error has occured while fetching Syte similar product offers: " + n) } }) }, tt = function (t) { var u = t, i, r; h.addLoading(); a.length > 0 ? (i = "", a.forEach(function (n) { i += n + '","' }), r = 'sessionSkus="' + i.substr(0, i.length - 2)) : r = 'sessionSkus="' + u + '"'; n().ajax({ url: "/serviceproductnosession/getsimilarproductpersonalization.aspx?" + r, type: "POST", dataType: "json", success: function (n) { var t = n; h.html(""); h.removeLoading(); et(t) }, error: function (n) { console.log("An error has occured while fetching Syte personalization: " + n) } }) }, it = function (t, i, r, u) { rt(r); ut(t.Offers); n()(".syte_personalization").length > 0 && tt(i); w(t.Offers[0].OfferUrl, u) }, v = function (n, t) { e.empty(); b(); var r = k(n); nt(n, r, t); i.isMobileDevice ? s.modal({ method: "open", type: "panel", id: "syteModal" }) : s.modal({ method: "open", type: "popin", id: "syteModal", fullscreen: "true" }) }, rt = function (t) { var i, r = t, u = s.data("imgprefix"); i = n()("#syteThumbnailImage").length ? n()("#syteThumbnailImage") : n()("<img />", { "class": "syte_thumbnailImage", id: "syteThumbnailImage" }); i.attr("src", u + f(r)); g.empty().append(i) }, ut = function (t) { t.forEach(function (t, i) { var r = n()("<button />", { "class": "syte_thumbnailHotspot lr-icon lr-icon-hotspot", id: "hotspot_" + i }), u; r.css({ left: Math.round(t.Center[0] * 100) + "%", top: Math.round(t.Center[1] * 100) + "%" }); u = t.Label; r.on("click", function () { n()(".lr-icon-hotspot").removeClass("lr-icon-hotspot--on"); r.addClass("lr-icon-hotspot--on"); b(); w(t.OfferUrl, !1); o("resultsForBound", undefined, undefined, u) }); i === 0 && r.addClass("lr-icon-hotspot--on"); n()("#syteThumbnailImageWrapper").append(r) }) }, b = function () { l.find('option[value="similar"]').prop("selected", !0) }, k = function (t) { return typeof t == "undefined" || t === r.productId ? i.isMobileDevice ? n()("#pdpCarouselContainer_" + r.productId).find(".item.active img").attr("src") : n()("#pdpCarouselContainer_" + r.productId).find(".mainMedia_image").attr("src") : n()("#product-" + t + " .child-product-item .product-img-container img").attr("src") }, ft = function (t, r) { var f = n()("<div />", { "class": "product", html: '<a class="product-link" href="">\n              <div class="product-img-container">\n                  <picture class="product-img"><img src="" class="product-img" alt="" data-lzled="true"><\/picture>\n              <\/div>\n              <div class="product-info">\n                  <div class="product-brand text-ellipsis"><\/div>\n                  <div class="product-title text-ellipsis"><\/div>\n                  <div>\n                      <del class="product-original-price" style="display: none;"><\/del>\n                      <span class="product-discount" style="display: none;"><\/span>\n                  <\/div>\n                  <div class="product-price-container">\n                      <span class="product-price-from" style="display: none;">' + p + '<\/span>\n                      <span class="product-price" data-cerberus="detail_product_finalPrice"><\/span>\n                  <\/div>\n                  <div class="product-eco-part" style="display: none;"><\/div>\n              <\/div>\n          <\/a>\n      <\/div>' }), u = t.Products, s = "syte_ref=" + (r ? "oosreco" : "discovery_button"); u.length = 12; u.forEach(function (n, t) { var c = f.clone(), r, u; c.find("img.product-img").attr("src", n.ProductImage); c.find(".product-link").attr({ href: n.Url + (n.Url.indexOf("?") > -1 ? "&" : "?") + s, "data-index": t, "data-id": n.ProductId }); c.find(".product-brand").text(n.Brand); c.find(".product-title").text(n.Title); r = n.BasePrice; u = n.FinalPrice; r !== null && (r = r.replace(/^0+/, "")); u !== null && (u = u.replace(/^0+/, "")); var o = "", h = "", l = parseFloat(r), a = parseFloat(u); switch (i.siteId) { case "1": h = u + " " + n.Currency; o = r + " " + n.Currency; break; case "2": h = u + " " + n.Currency; o = r + " " + n.Currency; break; case "3": h = n.Currency + u; o = n.Currency + r; break; case "4": break; case "5": h = u + " " + n.Currency; o = r + " " + n.Currency; break; case "6": h = u + " " + n.Currency; o = r + " " + n.Currency; break; case "7": break; case "8": break; case "9": break; case "10": h = n.Currency + " " + u; o = n.Currency + " " + r; break; case "11": h = u + " " + n.Currency; o = r + " " + n.Currency; break; case "12": h = u + " " + n.Currency; o = r + " " + n.Currency; break; case "13": break; case "14": h = u + " " + n.Currency; o = r + " " + n.Currency; break; default: h = u + " " + n.Currency; o = r + " " + n.Currency }r !== null && (l > a && c.find(".product-original-price").text(o).show(), n.DiscountPercentage !== 0 && c.find(".product-discount").text("-" + n.DiscountPercentage + "%").show()); c.find(".product-price").text(h); c.attr("data-finalprice", u); e.append(c) }); n()("#syteProductList .product-link").each(function (t) { var i = n()(this), u = i.attr("data-id"); i.on("click", function () { n().ajax({ async: !0, cache: !1, type: "GET", contentType: "application/json; charset=utf-8", url: "/servicegeneric/triggertealiumclickonreco?productid=" + u + "&positionClicked=" + t + "&isSyte=true", success: function () { }, error: function (n) { console.log("Interactive Event failed:" + n) } }); o("similarProductClick", u, t + 1, undefined, r ? "right_drawer_oos" : "default") }) }) }, et = function (t) { var r = n()("<div />", { "class": "product", html: '<a class="product-link" href="">\n              <div class="product-img-container">\n                  <picture class="product-img"><img src="" class="product-img" alt="" data-lzled="true"><\/picture>\n              <\/div>\n              <div class="product-info">\n                  <div class="product-brand text-ellipsis"><\/div>\n                  <div class="product-title text-ellipsis"><\/div>\n                  <div>\n                      <del class="product-original-price" style="display: none;"><\/del>\n                      <span class="product-discount" style="display: none;"><\/span>\n                  <\/div>\n                  <div class="product-price-container">\n                      <span class="product-price-from" style="display: none;">' + p + '<\/span>\n                      <span class="product-price" data-cerberus="detail_product_finalPrice"><\/span>\n                  <\/div>\n                  <div class="product-eco-part" style="display: none;"><\/div>\n              <\/div>\n          <\/a>\n      <\/div>' }), i = t.Products, u = "syte_ref=personalization"; i.length = 16; i.forEach(function (n) { var t = r.clone(), i, f, e, o; t.find("img.product-img").attr("src", n.ProductImage); t.find(".product-link").attr({ href: n.Url + (n.Url.indexOf("?") > -1 ? "&" : "?") + u }); t.find(".product-brand").text(n.Brand); t.find(".product-title").text(n.Title); i = n.BasePrice; f = n.FinalPrice; i !== null && (i = i.replace(/^0+/, "")); f !== null && (f = f.replace(/^0+/, "")); i !== null && (e = parseFloat(i), o = parseFloat(f), e > o && t.find(".product-original-price").text(i + n.Currency).show(), n.DiscountPercentage !== 0 && t.find(".product-discount").text("-" + n.DiscountPercentage + "%").show()); t.find(".product-price").text(f + n.Currency); t.attr("data-finalprice", f); h.append(t) }) }, ot = function (t) { var f = n()("#syteProductList .product"), r = f.toArray(), o = n()("#sytePersonalizationList .product"), u = o.toArray(), i; e.addLoading(); t === "similar" ? y.forEach(function (n) { e.append(n) }) : (i = t === "priceincrease", r.sort(function (t, r) { var u = parseFloat(n()(t).data("finalprice")), f = parseFloat(n()(r).data("finalprice")); return i ? u - f : f - u }), u.sort(function (t, r) { var u = parseFloat(n()(t).data("finalprice")), f = parseFloat(n()(r).data("finalprice")); return i ? u - f : f - u }), r.forEach(function (n) { e.append(n) }), u.forEach(function (n) { h.append(n) })); e.removeLoading(); e.animate({ scrollTop: 0 }, 1e3); l.blur(); e.focus() }, o = function (t, r, u, f, e) { var a = s.data("sytesessionid"), v = s.data("sytev"), y = s.data("sytei"), p = s.data("sytes"), w = "account_id=" + y + "&sig=" + p + "&session_id=" + a + "&syte_uuid=" + v + "&syte_url_referer=" + location.host + location.pathname, o, h = k(), c, l; t === "buttonImpression" ? o = "&name=fe_discovery_button_impression&placement=default&imageSrc=" + h + "&tags=discovery_button" : t === "buttonClick" ? (o = "&name=fe_discovery_button_click&imageSrc=" + h + "&tags=discovery_button", e && (c = { placement: e, imageSrc: h })) : t === "similarProductClick" ? (o = "&name=fe_offer_click&sku=" + r + "&position=" + u + "&tags=discovery_button", e && (c = { placement: e })) : t === "resultsForBound" ? o = "&name=fe_bb_show_results&category=" + f + "&imageurl=" + h + "&tags=camera&results_count=20" : t === "pageVisit" ? (o = "&name=fe_page_view&tags=ecommerce", c = { sku: i.productId }) : t === "completeLook" && (o = "&name=fe_stl_show_layout&tags=shop_the_look"); l = "https://syteapi.com/et?" + w + o; n().ajax({ url: l, type: "POST", contentType: "text/plain", data: JSON.stringify(c), success: function () { }, error: function (n) { console.log("Interactive Event failed:" + n) } }) }; o("buttonImpression"); o("pageVisit"); d.on("click", function () { var t = n()("#filterSizeLabel_" + i.productId).text(); v(i.productId, t); o("buttonClick", undefined, undefined, undefined, "default") }); if (i.isMobileDevice) c.on("click", ".filter-size.pdp-filter-popin .pdp-filter-size.pdp-filter-item-content.syte_button_article", function (t) { var i, r, u, f; c.find(".filter-size.pdp-filter-popin").modal({ method: "close", id: c.find(".filter-size.pdp-filter-popin").attr("id") + "_Panel" }); u = n()(t.currentTarget).closest(".pdp-filter-item.size-item").data("title"); f = (r = (i = n()(t.currentTarget).closest("[id^=filterSize_]").attr("id")) === null || i === void 0 ? void 0 : i.replace("filterSize_", "")) !== null && r !== void 0 ? r : ""; v(f, u); o("buttonClick", undefined, undefined, undefined, "right_drawer_oos") }); else c.on("click", ".filter-size.pdp-filter-popin .syte_button.syte_button_article", function (t) { var i, r, u = n()(t.currentTarget).closest(".pdp-filter-item.size-item").data("title"), f = (r = (i = n()(t.currentTarget).closest("[id^=filterSize_]").attr("id")) === null || i === void 0 ? void 0 : i.replace("filterSize_", "")) !== null && r !== void 0 ? r : ""; v(f, u); o("buttonClick", undefined, undefined, undefined, "right_drawer_oos") }); l.on("change", function () { ot(l.val()) }); i.isMobileDevice && n()("#syteContainer").appendTo("body") }, ni = gt, ti = function (u) { var l, o, w, b = i.imageUrlPrefix, it = n()("#thumbnails_" + u.productId), a = it.find(".thumbnails_carousel"), e = document.getElementById("thumbnails_" + u.productId), s = e === null || e === void 0 ? void 0 : e.getElementsByClassName("thumbnails_carousel")[0], k = e === null || e === void 0 ? void 0 : e.getElementsByClassName("thumbnails_leftArrow")[0], d = e === null || e === void 0 ? void 0 : e.getElementsByClassName("thumbnails_rightArrow")[0], g = document.getElementById("vimeoVideos"), rt = g ? JSON.parse(g.innerText) : {}, h = [], ut = document.getElementsByClassName("media_icon"), c = function (n, t, i) { (e === null || e === void 0 ? void 0 : e.getAttribute(n)) && h.push({ namespace: t, domPick: i }) }, ft = function () { return new Promise(function (n, t) { var i; rt.vimeoIds.forEach(function (r, u) { i = XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP"); i.onload = function () { var f, e; i.status >= 200 && i.status < 300 ? (e = JSON.parse(i.response).Video, (f = document.getElementById("itemVideoVimeo" + u)) === null || f === void 0 ? void 0 : f.setAttribute("data-ThumbnailUrl", e.ThumbnailUrl), sessionStorage.setItem("Videmo" + r + "-VideoUrl", e.VideoUrl), n(i.response)) : t({ status: i.status, statusText: i.statusText }) }; i.onerror = function () { t({ status: i.status, statusText: i.statusText }) }; var f = et(); i.open("GET", "/servicegeneric/getvideo.aspx?videoid=" + r + "&videoFormat=" + f); i.send() }) }) }, et = function () { var n = window.innerHeight > window.innerWidth ? window.innerHeight : window.innerWidth; return n >= 1920 ? "HDHIGH" : n >= 1280 ? "HDLOW" : n >= 960 ? "SDHIGH" : "SDLOW" }, ot = function () { c("data-hasVideo", "Video", "itemVideo"); c("data-has360", "360", "item360"); c("data-hasAnimation", "Animation", "itemAnimation");[].forEach.call(document.getElementsByClassName("itemVideoVimeo"), function (n, t) { c("data-hasVideoVimeo", "VideoVimeo" + t, "itemVideoVimeo" + t) }) }, v = function () { var n = u.get_media(r.image), i, c; k && (k.style.display = "none"); d.style.display = n.length > o ? "block" : "none"; i = b + f(n[0].FileName) + "?imgopt=twic&twic=v1/resize=70"; c = function (n) { var f = i, u = document.getElementById("item" + n), t, r; if (n.startsWith("VideoVimeo")) { if (!u || !u.getAttribute("data-ThumbnailUrl")) return; f = u.getAttribute("data-ThumbnailUrl") } t = document.createElement("div"); t.classList.add("carousel-item"); t.setAttribute("tabindex", "0"); t.setAttribute("role", "button"); t.addEventListener("click", function () { [].forEach.call(e === null || e === void 0 ? void 0 : e.getElementsByClassName("item active"), function (n) { n.classList.remove("active") });[].forEach.call(this.getElementsByClassName("item"), function (n) { n.classList.add("active") }) }); r = document.createElement("img"); r.classList.add("media_icon_img"); r.setAttribute("src", f); r.style.width = "70px"; r.style.height = "70px"; r.setAttribute("alt", ""); u && (u.append(r), t.append(u)); s === null || s === void 0 ? void 0 : s.append(t) }; n.forEach(function (n, i) { var o, r; h.length > 0 && i === 2 && (h.forEach(function (n, t) { c(n.namespace, t) }), i = i + 1); o = document.createElement("div"); o.classList.add("carousel-item"); o.setAttribute("tabindex", "0"); o.setAttribute("role", "button"); r = document.createElement("img"); r.classList.add("item"); i === 0 && r.classList.add("active"); r.setAttribute("src", b + f(n.FileName) + "?imgopt=twic&twic=v1/resize=70"); r.setAttribute("width", "70px"); r.setAttribute("height", "70px"); r.setAttribute("alt", ""); r.addEventListener("click", function () { [].forEach.call(e.getElementsByClassName("item active"), function (n) { n.classList.remove("active") }); this.classList.add("active"); u.$eventContainer.trigger(t.thumbnailHovered, { index: i, src: n.FileName }) }); o.addEventListener("keydown", function (r) { r.key !== "Tab" && ([].forEach.call(e.getElementsByClassName("item active"), function (n) { n.classList.remove("active") }), this.classList.add("active"), u.$eventContainer.trigger(t.thumbnailHovered, [{ index: i, src: n.FileName }])) }); o.append(r); s && s.append(o) }); u.$eventContainer.trigger(t.thumbnailHovered, [{ index: 0, src: n[0].FileName }]); a.carousel({ enabledOnMobile: !0, isVertical: l, itemnumber: o, slidemargin: 10, verticalHeight: w }) }, p = function () { [].forEach.call(document.getElementsByClassName("media_icon active"), function (n) { n.classList.remove("active") }); h.forEach(function (n) { n.domPick && document.getElementById(n.domPick) ? e === null || e === void 0 ? void 0 : e.append(document.getElementById(n.domPick)) : [].forEach.call(ut, function (n) { e === null || e === void 0 ? void 0 : e.append(n) }) }); a.carousel("destroy"); a.empty(); v() }, nt = function (n) { l = n === "lg" || n === "xl"; l ? (o = 7, w = n === "lg" ? 580 : 630) : o = n === "sm" ? 5 : n === "md" ? 5 : 1 }; u.$eventContainer.on(t.colorSelected, p).on(t.productUpdated, p); tt(y.resized, function (n, t) { nt(t.size); p() }); ot(); nt(ht()); ft().then(function () { v() }).catch(function () { v() }) }, ii = ti, ri = function () { var i, t, r, u; setTimeout(function () { i = n()("#widgetsContainer"); t = n()("#widgetsContainerIds"); t.length && (r = JSON.parse(t.text())); i.length && t.length && u() }, 500); u = function () { n().ajax({ url: "/ServiceWidgets/LoadWidgets", type: "POST", dataType: "json", contentType: "application/json; charset=utf-8", data: JSON.stringify({ request: { WidgetIds: r.widgetsIds, WidgetPageType: r.widgetPageType, LoadBundles: !0 } }), success: function (n) { i.html(n.Html) }, error: function (n) { console.log("An error has occured while fetching widgets data: " + n) } }) } }, ui = ri, fi = function (i) { var u, s = n()(".videoContainer"), f = n()(".playerVimeo"), k = document.getElementsByClassName("playerVimeo"), h = n()("#playerCedemo"), d = n()("#itemVideo"), e = n()("#vimeoVideos"), a = e.length ? JSON.parse(e.text()) : {}, g = n()(".itemVideoVimeo"), v = n()("#360wrapper"), y = n()("#Animationwrapper"), p = n()("#syteButton"), c = function () { [].forEach.call(k, function (n) { n.pause() }) }, w = function (n) { var t = n.closest(".prod-img-container"); return window.getComputedStyle(t) }, nt = function (n) { var i = 640, t; return n && (t = w(n), t.width !== "" && (i = parseInt(t.width))), i }, tt = function (n) { var i = 400, t; return n && (t = w(n), t.height !== "" && (i = parseInt(t.height))), i }, b = function (n) { var t = document.getElementById("playerVimeo" + n), i, r; t && (i = nt(t), r = tt(t), t.width = i, t.height = r) }, it = function () { var n = window.innerHeight > window.innerWidth ? window.innerHeight : window.innerWidth; return n >= 1920 ? "HDHIGH" : n >= 1280 ? "HDLOW" : n >= 960 ? "SDHIGH" : "SDLOW" }, r, o, l; d.on("click", function () { s.show(); f.parents(".videoVimeoContainer").hide(); v.hide(); y.hide() }); g.each(function (t) { n()(this).on("click", function () { b(t); f.parents(".videoVimeoContainer").hide(); n()("#playerVimeo" + t).parents(".videoVimeoContainer").show(); c(); s.hide(); v.hide(); y.hide(); p.hide() }) }); i.$eventContainer.on(t.thumbnailHovered, function () { h.length && u !== undefined && u.pause(); e.length && f !== undefined && c(); s.hide(); f.parents(".videoVimeoContainer").hide(); p.show() }).on(t.carouselSwiped, function () { h.length && u !== undefined && u.pause(); e.length && f !== undefined && c(); n()(".vjs-tech").css("z-index", "1") }); e.length && a.vimeoIds && (r = XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP"), a.vimeoIds.forEach(function (t, i) { var f, u = document.getElementById("playerVimeo" + i), e; b(i); ((f = n()("source", u).attr("src")) === null || f === void 0 ? void 0 : f.length) === 0 && (r.onload = function () { if (r.status >= 200 && r.status < 300) { var i = JSON.parse(r.response).Video.VideoUrl; sessionStorage.setItem("Vimeo" + t + "-VideoUrl", i); n()("source", u).attr("src", sessionStorage.getItem("Vimeo" + t + "-VideoUrl")); u.load() } }, e = it(), r.open("GET", "/servicegeneric/getvideo.aspx?videoid=" + t + "&videoFormat=" + e), r.send()); n()("source", u).attr("src", sessionStorage.getItem("Vimeo" + t + "-VideoUrl")); u.load() })); h.length && (o = document.createElement("script"), l = document.scripts[0], o.src = "//video.cedemo.com/p/clID/150/tpID/1/div/playerCedemo/html5/1/bg/FFFFFF/codeType/sku/autoplay/0/showControls/0/prefer/html5/endvideobehavior/rewind/showBigPlayButton/1/disableControls/1/?w=100%25&h=100%25&code=" + i.productId, o.onload = function () { u = new window.CDM.player.api("playerCedemo") }, l.parentNode.insertBefore(o, l)) }, ei = fi, oi = function (r) { var u = "360", e = n()(".videoContainer"), c = !!navigator.userAgent.match(/Trident.*rv\:11\./), o = document.createElement("script"), s = document.scripts[0], h, f; o.src = "/js/Common/plugin.easel.js"; s.parentNode.insertBefore(o, s); h = function (n) { return n.map(function (t, i) { return n[n.length - 1 - i] }) }; f = function () { var a = n()("#" + u + "data"), y = n()("#" + u + "data").data("type"), o, l, v; if (e.hide(), a.length) { n()("#" + u + "wrapper").addLoading(); o = n()("#" + u + "overlay"); o.on("click", function () { n()(this).fadeOut() }); c && o.hide(); var f, p = JSON.parse(a.text()), s = p["360images"].replace(/\|Dimension\|/gi, "products/680by680").trim(); s = s.split(","); s = h(s); l = document.getElementById(u + "Container"); v = function () { var c; if (l && l.getContext) { f = new createjs.Stage(l); f.enableMouseOver(!0); f.mouseMoveOutside = !1; createjs.Touch.enable(f); var v = [], i = 0, t = 0, r = s.length, p, h, e = new createjs.Shape; f.addChild(e); c = new createjs.Bitmap; f.addChild(c); var w = function () { var n = new Image; n.src = s[i] + "?imgopt=twic&twic=v1/resize=680"; n.onload = b; v[i] = n }, b = function () { i++; e.graphics.clear(); e.graphics.beginFill("#fff").drawRect(0, 0, f.canvas.width * i / r, f.canvas.height); e.graphics.endFill(); i === r ? k() : w() }, k = function () { n()("#" + u + "wrapper").removeLoading(); document.body.style.cursor = "none"; a(0); p = setInterval(function () { if (t === r - 1) { clearInterval(p); d(); return } a(1) }, 100) }, a = function (n) { t += n; t < 0 ? t = r - 1 : t > r - 1 && (t = 0); c.image = v[t] }, d = function () { f.onMouseOver = g; f.onMouseDown = nt; document.body.style.cursor = "auto"; o.animate({ opacity: "1" }, 500) }, g = function () { document.body.style.cursor = "pointer" }, nt = function (n) { h = n.rawX; f.onMouseMove = tt; f.onMouseUp = it; document.body.style.cursor = "grabbing" }, tt = function (n) { var i = n.rawX - h, r; y === "animation" && i < 0 && t == 0 || i > 0 && t == 47 || (r = Math.abs(i), r > 5 && (a(i / r), h = n.rawX)) }, it = function () { f.onMouseMove = null; f.onMouseUp = null; document.body.style.cursor = "grab" }, rt = function () { f.update() }; document.body.style.cursor = "progress"; w(); createjs.Ticker.addEventListener("tick", rt); createjs.Ticker.setFPS(48); createjs.Ticker.useRAF = !0 } }; v(); l.addEventListener("mousedown", function () { o.fadeOut() }); l.addEventListener("touchstart", function () { o.fadeOut() }); r.$eventContainer.on(t.thumbnailHovered, function () { i.isMobileDevice ? (n()("#360popin").modal({ method: "close", id: "360popin" }), n()("#Animationpopin").modal({ method: "close", id: "Animationpopin" })) : (n()("#Animationwrapper").hide(), n()("#360wrapper").hide()); e.hide() }) } else console.log("Error: data for this " + u + " are unavailable.") }; n()("#item360").on("click", function () { u = "360"; f(); i.isMobileDevice ? n()("#360wrapper").modal({ method: "open", type: "iceberg", id: "360popin", fullscreen: !0 }) : n()("#360wrapper").show() }); n()("#itemAnimation").on("click", function () { u = "Animation"; f(); i.isMobileDevice ? n()("#Animationwrapper").modal({ method: "open", type: "iceberg", id: "Animationpopin", fullscreen: !0 }) : n()("#Animationwrapper").show() }) }, si = oi, hi = function (u) { var h = {}, e = 0, c = u.get_media(r.image).length, v = i.imageUrlPrefix, o = n()("#zoomContainer"), y = n()(".pdp-zoom-prev"), p = n()(".pdp-zoom-next"), w = function (t) { o.find(".pdp-zoom-image").detach(); o === null || o === void 0 ? void 0 : o.prepend(h[t] || (h[t] = n()("<img>", { src: t, "class": "pdp-zoom-image", alt: "", "data-twic-bot": "resize=680" }))) }, l = function () { e = e === 0 ? e = c - 1 : e - 1; s(e) }, a = function () { e = e === c - 1 ? e = 0 : e + 1; s(e) }, s = function (n) { e = n; var t = u.get_media(r.image)[n].FileName; w(v + f(t) + "?imgopt=twic&twic=v1"); o.popin("open") }; u.$eventContainer.on(t.mainImageClicked, function (n, t) { s(t.index) }); y.on("click", l); p.on("click", a); n()(window).on("keydown", function (n) { o.parent().parent().hasClass("in") && (n.key === "ArrowLeft" ? l() : n.key === "ArrowRight" && a()) }) }, ci = hi, li = function (r, u) { var h = {}, a = p.xl, c = "LR-PDP-zoom-help", o = !1, v = i.imageUrlPrefix, e = n()("#largeZoomContainer"), s = n()("#carouselHelpMessage"), y = function (t) { e.find(".zoom_image").detach(); e.prepend(h[t] || (h[t] = n()("<img>", { src: t, "class": "zoom_image", alt: "", "data-twic-bot": "resize=680" }))); e.popin("open") }, l = function (n) { var t = v + f(n) + "?imgopt=twic&twic=v1"; y(t) }; r.$eventContainer.on(t.mainImageDoubleTapped, function (n, t) { l(t.src) }); e.on("popin.open", function () { o = !0; var t = n()(this).closest(".popin-container"); t.delay(50).animate({ scrollLeft: (a - window.innerWidth) / 2 }, { complete: function () { o = !1 } }) }).on("touchstart", "img", function (n) { return window.Utils.Common.isAppleDevice() && n.originalEvent && n.originalEvent.touches.length > 1 ? (n.preventDefault(), !1) : !o }); l(u); window.Utils.CookieManager.ReadCookie(c) === null && (s.show().addClass("in"), setTimeout(function () { s.removeClass("in"); setTimeout(function () { s.hide() }, 150) }, 2e3), window.Utils.CookieManager.CreateCookie(c, "", 1)) }, ai = li, h = undefined && undefined.__assign || function () { return h = Object.assign || function (n) { for (var t, r, i = 1, u = arguments.length; i < u; i++) { t = arguments[i]; for (r in t) Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]) } return n }, h.apply(this, arguments) }, vi = function () { var f = n()("#pdpEventContainer_" + i.productId), u = h(h({}, k(i.productId, f)), { isGiftCardOrECard: i.isGiftCard || i.isEGiftCard, defaultColorId: i.defaultColorId }), e = u.get_media(r.image)[0].AllowZoom; f.on(t.productReloaded, function (n, i) { Object.assign(u, k(i.ProductId, f)); f.trigger(t.productUpdated) }); if (i.isMobileDevice) { if (bt(u), e) u.$eventContainer.one(t.mainImageDoubleTapped, function (n, t) { ai(u, t.src) }) } else ii(u), pt(u), e && ci(u); (i.hasVideo || i.hasVideoVimeo) && ei(u); si(u); ni(u); ui(); dt(u); lt(u); n()("#pdpFlixmediaZone").length && n()(vt); i.defaultColorId && u.set_colorId(i.defaultColorId); f.on("pdp.variant1.selected", function (n, t) { u.set_colorId(t) }).on("pdp.article.selected", function (n, t) { u.set_colorId(t.Dimension1); u.set_sizeId(t.Dimension2) }).on("pdp.article.unselected", function () { u.unset_size() }).on("thumbnailColor.hovered", function (n, i) { u.$eventContainer.trigger(t.colorHovered, [{ colorId: i }]) }).on("thumbnailColor.left", function () { u.$eventContainer.trigger(t.colorUnhovered) }) }, yi = vi, pi = function () { var t = n()(".container.comparison").length > 0; t || yi() }; pi() }(), function (n, t) { "use strict"; n.UiPrice = UiBloc.extend({ init: function (n, i) { var e; this._super(n, i); var f = this, r = f.Model, u = r.productId; this.$colorPricePopin = t("#colorPricePopin"); this.$redPrice = t("#showRedPrice_" + u); this.$greenPrice = t("#showGreenPrice_" + u); this.$miniPrice = t("#showMiniPrice_" + u); this.$coloredPriceTag = t(".colored-price-tag"); this.$3xcb = t("#3xcb_" + u); this.$coloredPriceTag.on("click", function () { f.$colorPricePopin.popin("open") }); if (e = function (n) { r.isChildProduct || n.Products.forEach(function (n) { var i; t.each(r.productList, function (t, r) { if (r.ProductId === n.ProductId && r.DocumentId === n.DocumentId) return i = r, !1 }); i && (i.WebInfo.PriceDisplay = n.PriceDisplay, t.each(i.Variants, function (i, r) { t.each(r.Variants, function (i, r) { var u; t.each(n.Articles, function (n, t) { t.ItemOfferId === r.Article.ItemOfferId && (u = t) }); u && (r.Article.AvailabilityCode = u.AvailabilityCode, r.Article.AvailabilityPeriod = u.AvailabilityPeriod, r.Article.WebInfo.ArticlePriceDisplay = u.ArticlePriceDisplay) }) }), r.productList[0] = i) }) }, !r.isChildProduct) r.$eventContainer.on(pdpEvent.realTimePriceReady, function (n, t) { e(t) }) }, Update: function (n) { function g(n) { return n = n.replace(",", "."), parseFloat(n) } var r = this, l = r.Model, n = n === undefined ? !0 : n, pi = this.Model.$productContainer.find(".delivery"), wi = this.Model.$productContainer.find(".delay"), pt = this.Model.$deliveryInfo.find(".delivery-delay"), st = this.Model.$productContainer.find(".js--deliveryOrDelayMessage"), wt = this.Model.$productContainer.find(".js-delivery-picto"), bt = this.Model.$productContainer.find(".cost-from"), kt = this.Model.$deliveryInfo.find("#hrUnderDeliveryDelay"), si = this.Model.$deliveryInfo.find(".shop-available"), u = this.Model.productId, dt = this.Page.Blocs.Selector.$quantity.select, tt = t("#creditPriceInfo_" + u), v = t("#tagPriceLeftByArticle_" + u), k = t("#tagPriceLeftByProd_" + u), gt = t("#tagsPriceLeftA_" + u), ni = t("#tagsPriceLeftB_" + u), ti = t("#tagsPriceBottomA_" + u), ht = t("#tagsPriceBottomB_" + u), y = t("#tagDGCCRF_" + u), ct = t("#showCreditPrice_" + u), hi = t("#CreditPriceDetail_Rate_" + u), ci = t("#CreditPriceDetail_Price_" + u), lt = t("#panelchPayment_" + u), w = t("#creditPriceInfoCH_" + u), i = this.Page.GetArticle(), it = this.Model.siteName === siteName.LaRedouteForBusiness, r = this, li = function (i) { r.Model.$button.trigger("pdp.updateDelivery"); typeof i.IsBackOrdered != "undefined" && i.IsBackOrdered && (i.WebInfo.DeliveryDelayMessage = "<b>" + labels.MobileV3_PDP.StockAlert_ComingSoon + "<\/b>", n && r.Model.Mode !== "MOD_WISHLIST" && !t(".lr-button--preorder").length > 0 && r.Page.Blocs.backOrdered.show()); var u = !0; i.WebInfo.DeliveryDelayMessage == undefined || i.WebInfo.DeliveryDelayMessage === "" || i.WebInfo.DeliveryDelayMessage.indexOf("0h") != -1 || i.IsBackOrdered ? i.WebInfo.StockMessage != undefined && i.WebInfo.StockMessage !== "" ? (st.html(i.WebInfo.StockMessage), u = !1) : st.html("") : (st.html(i.WebInfo.DeliveryDelayMessage), u = !1); u ? wt.hide() : wt.show(); pt.show(); si.css("display") === "none" && kt.show() }, ai = function () { pt.hide(); kt.hide() }, rt, ut, at, fi, ei, vt, nt, s, oi, yt; if (i == null) { ai(); bt.show(); tt.hide(); w.hide(); lt.hide(); ct.hide(); dt.addClass(Utils.Enum.Status.Disabled); i = this.Page.GetVariant1(); var ii = [], ri = [], ui = []; i.Variants.forEach(function (n) { ii.push(n.Article.IsRedPrice === !0); ri.push(n.Article.IsMiniPrice === !0); ui.push(n.Article.IsGreenPrice === !0) }); rt = function (n, i) { t.inArray(!1, i) === -1 ? n.show() : n.hide() }; rt(this.$redPrice, ii); rt(this.$miniPrice, ri); rt(this.$greenPrice, ui); v.empty().hide() } else ut = function (n) { return typeof n != "undefined" && n === !0 ? !0 : !1 }, li(i), bt.hide(), ut(i.IsRedPage) ? this.$redPrice.show() : ut(i.IsMiniPrice) ? this.$miniPrice.show() : ut(i.IsGreenPage) ? this.$greenPrice.show() : (this.$redPrice.hide(), this.$greenPrice.hide(), this.$miniPrice.hide()), dt.removeClass(Utils.Enum.Status.Disabled), i.MonthlyPayment && i.MonthlyPayment != 0 && w.length > 0 && (w.html(w.data("text").replace("|PRICE|", i.MonthlyPayment)), lt.find(".panel-title").html(w.html()), w.show(), lt.show()), v.empty().hide(), i.WebInfo.EventTagImage !== "" && (i.WebInfo.EventTagImage.slice(0, 4) === "http" ? (at = t("<img>"), at.attr("src", i.WebInfo.EventTagImage), v.html(at)) : v.html(i.WebInfo.EventTagImage), v.show(), typeof v.data("productindex") != "undefined" && v.attr("data-cerberus", "txt_multiPdp_product" + v.data("productindex") + "_pictoCollection")), fi = r.display3XCB(), i.WebInfo.CreditPriceDisplay.ShowCreditPrice !== !0 || fi ? (tt.hide(), ct.hide()) : (r.hide3XCB(), tt.html(labels.MobileV3_PDP["PayInTimes" + i.WebInfo.CreditPriceDisplay.NumberOfInstallment]), tt.show(), i.WebInfo.CreditPriceDisplay.CreditRate != undefined && hi.text(i.WebInfo.CreditPriceDisplay.CreditRate.toString() + "%"), ci.text(i.WebInfo.CreditPriceDisplay.FormattedCreditFinalPrice), ct.show()); k.empty().hide(); gt.empty().hide(); ni.empty().hide(); ti.empty().hide(); ht.empty().hide(); y.empty().hide(); var b = "", a = "", h = "", c = "", o = "", f = "", e = "", vi = t.parseJSON(t("#hidTags_" + u).val()), yi = r.GetTagsArray(vi, this.Page.GetVariant1().Tags), d = i.VariantId; if (d || (d = i.Dimension1), l.isChildProduct || ((t("#pictoAreaDiv").length || f === "") && t("#pictoAreaDiv").remove(), (t("#pictureInformationDiv").length || e === "") && (t("#pictureInformationDiv").remove(), ei = t(".pdp-description-picture-info"), ei.find("span").show())), yi.forEach(function (n) { if ((n.DocumentId === undefined || n.DocumentId === i.DocumentId) && (!n.Dimension1 || n.Dimension1 == "" || !d || d == "" || n.Dimension1 == d) && (n.Dimension2VendorIds == null || n.Dimension2VendorIds.length == 0)) { var u = !1; n.Positions.forEach(function (i) { var p, s, v, w; u || (r.Model.displayTagFromPLP || i.Location !== "PDP" && i.Location !== "SHARED" || i.Position !== "Sticker_New") && (!r.Model.displayTagFromPLP || (i.Location !== "PLP" || i.Position !== "ImageOuterBottom") && (i.Location !== "SHARED" || i.Position !== "Sticker_New")) || (u = !0, b += n.TagType === "Image" ? t("<img>").attr("src", n.TagContent)[0].outerHTML : n.TagType === "ImageWithLink" ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : n.TagType === "TextWithLink" ? t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML : n.TagContent, typeof k.data("productindex") != "undefined" && k.attr("data-cerberus", "txt_multiPdp_product" + k.data("productindex") + "_stickerNew")); i.Location === "PDP" && i.Position === "PriceLeftA" && (n.TagType === "Image" ? a += t("<img>").attr("src", n.TagContent)[0].outerHTML : n.TagType === "ImageWithLink" ? (s = n.PopinContent, a += s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : n.Link ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : t("<span>").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML) : n.TagType === "TextWithLink" ? (s = n.PopinContent, a += n.Template ? s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : n.Link ? t("<a>").attr("class", "product-tag-title-" + n.Template + " product-tag-with-link").attr("href", n.Link).html(n.TagContent)[0].outerHTML : t("<span>").attr("class", "product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML) : a += n.TagContent); i.Location === "PDP" && i.Position === "PriceLeftB" && (n.TagType === "Image" ? h += t("<img>").attr("src", n.TagContent)[0].outerHTML : n.TagType === "ImageWithLink" ? (s = n.PopinContent, h += s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : n.Link ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : t("<span>").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML) : n.TagType === "TextWithLink" ? (s = n.PopinContent, h += n.Template ? n.Template == "LRAndMe" ? r.GenerateLRMOrPlusTag(l, n) : s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : n.Link ? t("<a>").attr("class", "product-tag-title-" + n.Template + " product-tag-with-link").attr("href", n.Link).html(n.TagContent)[0].outerHTML : t("<span>").attr("class", "product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML) : h += n.TagContent); i.Location === "PDP" && i.Position === "PriceBottomA" && (n.TagType === "Image" ? c += t("<img>").attr("src", n.TagContent)[0].outerHTML : n.TagType === "ImageWithLink" ? (s = n.PopinContent, c += s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : n.Link ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : t("<span>").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML) : n.TagType === "TextWithLink" ? (s = n.PopinContent, c += n.Template ? n.Template == "LRAndMe" ? r.GenerateLRMOrPlusTag(l, n) : s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : n.Link ? t("<a>").attr("class", "product-tag-title-" + n.Template + " product-tag-with-link").attr("href", n.Link).html(n.TagContent)[0].outerHTML : t("<span>").attr("class", "product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML) : c += n.TagContent); i.Location === "PDP" && i.Position === "PriceBottomB" && (n.TagType === "Image" ? o += t("<img>").attr("src", n.TagContent)[0].outerHTML : n.TagType === "ImageWithLink" ? (s = n.PopinContent, s && (o += r.BuildPopinContent(l, n)), o += s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : n.Link ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : t("<span>").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML) : n.TagType === "TextWithLink" ? (s = n.PopinContent, s && (o += r.BuildPopinContent(l, n)), o += n.Template ? s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : n.Link ? t("<a>").attr("class", "product-tag-title-" + n.Template + " product-tag-with-link").attr("href", n.Link).html(n.TagContent)[0].outerHTML : t("<span>").attr("class", "product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML) : o += n.TagContent); i.Location === "PDP" && i.Position === "PictoArea" && n.Dimension1 !== "" && n.Dimension1 !== undefined && (n.TagType === "Image" ? f += t("<img>").attr("src", n.TagContent)[0].outerHTML : n.TagType === "ImageWithLink" ? (s = n.PopinContent, s && (f += r.BuildPopinContent(l, n)), f += s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : n.Link ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : t("<span>").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML) : n.TagType === "TextWithLink" ? (s = n.PopinContent, s && (f += r.BuildPopinContent(l, n)), f += n.Template ? s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : n.Link ? t("<a>").attr("class", "product-tag-title-" + n.Template + " product-tag-with-link").attr("href", n.Link).html(n.TagContent)[0].outerHTML : t("<span>").attr("class", "product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML) : f += n.TagContent, f !== "" && (v = t(".pdp-description-picto"), p = t("<div>", { id: "pictoAreaDiv", html: f }), v.append(p).show(), p.find(".plugin-popin").popin())); i.Location === "PDP" && i.Position === "PictureInformation" && n.Dimension1 !== "" && n.Dimension1 !== undefined && (n.TagType === "Image" ? e += t("<img>").attr("src", n.TagContent)[0].outerHTML : n.TagType === "ImageWithLink" ? (s = n.PopinContent, s && (e += r.BuildPopinContent(l, n)), e += s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : n.Link ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML : t("<span>").append(t("<img>").attr("src", n.ImageUrl))[0].outerHTML) : n.TagType === "TextWithLink" ? (s = n.PopinContent, s && (e += r.BuildPopinContent(l, n)), e += n.Template ? s ? t("<span>").attr("id", "productTagPopin-" + n.Id).attr("class", "product-tag-with-link product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : n.Link ? t("<a>").attr("class", "product-tag-title-" + n.Template + " product-tag-with-link").attr("href", n.Link).html(n.TagContent)[0].outerHTML : t("<span>").attr("class", "product-tag-title-" + n.Template).html(n.TagContent)[0].outerHTML : t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML) : e += n.TagContent, e !== "" && (v = t(".pdp-description-picture-info"), v.length || (v = t("<div>", { "class": "product-tag-title pdp-description-picture-info" }), t("#mainProductDescription").after(v)), w = t("<div>", { id: "pictureInformationDiv", html: e }), v.find("span").hide(), v.append(w).show(), w.find(".plugin-popin").popin())); i.Location === "SHARED" && i.Position === "Sticker_DGCCRF" && (y += n.TagType === "Image" ? t("<img>").attr("src", n.TagContent).attr("data-cerberus", "area_pdp_stickerDgccrf1")[0].outerHTML : n.TagType === "ImageWithLink" ? t("<a>").attr("href", n.Link).append(t("<img>").attr("src", n.ImageUrl).attr("data-cerberus", "area_pdp_stickerDgccrf1"))[0].outerHTML : n.TagType === "TextWithLink" ? t("<a>").attr("href", n.Link).html(n.TagContent)[0].outerHTML : n.TagContent, n.Tooltips !== undefined && n.Tooltips !== null && n.Tooltips.length > 0 && (y.append(t("<div>", { id: "tagDGCCRF_trigger_" + n.ProductId, "class": "pdp-detail-dgccrf icon icon-tooltip" })), t("<div>", { id: "tagDGCCRF_tooltip_" + n.ProductId, "class": "tooltip", "data-style": "small", "data-position": "top", "data-show-close": "false", "data-trigger": "#tagDGCCRF_trigger_" + n.ProductId, html: n.Tooltips[0].Text }).appendTo(y).tooltip()), y.show()) }) } }), b !== "" && k.html(b).show(), a !== "" && gt.html(a).show(), h !== "" && ni.html(h).show(), c !== "" && ti.html(c).show(), o !== "" && (ht.html(o).show(), ht.find(".plugin-popin").popin()), vt = l.isMobileDevice ? "iceberg" : "panel", t("#modalLRAndMe").length > 0) { t("#LRAndMe-link").on("click", function () { t("#modalLRAndMe").modal({ method: "open", type: vt, id: "LRAndMe_Panel", gradientOnScroll: !0 }) }); t("#icon-lrandme").on("click", function () { t("#modalLRAndMe").modal({ method: "open", type: vt, id: "LRAndMe_Panel", gradientOnScroll: !0 }) }) } var ft = t("#showSalePriceAfter_" + this.Model.productId), et = t("#ecoPartArea_" + this.Model.productId), ot = t("#showDiscount_" + this.Model.productId), p = t("#showSalePriceBefore_" + this.Model.productId); i.WebInfo === undefined ? (nt = 0, oi = this.Page.GetVariant1().Variants, t(oi).each(function () { if (this.Article.AvailabilityCode !== "E") { var n = parseInt(this.Article.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithChargesWithoutCurrency); nt == 0 ? (nt = n, s = this.Article) : nt > n && (nt = n, s = this.Article) } }), s !== undefined && (it ? (ft.html(s.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterExVatWithCharges + " " + labels.MobileV3_PDP.WithoutTaxes), et.html(s.WebInfo.ArticlePriceDisplay.FormattedD3EFeeExVat + " " + labels.MobileV3_PDP.WithoutTaxes)) : (ft.html(s.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithCharges), et.html(s.WebInfo.ArticlePriceDisplay.FormattedD3EFee)), ot.html("").hide(), g(s.WebInfo.ArticlePriceDisplay.FormattedSalePriceBeforeWithChargesWithoutCurrency) > g(s.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithChargesWithoutCurrency) ? (it ? p.html(s.WebInfo.ArticlePriceDisplay.FormattedSalePriceBeforeExVatWithCharges + " " + labels.MobileV3_PDP.WithoutTaxes) : p.html(s.WebInfo.ArticlePriceDisplay.FormattedSalePriceBeforeWithCharges), s.DiscountPercentage != null && ot.html("-" + s.DiscountPercentage.toString() + "%").show(), p.show()) : p.hide())) : (yt = i.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterExVatWithChargesWithoutCurrency, it ? (ft.html(i.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterExVatWithCharges + " " + labels.MobileV3_PDP.WithoutTaxes), et.html(i.WebInfo.ArticlePriceDisplay.FormattedD3EFeeExVat + " " + labels.MobileV3_PDP.WithoutTaxes)) : (ft.html(i.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithCharges), et.html(i.WebInfo.ArticlePriceDisplay.FormattedD3EFee), yt = i.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithChargesWithoutCurrency), l.isChildProduct || t(".klarnaPlacement").attr("data-purchase-amount", parseInt(g(yt) * 100)), window.KlarnaOnsiteService = window.KlarnaOnsiteService || [], window.KlarnaOnsiteService.push({ eventName: "refresh-placements" }), ot.html("").hide(), g(i.WebInfo.ArticlePriceDisplay.FormattedSalePriceBeforeWithChargesWithoutCurrency) > g(i.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithChargesWithoutCurrency) ? (it ? p.html(i.WebInfo.ArticlePriceDisplay.FormattedSalePriceBeforeExVatWithCharges + " " + labels.MobileV3_PDP.WithoutTaxes) : p.html(i.WebInfo.ArticlePriceDisplay.FormattedSalePriceBeforeWithCharges), i.DiscountPercentage && ot.html("-" + i.DiscountPercentage.toString() + "%").show(), p.show()) : p.hide()); this.Model.$button.trigger(pdpEvent.priceUpdate) }, BuildPopinContent: function (n, i) { var u = JSON.parse(t("#pdpData").text()), r = '<div class="plugin-popin popin product-tag-popin" data-trigger="#productTagPopin-' + i.Id + '"><div class="popin-title">' + i.TagContent + '<\/div><div class="product-tag-popin-content">' + i.PopinContent + "<\/div>"; return i.Link && i.Link != "" && (r += '<a href="' + i.Link + '" class="lr-button lr-button-secondary">' + u.labelProductTagSeeMore + "<\/a>"), r + "<\/div>" }, GenerateLRMOrPlusTag: function (n, i) { var r = "lrText--semiBold", u = "lr-icon", f = "", e = "", o; return n.isLRPlusActivated ? (n.isLRAndMe ? f = "padding: 20px 0; cursor:auto" : (r += " stickerLRPlus", e = "LRAndMe-link"), u += " stickerLRPlus-icon lr-icon-lrplus-color") : (n.isLRAndMe ? f = "padding: 20px 0; cursor:auto" : (r += " stickerLRAndMe", e = "LRAndMe-link"), u += " stickerLRAndMe-icon lr-icon-lrandme-color"), o = t("<span>").attr("class", u), t("<span>").attr("id", e).attr("class", r).attr("style", f).html(o[0].outerHTML + i.TagContent)[0].outerHTML }, GetTagsArray: function (n, i) { var r = []; return n && n.length && t.each(n, function () { r.push(this) }), i && i.length && t.each(i, function () { var n = this, i = this.Positions; t.each(r, function () { var u = this, n; t.each(i, function () { var i = this; n = t.grep(u.Positions, function (n) { return n.Location == i.Location && n.Position == i.Position }) }); n && n.length && (r = t.grep(r, function (n) { return n.Id != u.Id })) }); r.push(n) }), r }, display3XCB: function () { return this.Model.article.WebInfo.Display3XBlock === !0 ? this.$3xcb.show() : this.$3xcb.hide(), this.Model.article.WebInfo.Display3XBlock }, hide3XCB: function () { this.$3xcb.hide() } }) }(window, window.jQuery); UiSelector = UiBloc.extend({ init: function (n, t) { var e, v, y, o, w; this._super(n, t); var ut = n.Model.imageUrlPrefix, i = this, n = i.Page, u = i.Model, b = !n.isMobileDevice && !u.isChildProduct, r = u.productId, s, h; i.fromSearch = document.referrer.indexOf("/psrch/psrch") > -1 || u.isRedirectedFromSearch; i.lastSearch = window.Utils.StorageManager.readLocalStorageValue(window.Utils.Enum.StorageName.LAST_SEARCH_ID); e = n.isMobileDevice ? "iceberg" : "panel"; i.productId = r; var f = u.$filterColor, tt = $("#filterColorNumber_" + r), c = f.find(".color-item"), l = $("#filterColorLabel_" + r), a = $("#filterColorThumb_" + r); i.$filterSizeContainer = $("#filterSizeContainer_" + r); var it = $("<img>"), k = function (n) { n.on({ mouseenter: function () { var n = $(this), t = n.find("img"), i; h = a.attr("src"); i = t.attr("data-twic-src"); a.attr("data-twic-src", i); s = l.text(); l.text(n.attr("title")); it.attr("data-twic-src", t.attr("data-twic-src")); u.$eventContainer.trigger("thumbnailColor.hovered", [n.val()]) }, mouseleave: function () { d(); u.$eventContainer.trigger("thumbnailColor.left") } }) }, d = function () { a.attr("src", h); l.text(s) }; i.ReloadSelectVariant1 = function () { var t = f.find("button.selected").data("color"), r = !1, e = f.find("button"), o = $("<button>", { "class": "pdp-filter-item color-item" }), n = u.productList.filter(function (n) { return n.ProductId == u.productId }); n.length > 0 && (n = n[0]); e.remove(); u.listVariant.forEach(function (u) { for (var h = 0, e, s, l, c, a; i.Page.Blocs.ProductFilters.availableColors[h].DisplayName !== u.InternalName;)h++; e = i.Page.Blocs.ProductFilters.availableColors[h]; s = o.clone(); s.attr({ title: u.InternalName, value: u.VariantId, "data-color": e.DisplayName }); e.ThumbnailUrl !== "" ? (s.append($("<span>", { "class": "lr-tick" })), s.append($("<div>", { "class": "pdp-filter-thumbnail" }).append($("<img>", { src: e.ThumbnailUrl + "?imgopt=twic&twic=1/resize=64", alt: u.InternalName, "data-twic-bot": "none" }))), l = JSON.parse($("#pdpData").text()), c = "", n.WebInfo.PriceDisplay.SalePriceBeforeWithCharges != 0 && n.WebInfo.PriceDisplay.SalePriceBeforeWithCharges > n.WebInfo.PriceDisplay.SalePriceAfterWithCharges && (c = "<del>" + n.WebInfo.PriceDisplay.FormattedSalePriceBeforeWithCharges + "<\/del>"), a = '<span class="pdp-filter-item-color--name">' + e.DisplayName + "<\/span><div>" + c + '<span class="product-price-from cost-from">' + l.startingPrice + '<\/span><span class="product-price">' + n.WebInfo.PriceDisplay.FormattedSalePriceAfterWithCharges + "<\/span><\/div>", s.append($("<div>", { "class": "pdp-filter-item-color" }).append(a))) : (s.append($("<div>", { "class": "pdp-filter-color" })), e.CssClass !== "" && s.find(".pdp-filter-color").addClass(e.CssClass), e.BackgroundColour !== "" && s.find(".pdp-filter-color").css("background", e.BackgroundColour)); e.isSelected === !0 && s.addClass("selected").attr("aria-selected", "true"); f.find(".color-selector").append(s); r = t === e.DisplayName }); i.isMonoColor = u.listVariant.length <= 1; i.isMonoColor ? i.$filterColorContainer.addDisabled() : i.$filterColorContainer.removeDisabled(); f.find("button.selected").length === 0 && (r === !1 ? f.find("button").first().addClass("selected").attr("aria-selected", "true") : $('[data-color="' + t + '"]').trigger("click")); b && (c = f.find(".color-item"), k(c)); tt.text(u.listVariant.length - 1); i.ReloadSelectVariant2() }; i.SelectVariant1 = function (n, t) { var r, e; t = t === undefined ? !0 : t; r = f.find("button[value=" + n + "]"); this.currentVariant1 = n; i.Model.Dim1 = n; f.find("button").removeClass("selected").attr("aria-selected", "false"); n == -1 ? (this.setArticle(), this.Page.Blocs.Price.Update()) : (r.addClass("selected").attr("aria-selected", "true"), e = this.ReloadSelectVariant2(), this.setArticle(), this.sizeWasChoosen = !1, this.Page.Blocs.Thumbnail !== undefined && t && this.Page.Blocs.Thumbnail.Update(), this.Page.Blocs.Price.Update(t), e == !1 ? u.set_selector_status(!1) : u.set_selector_status(!0), this.UpdateATBButtonStatus(), f.find("button").removeClass("selected").attr("aria-selected", "false"), r.addClass("selected").attr("aria-selected", "true"), h = r.find("img").attr("src"), s = r.attr("title"), d()); this.closeVariant1(); u.$eventContainer.trigger(window.pdpEvent.selectVariant1, [n]); $("#lr-hidden-syte-infos").length && ($("#lr-hidden-syte-infos").attr("data-colorid", n), this.Model.article != undefined && ($("#lr-hidden-syte-infos").attr("data-colorname", this.Model.article.ColorName), $("#lr-hidden-syte-infos").attr("data-itemofferid", this.Model.article.ItemOfferId))) }; b && k(c); v = $("#dataSelector_" + i.productId).text(); y = $("#dataComparator").text(); $("#dataSelector_" + i.productId).length > 0 && v !== "" && $.extend(this, JSON.parse(v)); $("#dataComparator").length > 0 && y !== "" && $.extend(this, JSON.parse(y)); this.$customizableContainer = $("#customisable_" + i.productId); this.$filterColor = $("#filterColor_" + i.productId); this.$filterColorContainer = $("#filterColorContainer_" + i.productId); this.$filterQuantity = $("#filterQuantity_" + i.productId); this.$filterValue = $(".filter-value"); this.$pdpFilterVariant = $(".pdp-filter-variant-" + i.productId); this.$pdpFilterVariantContainer = $(".pdp-filter-variant-container"); this.$pdpFilterVariantContainerId = $(".pdp-filter-variant-selector"); this.$quantity = { select: $("#quantitySelect_" + i.productId), selected: $("#quantitySelected_" + i.productId), button: this.$filterQuantity.find(".quantity-select-button"), buttonSelected: this.$filterQuantity.find(".quantity-select-button-selected") }; $(function () { var n, t, r; $("#quantitySelect_" + i.productId).attr("tabindex", "0"); n = $("#veesualContainer"); t = $(n).attr("data-product-id"); n.length != 0 && t == i.productId && (r = $("#filterColor_" + i.productId).find(".color-selector").find('button[aria-selected="true"]').attr("value"), $(n).attr("data-current-colour", r)) }); var p = function () { i.Model.$eventContainer.trigger("pdp.attr.open") }, rt = function (n) { i.qty = u.quantity = $(n).val(); i.$quantity.selected.text(i.qty); $(i.$quantity.buttonSelected).removeClass("quantity-select-button-selected"); $(i.$quantity.buttonSelected).find(".lr-tick").remove(); $(n).addClass("quantity-select-button-selected"); $(n).prepend($("<div>", { "class": "lr-tick" })); i.$quantity.buttonSelected = $(n) }, g = function () { return $("#filterColor_" + u.ProductID + " .pdp-filter-item.color-item").length }, nt = function () { return $("#filterSize_" + i.productId + " .pdp-filter-item.size-item").length }; $("#filterColorContainer_" + r).on("click", function (n) { g <= 1 || (n.preventDefault(), $("#filterColor_" + r).modal({ method: "open", type: e, title: $("#filterColor_" + r).data("label"), id: $("#filterColor_" + r).attr("id") + "_Panel", classList: "pdp-filter-popin", gradientOnScroll: !0, source: $("body") })) }); $("#filterColorContainer_" + r).on("keydown", function (n) { if (!(g <= 1) && n.key !== "Tab") { n.preventDefault(); $("#filterColor_" + r).modal({ method: "open", type: e, title: $("#filterColor_" + r).data("label"), id: $("#filterColor_" + r).attr("id") + "_Panel", classList: "pdp-filter-popin", gradientOnScroll: !0, source: $("body") }); var t = "#" + $("#filterColor_" + r).attr("id") + "_Panel"; setTimeout(function () { $(t).find("button").first().trigger("focus") }, 400) } }); this.isMonoColor ? this.$filterColorContainer.addDisabled() : this.$filterColor.on(popinEvent.open, p).removeDisabled(); $("#filterSizeContainer_" + r).on("click", function () { nt() <= 1 || $("#filterSize_" + r).modal({ method: "open", type: e, title: $("#filterSize_" + r).data("label"), id: $("#filterSize_" + r).attr("id") + "_Panel", classList: "pdp-filter-popin", gradientOnScroll: !0, source: $("body") }) }); $("#filterSizeContainer_" + r).on("keydown", function () { if (!(nt() <= 1) && event.key !== "Tab") { $("#filterSize_" + r).modal({ method: "open", type: e, title: $("#filterSize_" + r).data("label"), id: $("#filterSize_" + r).attr("id") + "_Panel", classList: "pdp-filter-popin", gradientOnScroll: !0, source: $("body") }); var n = "#" + $("#filterSize_" + r).attr("id") + "_Panel"; setTimeout(function () { $(n).find("button").first().trigger("focus") }, 400) } }); this.Model.$filterSize.on(popinEvent.open, p); this.$pdpFilterVariantContainerId.on("click", function () { var n = $(this).attr("data-filter"); $("#filterVariant_" + n).modal({ method: "open", type: e, title: $("#filterVariant_" + n).attr("data-label"), id: "filterVariant_" + n + "_Panel", classList: "pdp-filter-popin", gradientOnScroll: !0, source: $("body") }).on(popinEvent.open, p); $("#filterVariant_" + n).find(".pdp-filter-popin-title").remove() }); this.$quantity.buttonSelected.length > 0 ? this.UpdateQuantity(this.$quantity.buttonSelected.val()) : this.qty = 1; this.$quantity.select.on("click", function () { $(this).hasClass("disabled") || $("#filterQuantity_" + i.productId).modal({ method: "open", type: e, classList: "pdp-filter-popin", title: $("#filterQuantity_" + i.productId).data("label"), id: $("#filterQuantity_" + i.productId).attr("id") + "_Panel", source: $("body") }) }); this.$quantity.select.on("keydown", function (n) { if (n.key != "Tab" && !$(this).hasClass("disabled")) { $("#filterQuantity_" + i.productId).modal({ method: "open", type: e, classList: "pdp-filter-popin", title: $("#filterQuantity_" + i.productId).data("label"), id: $("#filterQuantity_" + i.productId).attr("id") + "_Panel", source: $("body") }); var t = "#" + $("#filterQuantity_" + i.productId).attr("id") + "_Panel"; setTimeout(function () { $(t).find("button").first().trigger("focus") }, 400) } }); this.$quantity.button.on("click", function () { rt(this); $("#filterQuantity_" + i.productId + "_Panel").modal({ method: "close", id: "filterQuantity_" + i.productId + "_Panel" }) }); this.$filterColor.on("click", "button", function () { i.SelectVariant1($(this).val()); $("#veesualContainer").length != 0 && $("#veesualContainer").attr("data-current-colour", $(this).val()) }); this.Model.$filterSize.on("click", "button", function () { i.selectVariant2Callback(this) }); if (this.hasCustomizable()) { o = "#Personalisation_" + this.productId; this.applyCustomizableValidator(); this.customizableBV = this.$customizableContainer.data("bootstrapValidator"); $(o).on("keyup blur", function () { i.Model.set_personalization_status(i.customizableBV.isValid()) }); w = Utils.UrlManager.getUrlParameter("pText"); this.Model.personalisationText ? $(o).val(this.Model.personalisationText) : w && $(o).val(w) } $("iframe.my-redoute").iFrameResize({ enablePublicMethod: !0, autoResize: !1, heightCalculationMethod: "max" }) }, GetIdVariant1: function () { return this.Model.$filterColor.find("button.selected").val() }, GetIdVariant2: function () { return this.Model.$filterSize.find("button.selected").val() }, GetQuantity: function () { return this.qty }, GetPersonalisation: function () { return $("#Personalisation_" + this.productId).val() }, ReloadSelectVariant2: function () { var t = this, h = t.fromSearch && t.lastSearch, e = !1, n = $("#filterSize_" + this.productId), r = n.find("button.selected").length > 0 ? n.find("button.selected").val() : "default", o = n.find("button.selected").attr("title"), u = $("#filterSizeLabel_" + this.productId), s, c, i, f; return n.find("button").remove(), s = function (n) { var i = ("" + t.lastSearch).trim().toLowerCase(), r = " " + n; return i.indexOf(r) > -1 ? ["", " "].indexOf(i.charAt(i.indexOf(r) + r.length)) > -1 : !1 }, $.each(this.Page.GetVariant1().Variants, function (i, r) { var v = r.DisplayName || r.InternalName, o = $("<button>", { "class": "pdp-filter-item size-item", "data-cerberus": "pdpButtonSize_" + r.VariantId, "data-title": v, title: v.toLowerCase(), value: r.VariantId }), k = v, c = !1, a = $("#syteButton").length > 0, l, u, d, b, nt, tt; if (r.Article != null && r.Article.AvailabilityCode == "E" ? (n.hasClass("fake-dropdown-choices") === !0 && n.hasClass("mpdp-filter-choices") === !1 && (k += " - " + labels.MobileV3_PDP.OutOfStock), a ? o.attr("disabled", "disabled") : o.addDisabled().attr("disabled", "disabled"), c = !0) : !t.Model.isChildProduct && h && !e && s(o.attr("title")) && (e = !0, setTimeout(function () { t.SelectVariant2(o.attr("value"), !1) }, 500)), l = ["pdp-filter-size", "pdp-filter-item-content"], (t.Page.IsGiftCard || t.Page.IsEGiftCard) && l.push("pdp-filter-size-gift-card"), l.push("pdp-filter-size-priced"), t.Page.isMobileDevice && c && a && l.push("syte_button_article"), u = '<div class="' + l.join(" ") + '"><span class="lr-tick"><\/span>', d = c ? "pdp-filter-no-price" : "", u += '<div class="' + d + '">', u += '<span class="pdp-filter-size-value' + (c && a ? " disabled" : "") + '">' + k + "<\/span>", !t.Page.IsGiftCard && !t.Page.IsEGiftCard) { var f = r.Article.WebInfo.ArticlePriceDisplay, y = parseFloat(f.FormattedSalePriceBeforeWithChargesWithoutCurrency), p = parseFloat(f.FormattedSalePriceAfterWithChargesWithoutCurrency), w = f.FormattedSalePriceBeforeWithCharges, g = f.FormattedSalePriceAfterWithCharges; virtualSite === "laredouteforbusiness" && (b = labels.MobileV3_PDP.WithoutTaxes, y = parseFloat(f.FormattedSalePriceBeforeExVatWithChargesWithoutCurrency), p = parseFloat(f.FormattedSalePriceAfterExVatWithChargesWithoutCurrency), w = f.FormattedSalePriceBeforeExVatWithCharges + " " + b, g = f.FormattedSalePriceAfterExVatWithCharges + " " + b); typeof data_pc != "undefined" ? (nt = 'data-pc="' + data_pc + '"', u += '<span class="pdp-filter-price-value" ' + nt + ">") : u += '<span class="pdp-filter-price-value">'; y > p && (tt = r.Article.DiscountPercentage, u += '<span hidden aria-hidden="true" data-percentage="' + tt + '"><\/span>'); c ? u += a ? '<button class="syte_button syte_button_article"><div class="syte_buttonImageContainer"><span class="lr-icon lr-icon-syte-search"><\/span><\/div><span class="syte_buttonLabel" >' + labels.MobileV3_Common.Opensytebutton + "<\/span><\/button>" : "&mdash;" : (y > p && (u += typeof data_pc != "undefined" ? '<del class="pdp-filter-price-delete-value" data-pc="' + data_pc + '">' + w + "<\/del>" : '<del class="pdp-filter-price-delete-value">' + w + "<\/del>"), u += '<span class="priceNow">' + g + "<\/span>"); u += "<\/span>" } u += "<\/div><\/div>"; o.append(u); n.append(o) }), n.find("button").length > 1 ? (this.isMonoSize = !1, c = 0) : this.isMonoSize = !0, this.Model.$filterSize.find("button").length === 1 ? (this.$filterSizeContainer.find(".pdp-filter-label").find(".lr-arrow").hide(), this.$filterSizeContainer.addClass("disabled")) : (this.$filterSizeContainer.find(".pdp-filter-label").find(".lr-arrow").show(), this.$filterSizeContainer.removeClass("disabled")), i = n.find('button:not(.disabled):not([disabled="disabled"])[value="' + r + '"]'), i.length != 0 ? (i = i.first(), r = "OK", o !== i.attr("title") ? (f = n.find('button:not(.disabled)[title="' + o + '"]'), f.addClass("selected").attr("aria-selected", "true"), u.text(f.find(".pdp-filter-size-value").text())) : (i.addClass("selected").attr("aria-selected", "true"), u.text(i.find(".pdp-filter-size-value").text())), n.hasClass("js--childSizeFilter") || $(".klarnaPlacement").length && $(".klarnaPlacement").show()) : (i = n.find("button:not(.disabled)"), n.find("button").length == 1 ? (i.addClass("selected").attr("aria-selected", "true"), r = "OK", u.text(i.find(".pdp-filter-size-value").text())) : (r = "default", u.text(""), this.Model.$eventContainer.trigger(pdpEvent.unselectVariant2), this.sizeWasChoosen && labels.MobileV3_PDP.SizeUnavailableForThisColor !== "" && (this.$tooltipNoSize === undefined && (this.$tooltipNoSize = $("<div>", { "class": "tooltip tooltip-info", html: labels.MobileV3_PDP.SizeUnavailableForThisColor, "data-style": "small", "data-position": "top", "data-show-close": "false", "data-temp": "true", "data-width-restriction": "true" }).appendTo(this.Page.Blocs.Selector.$filterSizeContainer)), this.$tooltipNoSize.tooltip("open")))), r !== "default" }, SelectVariant2: function (n, t) { this.sizeWasChoosen = !0; t = t === undefined ? !0 : t; var i = $("#filterSize_" + this.productId), r = $("#filterSizeLabel_" + this.productId); this.currentVariant2 = n; i.find("button").removeClass("selected").attr("aria-selected", "false"); n == -1 ? (this.setArticle(), this.Page.Blocs.Price.Update(), this.UpdateATBButtonStatus()) : (i.find("button[value=" + n + "]").addClass("selected").attr("aria-selected", "true"), r.text(i.find("button[value=" + n + "]").find(".pdp-filter-size-value").text()), this.$filterSizeContainer.find(".pdp-filter-label").removeClass("warning"), this.Model.isGiftCard || this.Model.isEGiftCard ? i.find(".pdp-filter-popin-title").html(labels.MobileV3_PDP.ChooseAmount) : i.find(".pdp-filter-popin-title").html(labels.MobileV3_PDP.ChooseSize), this.setArticle(), this.UpdateATBButtonStatus(), this.UpdateDeliveryLinkStatus(), this.Page.Blocs.Price.Update(t)); this.closeVariant2(); $("#lr-hidden-syte-infos").length && ($("#lr-hidden-syte-infos").attr("data-colorid", n), this.Model.article != undefined && ($("#lr-hidden-syte-infos").attr("data-colorname", this.Model.article.ColorName), $("#lr-hidden-syte-infos").attr("data-itemofferid", this.Model.article.ItemOfferId))); i.hasClass("js--childSizeFilter") || $(".klarnaPlacement").length && $(".klarnaPlacement").show() }, selectVariant2Callback: function (n) { this.SelectVariant2($(n).val()) }, UpdateATBButtonStatus: function () { this.Model.$button.trigger("pdp.updateATB"); this.hasCustomizable() && this.Model.set_personalization_status(this.customizableBV.isValid()); this.GetIdVariant1() == undefined || this.GetIdVariant2() == undefined ? this.Model.set_selector_status(!1) : this.Model.article !== null && this.Model.article.IsBackOrdered && this.Model.Mode !== "MOD_WISHLIST" && !$(".lr-button--preorder").length > 0 ? (this.Model.set_selector_status(!1), this.Page.Blocs.backOrdered !== undefined && this.Page.Blocs.backOrdered.show()) : this.Model.set_selector_status(!0) }, UpdateDeliveryLinkStatus: function () { var n = this.Page, t = this.Model.$productContainer.find(".open-delivery-details"), i = this.Model.isMultiPDP; n.GetVariant1() && n.GetVariant2() ? (i && t.show(), (n.isSiteUK() || n.isSiteRU()) && (i && t.show().addClass("opened"), this.Model.$deliveryInfo.show())) : i && t.hide() }, UpdateQuantity: function (n) { this.qty = this.Model.quantity = n; this.$quantity.selected.text(this.qty) }, closeVariant1: function () { this.isMonoColor || this.$filterColor.modal({ method: "close", id: this.$filterColor.attr("id") + "_Panel" }) }, closeVariant2: function () { this.isMonoSize || this.Model.$filterSize.modal({ method: "close", id: this.Model.$filterSize.attr("id") + "_Panel" }); this.Model.$productContainer.trigger("pdp.closeVariant2") }, applyCustomizableValidator: function () { ($.fn.bootstrapValidator.validators.personalisationRegex == null || $.fn.bootstrapValidator.validators.personalisationRegex === undefined) && ($.fn.bootstrapValidator.validators.personalisationRegex = { validate: function (n, t, i) { var r = new RegExp(i.regexp, "gm"); return t.val() !== undefined && t.val() !== null && t.val().match(r) ? !1 : !0 } }); this.$customizableContainer.bootstrapValidator({ trigger: "blur keyup", fields: { Personalisation: { message: labels.MobileV3_PDP.NoCustomTextError, validators: { notEmpty: {}, personalisationRegex: { regexp: this.textCustomizableRegex, message: labels.MobileV3_PDP.GiftCardFormatError } } } }, feedbackIcons: {} }) }, hasCustomizable: function () { return this.$customizableContainer.length > 0 ? !0 : !1 }, setArticle: function () { return this.Model.article = this.Page.GetArticle(), this.Model.tags = this.Page.GetTags(), this.Model.article !== null ? (this.Model.$eventContainer.trigger(window.pdpEvent.articleSelected, [this.Model.article]), !0) : (this.Model.$button.trigger(window.pdpEvent.articleUnselected), !1) } }), function (n, t) { "use strict"; n.pdpServiceEvent = { otherVendorsRequested: "service.otherVendors.requested", otherVendorsAnswered: "service.otherVendors.answered", otherVendorsSucceeded: "service.otherVendors.succeeded", otherVendorsFailed: "service.otherVendors.failed", realTimePriceRequested: "service.realTimePrice.requested", realTimePriceAnswered: "service.realTimePrice.answered", realTimePriceSucceeded: "service.realTimePrice.succeeded", realTimePriceFailed: "service.realTimePrice.failed", reviewsRequested: "service.reviews.requested", reviewsAnswered: "service.reviews.answered", reviewsSucceeded: "service.reviews.succeeded", reviewsFailed: "service.reviews.failed", reviewUsefullnessVoteRequested: "service.reviewUsefullnessVote.requested", reviewUsefullnessVoteAnswered: "service.reviewUsefullnessVote.answered", reviewUsefullnessVoteSucceeded: "service.reviewUsefullnessVote.succeeded", reviewUsefullnessVoteFailed: "service.reviewUsefullnessVote.failed", reviewInappropriateVoteRequested: "service.reviewInappropriateVote.requested", reviewInappropriateVoteAnswered: "service.reviewInappropriateVote.answered", reviewInappropriateVoteSucceeded: "service.reviewInappropriateVote.succeeded", reviewInappropriateVoteFailed: "service.reviewInappropriateVote.failed", reviewTranslationRequested: "service.reviewTranslationRequested", reviewTranslationAnswered: "service.reviewTranslationAnswered", reviewTranslationSucceeded: "service.reviewTranslationSucceeded", reviewTranslationFailed: "service.reviewTranslationFailed", reviewsRatingDistributionRequested: "service.reviewsRatingDistributionRequested", reviewsRatingDistributionAnswered: "service.reviewsRatingDistributionAnswered", reviewsRatingDistributionSucceeded: "service.reviewsRatingDistributionSucceeded", reviewsRatingDistributionFailed: "service.reviewsRatingDistributionFailed" }; n.ServicesPDP = n.Services.extend({ init: function (i, r) { this._super(i, r); var f = this, u = r.Model, e = function (n) { if (u.article !== undefined) { var f = new URL(window.location.href), i = new URLSearchParams(f.search), r = ""; return i.has("vendorId") && (r = "&vendorId=" + i.get("vendorId")), t.ajax({ async: !0, cache: !1, url: "/productdetails/vendorslist.aspx?prodid=" + u.productId + "&docid=" + (u.article.DocumentId || n.documentId) + r, type: "GET", data: { dim1: u.article.Dimension1, dim2: u.article.Dimension2, prescode: u.article.PresCode, quantity: u.quantity } }) } return !1 }, o = function () { var n = u.productList[0], i = { request: { Products: [{ ProductId: n.ProductId, DocumentId: n.DocumentId, Articles: n.Variants.map(function (n) { return n.Variants.map(function (n) { return { ItemOfferId: n.Article.ItemOfferId } }) }) }] } }; return t.ajax({ async: !0, cache: !1, type: "POST", dataType: "json", contentType: "application/json; charset=utf-8", url: "/ServiceProductNoSession/GetProductAvailability", data: JSON.stringify(i) }) }, s = function () { var n = "/serviceproductnosession/GetProductReviews.aspx?loadLocaleFilterOnly=1&productId=" + r.Model.ProductID; return u.selectedSortField && (n = n + "&sortField=" + u.selectedSortField + "&sortDir=" + u.selectedSortDir), u.selectedRatingFilter && u.selectedRatingFilter !== "all" && (n = n + "&ratingFilter=" + u.selectedRatingFilter), u.selectedLanguageFilter && u.selectedLanguageFilter !== "all" && (n = n + "&localeFilter=" + u.selectedLanguageFilter + "*"), t.ajax({ url: n + "&offset=" + u.offset, cache: !1, type: "GET" }) }, h = function (n) { var i = "/serviceproductnosession/GetProductReviewsRatingDistribution.aspx?productId=" + r.Model.ProductID; return t.ajax({ url: i + "&type=" + n.type, cache: !1, type: "GET" }) }, c = function (n) { var i = { FeedbackType: "helpfulness", ContentId: n.reviewId, ContentType: "review", VoteType: n.voteType, ReviewType: "Product" }; return t.ajax({ url: "/ServiceProductNoSession/SubmitReviewFeedbackHelpful.aspx", cache: !1, type: "POST", data: i }) }, l = function (n) { var i = { ContentId: n.reviewId, ContentType: "review", ReviewType: "Product" }; return t.ajax({ url: "/ServiceProductNoSession/SubmitReviewFeedbackInappropriate.aspx", cache: !1, type: "POST", data: i }) }, a = function (n) { var i = n.reviewId, r = n.productId, u = "/serviceproductnosession/TranslateProductReview.aspx?reviewid=" + i + "&productId=" + r; return t.ajax({ url: u, cache: !1, type: "GET" }) }; f.initiateEvents([["otherVendors", e], ["realTimePrice", o], ["reviews", s], ["reviewUsefullnessVote", c], ["reviewInappropriateVote", l], ["reviewTranslation", a], ["reviewsRatingDistribution", h],], n.pdpServiceEvent) } }) }(window, window.jQuery); thumbnailContainer = UiBloc.extend({ init: function (n, t) { this._super(n, t); this.$thumbnail = this.Model.$productContainer.find(".product-img") }, Update: function () { var t = this.Page.GetVariant1(), n = t != null ? t.VariantMedia : []; n[0] && n[0].FileName && this.$thumbnail.attr("src", n[0].FileName.replace("|Dimension|", "products/302by302")) } }), function (n) { "use strict"; n.trackingRule.PDP = { SIZEGUIDE_OPEN: "DC_PDP_SizeGuide_Open", VIDEO_DISPLAYED: "videoDisplayed", VIDEO_PLAYED: "videoPlayed", SPOCKEE_VIDEO_PDP_WATCH: "spockeeVideoPdpWatch" }; n.TrackingPDP = n.Tracking.extend({ init: function (t, i) { var h, a, o; this._super(t, i); var u = this, r = i.Model, c = u._track, e = u.storage_, s = n.trackingRule.PDP, v = u.storageName.PRODUCT_ORIGIN, f, p = r.pageType === "MultiDimensionProductPage", y = !1, w = function (n, t) { return t ? { original_id: n, verb: "view", opposite: !0 } : { original_id: n, verb: "view" } }, b = function (n, t) { var r = 0, u = t.indexOf(".") !== -1, f = t.indexOf(",") !== -1, e = u || f, i; return e ? (i = u ? "." : ",", r = t.length - t.indexOf(i) == 2 ? parseInt(t.replace(i, "")) * 10 : parseInt(t.replace(i, ""))) : r = parseInt(t) * 100, { original_id: n, price: r, verb: "add-to-cart" } }, k = function (n, t, i, r, u) { var f = { original_id: i + "/" + r + "/" + u, verb: "view-attribute" }, e = n ? { original_id: t, verb: "view-attribute", opposite: !0 } : {}; return sessionStorage.setItem("LastSeenAttribute", i + "/" + r + "/" + u), n ? [e, f] : f }; r.$eventContainer.on(n.globalServiceEvent.addToCartSucceeded, function (t, i) { n.Utils.Common.onEarlyBirdsLoad(function () { n._ebq.push(["trackActivity", b(i.ProductId, r.article.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithChargesWithoutCurrency)]) }) }).on(s.VIDEO_DISPLAYED, function () { c("DC_PDP_TeesterPageViewed") }).on(s.VIDEO_PLAYED, function () { y || (c("DC_PDP_TeesterVideoClick"), y = !0) }).on(s.SPOCKEE_VIDEO_PDP_WATCH, function () { u.update_dataLayer({ eVar118: r.spockeeBroadcastId }); c("DC_LiveCommerce_WatchFromPDP_Click") }); if (!r.isMultiPDP && !p) r.$eventContainer.on(n.pdpEvent.selectVariant1, function (t, i) { var e = r.productId, u = sessionStorage.getItem("LastSeenAttribute"), o = !1, f = !1; if (u && u !== "undefined" && (f = e.toString() === u.split("/")[0], f && (o = i === u.split("/")[1])), !o) n.Utils.Common.onEarlyBirdsLoad(function () { var t = n._page.Blocs.Selector.GetIdVariant2(); t = t !== undefined ? t : ""; n._ebq.push(["trackActivity", k(f, u, e, i, t)]) }) }); if (!r.isChildProduct && !r.isPdpComparator) r.$sizeGuide.on(n.popinEvent.open, function () { u.launchDirectCall(s.SIZEGUIDE_OPEN) }); if (u.update_dataLayer({ eVar80: "null" }), f = e.readLocalStorageValue(v), f === null && (f = r.isRedirectedFromSearch ? "SEARCH_Internal_MOTEURDERECHERCHE_0_redirect" : u.productOrigin || e.readLocalStorageValue(u.storageName.SHOPPING_TOOL)), f !== null) { u.update_dataLayer({ eVar80: f }); var d = f.indexOf("RECO") === 0, g = f.indexOf("WISHLIST") === 0, nt = f.indexOf("EXTERNAL") === 0, l = e.readLocalStorageValue("comesFromWidget"); (d || g || nt || r.isRedirectedFromSearch) && u.update_dataLayer({ prop60: f }); l !== undefined && l !== null && l === !0 && (h = e.readLocalStorageValue("lr-used-tool"), h !== undefined && u.update_dataLayer({ prop60: h, eVar80: h })); e.eraseLocalStorageValue("comesFromWidget"); e.eraseLocalStorageValue(v) } if (r.isChildProduct && !r.isPdpComparator && n.wa_data && u.update_dataLayer({ channel: n.wa_data.channel }), !r.isChildProduct && !r.isPdpComparator) { u.update_dataLayer({ prop14: r.ProductID }); n.Utils.Common.onEarlyBirdsLoad(function () { r.productId != null && n._ebq.push(["trackActivity", w(r.productId.toString())]) }) } r.isChildProduct || (a = r.proposeLoyalty ? "pdp:proposed" : "pdp:notproposed", o = "PDP", r.hasMultiPdp && (o = "Multi PDP"), r.hasCompleteLook && (o = "ShopTheLook"), r.isFilterablePdp && (o = "PDP Couch"), u.update_dataLayer({ eVar73: o, eVar95: a, prop44: a })); u.searchInfo && u.update_dataLayer({ eVar107: "exact", eVar108: "searchredirection", eVar109: "PDP" }) } }) }(window), function (n, t) { "use strict"; n.UiChildProducts = UiBloc.extend({ init: function (n, i) { this._super(n, i); var r = this, u = r.Model; if (this.$container = t("#childProductBlock"), this.Model.multiProducts !== undefined) this.loadMultiPDP(); else u.$eventContainer.on(pdpEvent.selectVariant1, function () { r.loadCompleteLook() }) }, loadMultiPDP: function () { var t = this, n = this.Model.productList.slice(1); this.Page.childProducts = new MultiPDP({}, { listProd: this.Model.multiProducts, products: n, displayTagFromPLP: !0, isChildProduct: !0 }); this.$container.find(".popin").popin(); this.$container.find(".carousel").carousel() }, loadCompleteLook: function () { var i = this, r, u; r = i.Page.isMobile ? t("#pdpCarouselContainer_" + i.Model.productId).find(".item.active img").attr("src") : t("#pdpCarouselContainer_" + i.Model.productId).find(".mainMedia_image").attr("src"); u = i.Model.listVariant.find(n => n.VariantId == i.Model.Dim1).FamilyName; t.ajax({ url: "/productHelper/LoadCompleteLook", data: JSON.stringify({ request: { ProductId: i.Model.productId, Breadcrumb: contextInfo.Breadcrumb, Dim1: i.Model.Dim1, LoadFromSyte: i.Model.loadCompleteLookFromSyte, ImageUrl: r, ColourName: u } }), contentType: "application/json; charset=utf-8", type: "POST", success: function (r) { if (r !== "" && r !== null) { i.$container.show(); i.$container.html(r); i.$container.find(".pdp-brand").show(); i.Page.childProducts = new MultiPDP({}, { listProd: JSON.parse(t("#dataCompleteLook").html()).listProd, isFromCompleteLook: !0, displayTagFromPLP: !0, isChildProduct: !0, loadCompleteLookFromSyte: i.Model.loadCompleteLookFromSyte }); i.$container.find(".carousel").carousel(); i.$container.parent().parent(".child-product-container").show(); i.$container.trigger("completeLook.loaded"); t("#childProductBlock .mpdp-link").on("click", function () { Utils.CookieManager.CreateCookie("mainshoppingtool", "associatedlookpdp"); n.wa_data.prop12 = "associatedlookpdp"; n.wa_data.eVar12 = "associatedlookpdp" }); i.$container.find(".popin").popin(); i.Model.loadCompleteLookFromSyte && i.Model.$eventContainer.trigger(n.pdpEvent.syteCompleteLookLoaded) } else i.$container.parent(".child-product-container").hide() }, error: function (n) { console.error("AJAX on: " + this.url + " --- method: " + this.type + " --- status: " + n.status + " --- statusText: " + n.statusText) } }) } }) }(window, jQuery), function (n, t) { "use strict"; n.UiProductComparison = n.UiBloc.extend({ init: function (n, i) { var r = this; r._super(n, i); r.productNumber = r.Page.listProduct.length; r.displayClose(); r.Page.listProduct.forEach(function (n) { t("#filterSize_" + n).on("click", "button", function (i, u) { var f = n; r.btnSizeSelected = t(this); r.btnSizeSelectedText = t(this).text(); t("#sizeLabel_" + n).addClass("hidden"); u !== !0 && r.Page.listProduct.forEach(function (n) { n !== f && t("#filterSize_" + n + " button").each(function () { if (t(this).text() === r.btnSizeSelectedText) return t(this).trigger("click", !0), !1 }) }) }); t("#filterColor_" + n + " button img").on("click", function () { var i = t(this).attr("src").replace("72by72", "302by302"); t("#product-" + n + " .plp-product-picture img").attr("src", i) }) }); t(".close-comparator").on("click", function () { var n = t(this).data("productid"); t("li#product-" + n).detach(); t(".comparison-content-" + n).detach(); r.Page.removeProduct(n); r.productNumber--; r.displayClose() }) }, displayClose: function () { this.productNumber > 2 ? t(".close-comparator").show() : t(".close-comparator").hide() } }) }(window, jQuery); UiProductFilters = UiBloc.extend({ init: function (n, t) { this._super(n, t); var i = this; i.productId = this.Model.productId; this.availableColors = $.parseJSON($("#hidColourVariants_" + this.Model.productId).val()); this.$filterContainer = $("#filtersContainer"); this.$filters = $(".pdp-filter"); this.$filtersVariant = $(".pdp-filter-variant-" + i.productId); this.$filterAttribute = $(".filter-attribute"); this.filtersCombinations = []; this.Model.productList.forEach(function (n) { var t = {}; n.Attributes.forEach(function (n) { t[n.AttributeNameCode] = n.AttributeValueCode }); i.filtersCombinations.push(t) }); this.currentId = this.Model.productId; this.productPosition = this.getPosition(); this.currentCombination = this.getCurrentCombination(); this.unavailableCombinations = this.findUnavailableCombinations(this.filtersCombinations); this.updateFilterAvailability(); this.$filterAttribute.on("click", function () { var n = $(this).data("idfiltervariant"), t = $(this).closest(i.$filtersVariant), r; $(this).hasClass("disabled") === !1 && (r = $(this).closest(".pdp-filter"), $(this).closest(i.$filtersVariant).modal({ id: "filterVariant_" + n + "_Panel", method: "close" }), $("#filterVariantContainer_" + n).find(".product-filter-current").html($(this).text()), $(this).hasClass("selected") === !1 && (t.find(".selected").removeClass("selected"), $(this).addClass("selected"), i.currentCombination = i.getCurrentCombination(n, t), i.currentId = i.getCurrentId(n, t), i.updateFilterAvailability(n, t), i.ReloadProduct(i.Model.productList[i.productPosition]))) }) }, findUnavailableCombinations: function (n) { var i = function (n) { var t; if (n.length > 2) return t = [], t[0] = n.shift(), t[1] = i(n), i(t); if (n.length == 2) { var r = [], u = n[0], f = n[1]; return u.forEach(function (n) { f.forEach(function (t) { var i = {}; $.each(n, function (n, t) { i[n] = t }); $.each(t, function (n, t) { i[n] = t }); r.push(i) }) }), r } return n }, f = function (n, t) { var r = [], i; return t.forEach(function (t) { i = !1; n.forEach(function (n) { isMatch = !0; $.each(n, function (n, i) { i !== t[n] && (isMatch = !1) }); isMatch && (i = !0) }); i || r.push(t) }), r }, t = {}, r, u; return n.forEach(function (n) { $.each(n, function (n, i) { t[n] === undefined ? t[n] = [i] : (r = !1, t[n].forEach(function (n) { n === i && (r = !0) }), r || t[n].push(i)) }) }), u = [], $.each(t, function (n, t) { var i = []; t.forEach(function (t) { var r = {}; r[n] = t; i.push(r) }); u.push(i) }), f(n, i(u)) }, getCurrentCombination: function () { var t = this, n = {}; return t.$filtersVariant.each(function () { var t = $(this).data("filtertype"), i = $(this).find(".selected").data("filtervalue"); n[t] = "" + i }), n }, getCurrentLabelizedCombination: function () { var n = this, t = {}; return $.each(n.currentCombination, function (i, r) { var u = n.$filterContainer.find('.filter-attribute[data-filtervalue="' + r + '"]').text(); t[i] = u }), t }, getCurrentId: function () { var n = this, i, t; return n.Model.productList.forEach(function (r, u) { t = !0; r.Attributes.forEach(function (i) { i.AttributeValueCode !== n.currentCombination[i.AttributeNameCode] && (t = !1) }); t && (i = parseInt(r.ProductId), n.productPosition = u) }), i }, getPosition: function () { var n = this, t = 0; return n.Model.productList.forEach(function (i, r) { parseInt(i.ProductId) === n.currentId && (t = r) }), t }, updateFilterAvailability: function () { var n = this, t = []; n.unavailableCombinations.forEach(function (i) { var r = manyDifferences = !1, u; $.each(n.currentCombination, function (n, t) { t !== i[n] && (r ? manyDifferences = !0 : (r = !0, u = [n, i[n]])) }); r && !manyDifferences && t.push(u) }); $(".filter-attribute").removeClass("disabled"); t.forEach(function (n) { $("#filterVariant_" + n[0]).find(".filter-value-" + n[1]).addClass("disabled") }) }, ReloadProduct: function (n) { var t, i; $(".pdp-title").html(n.Title); this.Model.$eventContainer.trigger(pdpEvent.productReloaded, [n]); this.Model.listVariant = n.Variants; this.Page.Blocs.Selector.ReloadSelectVariant1(); this.Page.LoadDefaultArticle(); t = window.location.pathname; t = t.split("-"); t[1] = n.ProductId; t = t.join("-"); i = window.location.origin + t + this.Page.urlSuffixe + window.location.search + window.location.hash; window.history.replaceState({}, document.title, i) } }), function (n, t) { "use strict"; n.UiReviews = UiBloc.extend({ init: function (i, r) { this._super(i, r); var li = this, u = li.Model, ai = 3e3, c = [], l = 0, p = 0, lt = 0, at = {}, vi = t("<span>", { "class": "product-rating-review-fade" }), w = t(".product-rating-review-see-more"), a = t(".product-rating-content"), b = t(".product-rating-review-see-more-btn"), vt = t(".product-rating-review-see-all-btn"), v = t("#sizeRatingDistributionShowMore"), o = t("#sizeRatingDistributionResult"), yt = t("#productRatingSorting"), pt = t("#productRatingFilterByNote"), wt = t("#productRatingFilterByLanguage"), k = t("#sortReviewsPopin"), d = t("#filterReviewsByNotePopin"), g = t("#filterReviewsByLanguagePopin"), nt = t(".product-rating-open-rating-filter-popin"), tt = t(".product-rating-open-language-filter-popin"), it = t(".product-rating-open-sorting-popin"), bt = t(".product-rating-review-no-review-message"), yi = [yt, pt, wt, it, nt, tt], pi = t(".note-details-button"), wi = t(".product-rating-header-certified-reviews"), bi = t(".certified-reviews-tooltip"), yr = t(".product-rating-review-photos"), rt = t("#zoomReviewsPhotosContainer"), pr = t(".reviews-zoom-container-arrow-left"), wr = t(".reviews-zoom-container-arrow-right"), h = t(".product-rating-review-photos-item"), s = t("#dataReviews"); s.length > 0 && (s = JSON.parse(s.text())); u.$eventContainer.on(n.pdpServiceEvent.reviewsRequested, function () { kt(!1); ci(); fr(); or(); ir() }); u.$eventContainer.on(n.pdpServiceEvent.reviewsSucceeded, function (n, t) { gi(t); rr(); kt(!0); u.alreadyRatedReviews.forEach(function (n) { u.filterAvailableVoteOptions(n) }) }); u.$eventContainer.on(n.pdpServiceEvent.reviewsRatingDistributionRequested, function () { o.addClass("loading") }); u.$eventContainer.on(n.pdpServiceEvent.reviewsRatingDistributionSucceeded, function (n, t) { t && (o.removeClass("loading"), o.html(t.HtmlReviews)) }); u.$eventContainer.on(n.pdpServiceEvent.reviewsRatingDistributionFailed, function () { }); u.$eventContainer.on(n.pdpServiceEvent.reviewUsefullnessVoteSucceeded, function (n, t, i) { i && i.reviewId && i.voteType && dt(i.reviewId, i.voteType, t) }); u.$eventContainer.on(n.pdpServiceEvent.reviewInappropriateVoteSucceeded, function (n, t, i) { i && i.reviewId && dt(i.reviewId, u.voteTypes.inappropriate, t) }); u.$eventContainer.on(n.pdpServiceEvent.reviewUsefullnessVoteFailed, function (n, t) { t && t.reviewId && gt(t.reviewId) }); u.$eventContainer.on(n.pdpServiceEvent.reviewInappropriateVoteFailed, function (n, t) { t && t.reviewId && gt(t.reviewId) }); u.$eventContainer.on(n.pdpServiceEvent.reviewTranslationRequested, function (n, t, i) { var r = i.reviewId; hi(r); ot(r); tr(r) }); u.$eventContainer.on(n.pdpServiceEvent.reviewTranslationSucceeded, function (n, t, i) { var r = i.reviewId, o = t.IsSuccess, f; if (!o) { e(r); ct(r, s.voteError); et(r); return } f = u.reviews.findIndex(function (n) { return n.id === r }); u.reviews[f].translation = t.Review; et(r); e(r); si(r); oi(r); ti(i.reviewId, t.Review.Title); ii(i.reviewId, t.Review.Message); t.Review.ClientResponses.length > 0 && ri(i.reviewId, t.Review.ClientResponses) }); u.$eventContainer.on(n.pdpServiceEvent.reviewTranslationFailed, function (n, t, i) { var r = i.reviewId; et(r); e(r); st(r); ct(r, s.voteError) }); wi.on("mouseenter", function () { bi.tooltip("open") }); b.on("click", function () { u.$eventContainer.trigger(n.pdpServiceEvent.reviewsRequested) }); v.on("click", function () { v.find(".lr-arrow").toggleClass("lr-arrow-down lr-arrow-up"); var t = v.attr("aria-expanded") === "true" ? !0 : !1; v.attr("aria-expanded", (!t).toString()); t === !1 ? o.html() != "" ? o.show() : u.$eventContainer.trigger(n.pdpServiceEvent.reviewsRatingDistributionRequested, [{ type: "size" }]) : o.hide() }); yt.on("change", function () { var i = t(this).find(":selected"); u.selectedSortField = u.sortFields[i.data("sort-field")]; u.selectedSortDir = u.sortDirections[i.data("sort-dir")]; u.$eventContainer.trigger(n.pdpEvent.reviewsFilterAndSortUpdated) }); pt.on("change", function () { var i = t(this).find(":selected"); u.selectedRatingFilter = i.val(); u.$eventContainer.trigger(n.pdpEvent.reviewsFilterAndSortUpdated) }); wt.on("change", function () { var i = t(this).find(":selected"); u.selectedLanguageFilter = i.val(); u.$eventContainer.trigger(n.pdpEvent.reviewsFilterAndSortUpdated) }); it.on("click", function () { ut(k) }); nt.on("click", function () { ut(d) }); tt.on("click", function () { ut(g) }); k.on("click", ".product-rating-popin-field", function () { it.find("span:first-of-type").text(t(this).find(".product-rating-popin-field-text").text()); u.selectedSortField = u.sortFields[t(this).data("sort-field")]; u.selectedSortDir = u.sortDirections[t(this).data("sort-dir")]; u.$eventContainer.trigger(n.pdpEvent.reviewsFilterAndSortUpdated); ft(k, t(this)) }); d.on("click", ".product-rating-popin-field", function () { nt.find("span:first-of-type").text(t(this).find(".product-rating-popin-field-text").text()); u.selectedRatingFilter = t(this).data("value"); u.$eventContainer.trigger(n.pdpEvent.reviewsFilterAndSortUpdated); ft(d, t(this)) }); g.on("click", ".product-rating-popin-field", function () { tt.find("span:first-of-type").text(t(this).find(".product-rating-popin-field-text").text()); u.selectedLanguageFilter = t(this).data("value"); u.$eventContainer.trigger(n.pdpEvent.reviewsFilterAndSortUpdated); ft(g, t(this)) }); a.on("click", ".product-rating-review-vote-btn button", function () { var r = t(this).val(), i = t(this).closest(".product-rating-review-vote").data("review-id"), f = s.helpfulnessVoteFeedback; r === u.voteTypes.inappropriate && (f = s.inappropriateVoteFeedback); fi(i); ot(i); hi(i); hr(i, f); at[i] = window.setTimeout(function () { r === u.voteTypes.inappropriate ? u.$eventContainer.trigger(n.pdpServiceEvent.reviewInappropriateVoteRequested, [{ reviewId: i }, { reviewId: i }]) : u.$eventContainer.trigger(n.pdpServiceEvent.reviewUsefullnessVoteRequested, [{ reviewId: i, voteType: r }, { reviewId: i, voteType: r }]) }, ai) }); a.on("click", ".product-rating-review-cancel-vote", function () { var n = t(this).closest(".product-rating-review-vote").data("review-id"); clearTimeout(at[n]); y(n); e(n); ht(n) }); a.on("click", ".product-rating-review-translate-btn", function () { var i = t(this).closest(".product-rating-review-vote").data("review-id"), f = ni(i), r = u.reviews[f]; r && r.translation && r.translation.Title && r.translation.Message ? (ti(i, r.translation.Title), ii(i, r.translation.Message), ri(i, r.translation.ClientResponses), e(i), oi(i), si(i)) : u.$eventContainer.trigger(n.pdpServiceEvent.reviewTranslationRequested, [{ reviewId: i, productId: u.ProductID }, { reviewId: i, productId: u.ProductID }]) }); a.on("click", ".product-rating-review-back-to-original-btn", function () { var n = t(this).closest(".product-rating-review-vote").data("review-id"), i = ni(n), r = u.reviews[i], o = f(n).closest(".product-rating-review"); o.html(r.html); e(n); ei(n); st(n) }); pi.on("click", function () { t("#panelNoteSummary").iceberg("emerge"); o = t(".product-rating-bottom-panel #sizeRatingDistributionResult"); o.html() != "" ? o.show() : u.$eventContainer.trigger(n.pdpServiceEvent.reviewsRatingDistributionRequested, [{ type: "size" }]); t(".iceberg_shadow, .product-rating-bottom-panel-title .lr-icon-cross-small").on("click", function () { t("#panelNoteSummary").iceberg("immerse") }) }); t(".product-rating-popin-go-back").on("click", function () { var n = t(this).parent(); n.modal({ method: "close" }) }); var ki = t("<li>", { "class": "product-rating-review" }), di = t("<span>", { "class": "lr-tick lr-tick-light-success" }), gi = function (n) { var i = u.$reviewsList.find(".product-rating-review:last-of-type"); if (u.$reviewsList.find(".product-rating-review-fade").remove(), u.totalNbOfReviews = n.Summary.TotalNumberOfReviews, t(".product-rating-review-see-all-btn-total").text("(" + u.totalNbOfReviews + ")"), n.HtmlReviews.length > 0) { ci(); n.HtmlReviews.forEach(function (n) { var i = t(n).find(".product-rating-review-vote").data("review-id"), r = t(n).filter("#dataReview_" + i), f; r.length > 0 && (r = JSON.parse(r.text())); u.reviews.findIndex(function (n) { return n.id === i }) === -1 && u.reviews.push({ id: i, html: n, language: r.language }); f = ki.clone().html(n); u.$reviewsList.append(f); r.language !== u.reviewsData.initialSelectedLanguage && (ei(i), e(i)); u.offset++ }); n.Summary.SeeMoreReviewsButtonIsVisible && (ur(), er(), u.$reviewsList.append(vi.clone())); h = t(".product-rating-review-photos-item"); h.on("click", ui) } else n.HtmlReviews.length === 0 && cr(); i && i[0] && i[0].scrollIntoView() }, kt = function (n) { yi.forEach(function (t) { t.attr("disabled", !n) }) }, ut = function (n) { var t = n.find(".product-rating-popin-title").text(); n.modal({ method: "open", type: "panel", title: t }) }, nr = function (n) { n.modal({ method: "close" }) }, ft = function (n, t) { n.find(".lr-tick").remove(); t.prepend(di.clone()); n.find(".bold").removeClass("bold"); t.addClass("bold"); nr(n) }, dt = function (t, i, r) { if (r.IsSuccess) { var f = { reviewId: t, voteType: i }; u.alreadyRatedReviews.push(f); Utils.CookieManager.CreateCookie("ratedReviews", JSON.stringify(u.alreadyRatedReviews)); ht(t); y(t); sr(t); e(t); u.filterAvailableVoteOptions(f) } else i === u.voteTypes.inappropriate ? u.$eventContainer.trigger(n.pdpServiceEvent.reviewInappropriateVoteFailed, [{ reviewId: t }]) : u.$eventContainer.trigger(n.pdpServiceEvent.reviewUsefullnessVoteFailed, [{ reviewId: t }]) }, gt = function (n) { ht(n); y(n); ct(n, s.voteError); e(n) }, ni = function (n) { return u.reviews.findIndex(function (t) { return t.id === n }) }, ti = function (n, t) { var i = f(n), r = i.closest(".product-rating-review").find(".product-rating-review-title"); r.html(t) }, ii = function (n, t) { var i = f(n), r = i.closest(".product-rating-review").find(".product-rating-review-text"); r.html("<p>" + t + "<\/p>") }, ri = function (n, i) { var r = f(n), u = r.closest(".product-rating-review").find(".product-rating-response"); u.each(function (n) { t(this).find(".product-rating-response-text").html("<p>" + i[n].Response + "<\/p>"); t(this).find(".product-rating-response-footer").html(i[n].Name + ", " + i[n].Department) }) }, ui = function (n) { var i = h.filter('[data-review-id="' + t(n.currentTarget).data("review-id") + '"]'), r = h.filter('[data-photo-id="' + t(n.currentTarget).data("photo-id") + '"]'); l = r.data("index"); p = i.length; c = []; t.each(i, function (n, i) { var r = { src: t(i).data("src-large"), caption: t(i).data("caption"), index: n }; c.push(r) }); vr(); _satellite.track("DC_PDP_BazaarVoicePicsInReview_Click") }, tr = function (n) { fi(n); ot(n); st(n); f(n).append(t("<div>", { "class": "loading" })) }, et = function (n) { y(n); e(n); f(n).find(".loading").remove() }, ir = function () { w.find(".loading").length === 0 && w.append(t("<div>", { "class": "loading" })) }, rr = function () { w.find(".loading").remove() }, ur = function () { b.removeClass("hideField") }, fr = function () { b.addClass("hideField") }, er = function () { vt.show() }, or = function () { vt.hide() }, y = function (n) { f(n).find(".product-rating-review-vote-btn").show() }, fi = function (n) { f(n).find(".product-rating-review-vote-btn").hide() }, e = function (n) { f(n).find(".product-rating-translation-btn").removeClass("hideField") }, ot = function (n) { f(n).find(".product-rating-translation-btn").addClass("hideField") }, ei = function (n) { f(n).find(".product-rating-review-translate-btn").removeClass("hideField") }, oi = function (n) { f(n).find(".product-rating-review-translate-btn").addClass("hideField") }, si = function (n) { f(n).find(".product-rating-review-back-to-original-btn").removeClass("hideField") }, st = function (n) { f(n).find(".product-rating-review-back-to-original-btn").addClass("hideField") }, sr = function (n) { f(n).find(".product-rating-review-vote-btn .btn[value=Positive]").addClass("lr-button-success").attr("disabled", "disabled") }, hr = function (n, t) { var r = f(n), i = r.find(".product-rating-review-vote-feedback"), u = i.find(".product-rating-review-vote-feedback-text").text(t); u.text(t); i.show() }, ht = function (n) { f(n).find(".product-rating-review-vote-feedback").hide() }, ct = function (n, t) { f(n).find(".product-rating-review-vote-error").text(t).show() }, hi = function (n) { f(n).find(".product-rating-review-vote-error").hide() }, cr = function () { bt.removeClass("hideField") }, ci = function () { bt.addClass("hideField") }, f = function (n) { return t("[data-review-id=" + n + "]") }, lr = function (n) { var t = n.getBoundingClientRect(), i = t.top, r = t.height, n = n.parentNode; do { if ((t = n.getBoundingClientRect(), i <= t.bottom == !1) || i + r <= t.top) return !1; n = n.parentNode } while (n != document.body); return i + 50 <= document.documentElement.clientHeight }, ar = function () { c.forEach(n => { lr(document.getElementById("reviews_zoom_image_" + n.index)) && (l = n.index) }); t(".reviews-zoom-container-counter").text(`${parseInt(l) + 1}/${p}`) }, vr = function () { rt.find(".reviews-zoom-container-background").detach(); rt.modal({ method: "open", type: "popin", classList: "olapic_popin" }); c.forEach(n => { var i = document.createElement("div"), r, u, f, e, o; t(i).attr("id", "reviews_zoom_image_" + n.index); t(i).addClass("reviews-zoom-container-background"); r = document.createElement("div"); t(r).addClass("reviews-zoom-container-background-gradient"); t(i).append(t(r)); u = n.src; f = t("<img>", { src: u, "class": "reviews-zoom-container-image", alt: "" }); t(i).append(f); e = n.caption; o = t("<span>", { html: e, "class": "reviews-zoom-container-caption" }); t(i).append(o); t("#zoomReviewsPhotosContainer").append(t(i)) }); t(".modal_content").scrollTop(0); setTimeout(function () { if (rt.find(".reviews-zoom-container-counter").detach(), t("#modalContainer").find(".modal_titleBar").prepend(t("<span>", { html: "", "class": "reviews-zoom-container-counter" })), t(".reviews-zoom-container-counter").text(`1/${p}`), t(".modal_content").animate({ scrollTop: t(`#reviews_zoom_image_${l}`).position().top }, 1e3), lt == 0) { t(".modal_content").on("scroll", () => { ar() }); lt = 1 } }, 200) }; h.on("click", ui) } }) }(window, jQuery), function (n, t) { "use strict"; var i = t("body").hasClass("is-mobile") ? "iceberg" : "panel"; n.UiServices = UiBloc.extend({ init: function (n, r) { this._super(n, r); var s = this, u = t("#services"), f = !0; this.Model.$eventContainer.on(pdpEvent.articleSelected, function () { v() }); this.Model.$eventContainer.on(pdpEvent.articleUnselected, function () { e() }); var h = t("<span>", { "class": "lr-tick" }), c = t("<li>", { "class": "delivery-info-item delivery-info-service" }), l = t("<span>", {}), a = t("<div>", { "class": "popin" }), v = function () { e(); var n = s.Model.article; n !== null && (u.addClass("fix-display-services"), n.RelatedServices.length > 0 ? (n.RelatedServices.forEach(function (t, i) { o(t.Name, t.DescriptionUrl, i + 1, n.RelatedServices.length) }), f && u.show()) : n.ProductClassification !== artType.mktReg && y()) }, e = function () { f && u.hide(); u.trigger(pdpEvent.servicesRemoved) }, o = function (n, t, r, f) { var e = c.clone().attr("id", "product-service-" + r).addClass("product-service-" + r), o = a.clone(), s; if (e.append(h.clone()), e.append(l.clone().html(n)), f === 1 && e.css("flex-grow", "1"), t) { e.addClass("underline"); e.addClass("cursor-pointer"); s = ""; contextInfo.EnvironmentBaseDirectory == "" || t.startsWith("/" + contextInfo.EnvironmentBaseDirectory) || (s = "/" + contextInfo.EnvironmentBaseDirectory); e.off("click").on("click", function () { o.modal({ method: "open", type: i, id: "Services_Panel-" + r, url: s + t, fullscreen: !1, gradientOnScroll: !0, trigger: e, onLoad: p, block: ".staticContent" }) }) } u.append(e); u.on(pdpEvent.servicesRemoved, function () { o.data("popin") !== undefined && o.data("popin").destroy(); e.remove() }) }, y = function () { for (var t, i, n = 1; n <= 4; n++)t = labels.MobileV3_PDP["Service" + n + "Label"], i = labels.MobileV3_PDP["Service" + n + "Url"], t !== "" && i !== "" && o(t, i, n); f && u.show() }, p = function (n) { n.find(".container").css("width", "auto"); n.find("#ct_services").css("width", "auto"); n.find("#ct_services").find("h2").first().hide(); n.find("#ct_ctn").css("width", "auto"); n.find("#ct_menu").hide(); n.find("#ct_main").css("width", "auto"); n.find("#contenu_service .encadre").css("width", "auto"); n.find("#contenu_service .encadre .right").css({ width: "auto", float: "none", "padding-left": "45px" }); n.find(".lienback").hide(); n.find("#contenu_service .right").css({ width: "auto", float: "none" }); n.find("#popup").css("width", "auto"); n.find("#popup p").css("width", "auto"); n.find(".popup").css("width", "auto!important"); n.find("#evo-content").css("width", "auto!important"); n.find(".ctn").css("width", "auto") } } }) }(window, jQuery), function (n, t) { "use strict"; n.UiShopsList = UiBloc.extend({ init: function (i, r) { this._super(i, r); var u = this, a = ".container-shop-schedule", s = ".shops-list", v = ".shop-details", h = 30, f = t("#availableShopsList"), y = t("#goToShopsList a"), e = t(".shop-available"), c = t("#hrUnderDeliveryDelay"), p = t(".delivery-delay"), w = function (n) { t(n).parent().toggleClass("opened").find(a).slideToggle() }, b = function () { t.ajax({ url: "/serviceproductnosession/GetStoresAvailability", type: "GET", data: { prodid: u.Model.productId.toString(), docid: u.Model.article.DocumentId.toString(), dim1: u.Model.article.Dimension1.toString(), dim2: u.Model.article.Dimension2.toString(), prescode: u.Model.article.PresCode.toString() } }).done(function (n) { f.find(s).html(n); f.find(v).length > 0 ? (e.show(), c.hide(), f.show(), l()) : o() }).error(function (t) { n.console.error("AJAX on: " + this.url + " --- method: " + this.type + " --- status: " + t.status + " --- statusText: " + t.statusText); o() }) }, l = function () { t(".container-shop-contact, .shop-img").off().on("click", f, function () { w(this) }) }, o = function () { e.hide(); p.css("display") !== "none" && c.show(); f.hide().find(s).empty() }; e.on("click", function (n) { n.preventDefault(); var i = u.Page.isMobileDevice ? t("#header").innerHeight() + h : h; t("html, body").animate({ scrollTop: f.offset().top - i }, 1e3) }); this.Model.$eventContainer.on(pdpEvent.articleSelected, function () { b() }); this.Model.$eventContainer.on(pdpEvent.articleUnselected, function () { o() }); l(); y.attr("rel", "nofollow") } }) }(window, jQuery), function (n, t) { "use strict"; n.UiVendors = n.UiBloc.extend({ init: function (i, r) { this._super(i, r); var l = this, u = l.Model, w = 3, g = u.productId, s = [], f = 0, a, v, nt = l.isMobileDevice ? "iceberg" : "popin", h = t("#showmoreVendors"), c = t("#vendorsList"), e = t("#vendorsListContainer"), b = t("#vendorsListHeading"), tt = t("#vendorName_" + g), o = t("#purchaseDetailsTabs"), it = t("#purchaseDetailsTabsMainVendor"), rt = t("#purchaseDetailsTabsOtherVendors"), ut = function () { e.addLoading(); u.$eventContainer.trigger(n.pdpServiceEvent.otherVendorsRequested, [{ documentId: c.data("docid") }]); y(); o.addLoading() }, y = function () { o.show(); o.removeClass("hidden") }, k = function () { o.hide() }, p = function () { var n = s[0]; s.forEach(function (t) { t.price < n.price && (n = t) }); t("#purchaseDetailsTabsOtherVendors").html("<span>Dès <strong>" + n.priceText + "<\/strong> chez " + f + ' autre(s) vendeur(s)<\/span><i class="lr-arrow lr-arrow-right"><\/i>'); t(".closeBuyboxPanel").on("click", function () { t("#vendorsPanel").modal({ method: "close" }) }) }, d = function () { t("#mainProductDetailsContainer").attr("aria-expanded", "true"); t("#mainProductDetailsContainer").attr("data-expanded", "true"); t("#purchaseDetailsTabsMainVendor").attr("aria-expanded", "true"); t("#purchaseDetailsTabsOtherVendors").attr("aria-expanded", "false"); t("#purchaseDetailsTabsMainVendor").attr("data-expanded", "true"); t("#purchaseDetailsTabsOtherVendors").attr("data-expanded", "false"); t("#otherVendorsDetailsContainer").attr("data-expanded", "false") }; if (c.length > 0 && !u.isChildProduct) { u.$eventContainer.on(n.pdpEvent.articleSelected, ut).on(n.pdpEvent.articleUnselected, function () { e.hide() }).on(n.pdpServiceEvent.otherVendorsSucceeded, function (n, r) { var ut = t(r), g = ut.find(".vendor"), ft; if (s = [], g.each(function (n, i) { var r = t(i).find(".vendor-list-price").text().replace(",", "."), u = parseFloat(r); s.push({ price: u, priceText: r }) }), f = g.length, f > 0) { a = "<span>" + tt.data("text").replaceAll("et expédié ", "").replaceAll(":", "") + i.Model.article.Vendor.Name + "<\/span>"; it.html(a); i.switchBuyBoxAB === !0 && y(); ft = g.filter(function (n) { return n > w - 1 ? !0 : !1 }); g.dropdown(); i.switchBuyBoxAB === !0 && g.first().dropdown("open"); f <= w ? h.addHidden() : h.removeHidden(); rt.html("<span>" + labels.MobileV3_PDP.MultipleVendors.replace("[ProductTitle]", f).replace("aussi ", "") + "<\/span>"); o.removeLoading(); v = labels.MobileV3_PDP.MultipleVendors.replace("[ProductTitle]", f); b.text(v); b.show(); c.html(ut); e.show(); e.removeLoading(); t(".other-vendors-review").on("click", function (n) { n.stopPropagation(); var i = t(this).attr("data-vendorId"), r = t(this).data("basevendorurl").replace("{vendorId}", i); window.location.href = r + "#vendor-reviews" }); ut.find(".infoPrice").on("click", function () { t("#colorPricePopin").popin("open") }); t(".productTag_link").each(function (n) { t(this).parent().find(".productTag_modal").attr("id", "productTagModal" + n); var i = t(this).text(); t(this).on("click", function () { t("#productTagModal" + n).modal({ method: "open", type: nt, id: "productTag_Panel" + n, gradientOnScroll: !0, title: i }) }) }); ut.find(".lr-button").on("click", function () { var n = t(this), i = n.closest(".vendor"); l.Page.AddToBasket({ itemOfferId: n.data("itemid"), prescode: n.data("itemcode"), vendor: { name: i.find(".vendorNameLink").text(), url: i.find(".detailsContainer a").attr("href") }, $price: i.find(".vendor-list-price").html(), fromOtherVendor: !0 }) }); d(); p(); u.hasOtherVendors = !0 } else d(), k(), e.hide(), u.hasOtherVendors = !1; u.VMMkpServices != null && t("#MkpServices").show(); u.VMMkpBelowCTA != null && t("#MkpBelowCTA").show() }); h.on("click", function () { h.addHidden(); c.find(".vendor.hidden").removeHidden() }); t("#purchaseDetailsTabsMainVendor").on("click", function () { t(this).html(a); t("#purchaseDetailsTabsMainVendor").attr("data-expanded", !0); t("#purchaseDetailsTabsOtherVendors").attr("data-expanded", !1); p() }); t("#purchaseDetailsTabsOtherVendors").on("click", function () { t(this).find("span").text(v); t("#purchaseDetailsTabsMainVendor").attr("data-expanded", !1); t("#purchaseDetailsTabsOtherVendors").attr("data-expanded", !0); t("#purchaseDetailsTabsMainVendor span").text(i.Model.article.WebInfo.ArticlePriceDisplay.FormattedSalePriceAfterWithCharges + " chez " + i.Model.article.Vendor.Name); p() }) } k(); i.switchBuyBoxAB === !0 && i.productClassification !== "RedouteRegular" && i.countryCode === "fr-FR" && i.Model.vendors && (i.switchBuyBox = !0, y()) } }) }(window, window.jQuery); WISHLIST_MODE = { MODE_REDIRECT: 0, MODE_POPOVER: 1 }; UiWishListAdd = UiBloc.extend({ init: function (n, t) { this._super(n, t); var i = this; this.$this = $(this.getProductIdSelector("#btnAddToWishList_")); this.$popin = $("#addToWishlistPopin"); this.getCountTries = 0; this.wishlistMode = WISHLIST_MODE.MODE_REDIRECT; this.wishlistUrl = "/myaccount/wishlist" + i.Page.urlSuffixe; this.wishlistPopinUrlParameter = "addtowishlistpopin"; this.wishlistPopinUrlValue = "1"; this.Model.enableIsProductInWishList && this.initDisplay(); this.$this.removeClass("hide").click(function () { i.HandleWishListEvent(null, !0) }); this.tooltipOptions = { closeDelay: 2e3 }; this.tooltips = { $noSizeErrorTooltip: $(this.getProductIdSelector("#addToWishlistNoSizeError_")), $customTextError: $(this.getProductIdSelector("#addToWishlistCustomTextError_")) }; $.each(this.tooltips, function (n, t) { t instanceof $ && t.tooltip(i.tooltipOptions) }); this.isOpenPopinUrl() && (this.Model.shouldAddToWishlist = !0) }, initDisplay: function () { var n = this; $.ajax({ async: !0, cache: !1, url: "/servicewishlistnosession/isproductinwishlist", data: { ProductId: n.Model.productId }, success: function (t) { t !== null && t.IsSuccess === !0 && t.IsInWishList === !0 && n.$this.toggleClass("lr-icon-wishlist-border lr-icon-wishlist-primary") }, error: function (n, t, i) { this.getCountTries += 1; this.getCountTries > 3 ? console.error("AJAX on " + this.url + " method " + this.type + " status " + n.status + " statusText " + n.statusText + " error " + i + " response " + n.responseText) : setTimeout(this.getCountTries, 500) } }) }, HandleWishListEvent: function (n, t) { var i = null; t = t || !1; i = n === undefined || n === null ? this.saveProductInfo() : n; i.forceAddToWishlist = t; this.redirectToWishlistNextStep(i) }, updateWishListLine: function (n) { var t = this; $.ajax({ async: !1, cache: !1, url: "/ServiceWishList/UpdateWishListLine", type: "POST", data: { ProductId: n.ProductId, DocumentId: n.DocumentId, Dimension1: n.Dimension1, Dimension2: n.Dimension2, PersonalisationText: n.Perso, LineId: n.wishListLineId }, success: function (n) { n.IsSuccess === !0 && (window.location.href = t.wishlistUrl) }, error: function (n, t, i) { console.error("AJAX on " + this.url + " method " + this.type + " status " + n.status + " statusText " + n.statusText + " error " + i + " response " + n.responseText) } }) }, saveProductInfo: function () { var t = this.Model.article, n = {}, i; return t == null ? (i = this.Page.GetVariant1(), i == null ? console.error("PDP - ERROR : Can't add to wishlist article without color variant selected") : n = { ProductId: i.ProductId, DocumentId: i.DocumentId, Dimension1: i.VariantId }) : n = { ProductId: t.ProductId, DocumentId: t.DocumentId, Dimension1: t.Dimension1, Dimension2: t.Dimension2 }, n.Perso = this.Page.Blocs.Selector.GetPersonalisation(), n.wishListLineId = Utils.UrlManager.getUrlParameter("wishListLineId"), Utils.CookieManager.CreateCookie("wishList_ItemToAdd", JSON.stringify(n), 7), n }, redirectToWishlistNextStep: function (n) { var t, f, r, u, e, o, i; if (n !== null) if (t = this, n.Dimension2 !== undefined && (n.Perso == undefined || n.Perso != "")) n.wishListLineId !== undefined && n.forceAddToWishlist == !1 ? this.updateWishListLine(n) : this.gotoWishlistPage(n); else if (this.wishlistMode === undefined || this.wishlistMode === WISHLIST_MODE.MODE_REDIRECT) { if (f = n.forceAddToWishlist === !0 || n.wishListLineId === undefined ? "AddToWishList=" + n.ProductId : "wishListLineId=" + n.wishListLineId + "&wishListCode=" + Utils.UrlManager.getUrlParameter("wishListCode"), r = this.Page.GetVariant1(), r !== null) if (u = this.Page.GetVariant2(), e = "/ppdp/prod-" + r.ProductId + this.Page.urlSuffixe, u !== null && u.length != 0) window.location.href = e + "?ToWishList=1&docid=" + r.DocumentId + "&dim1=" + r.VariantId + "&dim2=" + u.VariantId + "&" + f; else if (n.Perso !== undefined && n.Perso !== "") this.tooltips.$customTextError.tooltip("open"); else if (o = t.Page.Blocs.Selector, o.isPopin) t.Model.$filterSize.popin("open").one("popin.close", function () { t.redirectToWishlistNextStep(t.Page.GetArticle()) }); else this.Page.requestSizeBefore(function () { t.redirectToWishlistNextStep(t.Page.GetArticle()) }) } else this.wishlistMode == WISHLIST_MODE.MODE_POPOVER && (i = "", $("#Personalisation").length != 0 && $("#Personalisation").val().length == 0 && (i = labels.MobileV3_PDP.NoCustomTextError, $("#PersonalisationForm").addClass("has-error"), $("#customisable a").removeClass("collapsed")), _page.GetVariant2() == undefined && (i = labels.MobileV3_PDP.NoSizeError, $("#Personalisation").length != 0 && $("#Personalisation").val().length == 0 && (i = labels.MobileV3_PDP.NoSizeAndCustomTextError)), i != "" && _page.DisplayPopOverMessage("#btnAddToWishList", i, 4e3, "left")) }, openAddToWishlistPopin: function (n) { var i = document.location.search, r, t; if (i += document.location.search === "" ? "?" : "&", i += this.wishlistPopinUrlParameter + "=1&dim1=" + n.Dimension1 + "&dim2=" + n.Dimension2, r = "/login/login" + this.Page.urlSuffixe + "?returnurl=" + encodeURIComponent(document.location.pathname + i), !contextInfo || !contextInfo.Customer || !contextInfo.Customer.UserId) { window.location.href = r; return } return t = this, $.ajax({ url: "/ServiceWishList/LoadAddToWishListLayer?productid=" + n.ProductId + "&dimension1=" + n.Dimension1 + "&dimension2=" + n.Dimension2, type: "GET", cache: !1, beforeSend: function () { t.$popin.addLoading().popin("open") }, success: function (i) { i.IsSuccess ? t.$popin.empty().append(i.Html).data("article", n) : i.LoginRedirect && (window.location.href = r) }, complete: function () { t.$popin.removeLoading() } }) }, gotoWishlistPage: function (n) { this.Page.isMobileDevice === !0 ? window.location.href = this.wishlistUrl + "?AddToWishList=" + n.ProductId + "&dim1=" + n.Dimension1 + "&dim2=" + n.Dimension2 + "&documentid=" + n.DocumentId + "&personalisationText=" + n.Perso : this.openAddToWishlistPopin(n) }, isOpenPopinUrl: function () { return Utils.UrlManager.getUrlParameter(this.wishlistPopinUrlParameter) == this.wishlistPopinUrlValue && Utils.UrlManager.getUrlParameter("dim1") !== undefined && Utils.UrlManager.getUrlParameter("dim2") !== undefined ? !0 : !1 }, getProductIdSelector: function (n) { return n + this.Model.productId } }), function (n, t) { "use strict"; var i = function (n) { return ("0" + n).slice(-2) }; n.FlashSales = n.Page.extend({ init: function (i, r) { this._super(i, r); var u = this, f = u.Model; t(".countdown-container").each(function () { var n = new UiCountDown(u, "UiCountDown", null, t(this)) }); t(".fs-countdown").each(function () { var n = new UiFsCountDown(u, "UiFsCountDown", null, t(this)) }); t(".start-date").each(function () { var n = new UiFSComingSoon(u, "UiFSComingSoon", null, t(this)) }); Utils.Common.onCustomClick(t(".fs-link"), function (i) { f.$eventContainer.trigger(n.fsTrackingEvent.FLASHSALE_REQUESTED, [t(i).data("position"), t(i).data("flashsaleid")]); f.$eventContainer.trigger(n.globalTrackingEvent.SHOPPING_TOOL_USED, [{ type: "INTERNAL", subType: "VentesFlash", extraData: "hub" }]) }) } }); n.UiCountDown = n.UiBloc.extend({ init: function (r, u, f, e) { var k = this, b; k._super(r, u); var h = 3, c = "countdown", o, l = !0, d = e.find(".hours"), g = e.find(".minutes"), nt = e.find(".seconds"), a = e.find("." + c + "-wrapper"), tt = e.find("." + c + "-message"), s = function () { var n = new Date(e.data("time") * 1e3), t = new Date, u = Date.UTC(t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate(), t.getUTCHours(), t.getUTCMinutes(), t.getUTCSeconds()), f = Date.UTC(n.getUTCFullYear(), n.getUTCMonth(), n.getUTCDate(), n.getUTCHours(), n.getUTCMinutes(), n.getUTCSeconds()); o = f - u; var s = Math.floor(o / 1e3 % 60), c = Math.floor(o / 6e4 % 60), r = Math.floor(o / 36e5 % 24), i = Math.floor(o / 864e5); return { total: o, days: i + 1, hours: i + 1 < h ? r + 24 * i : r, minutes: c, seconds: s } }, v = function () { return a.addClass("hide") }, it = function () { return a.removeClass("hide") }, y = function () { return o || (o = s()), o.days < h && o.days >= 0 && o.seconds >= 0 }, rt = function () { o = s(); var i = t("<div>", { "class": "lr-button lr-button-secondary fl-btn" }); i.text(Math.abs(o.days) + " " + n.labels.MobileV3_FlashSalesList.FlashSalesDaysLeft); tt.html(i) }, p = function () { var n = i(o.hours); return n = '<span class="number">' + n.charAt(0) + '<\/span><span class="number">' + n.charAt(1) + "<\/span>", d.html(n) }, w = function () { var n = i(o.minutes); return n = '<span class="number">' + n.charAt(0) + '<\/span><span class="number">' + n.charAt(1) + "<\/span>", g.html(n) }, ut = function () { var n = i(o.seconds); n = '<span class="number">' + n.charAt(0) + '<\/span><span class="number">' + n.charAt(1) + "<\/span>"; nt.html(n) }, ft = function () { o = s(); l ? (it(), p(), w(), l = !1) : (o.minutes === 59 && p(), o.seconds === 59 && w()); ut(); y() || (clearInterval(b), v()) }; y() ? b = setInterval(function () { ft() }, 1e3) : (v(), rt()) } }); n.UiFsCountDown = n.UiBloc.extend({ init: function (n, r, u, f) { var g = this, d; g._super(n, r); var h = !0, e, l = f.find(".days"), o = f.find(".hours"), nt = f.find(".minutes"), c, s = f.find(".seconds"), a = function () { var t = new Date(new Date(f.data("time") * 1e3).setHours(0, 0, 0, 0)), n = Date.parse(t) - Date.parse(new Date); return { total: n, days: Math.floor(n / 864e5), hours: Math.floor(n / 36e5 % 24), minutes: Math.floor(n / 6e4 % 60), seconds: Math.floor(n / 1e3 % 60) } }, v = function () { f.remove(); n.name === pageName.plp && t(".pl-title").removeClass("hide") }, tt = function () { f.removeClass("hide"); n.name === pageName.plp && t(".pl-title").addClass("hide") }, y = function () { return e || (e = a()), e.seconds >= 0 }, p = function () { if (e.days >= 2) { var n = i(e.days); return n = '<span class="number">' + n.charAt(0) + '<\/span><span class="number">' + n.charAt(1) + "<\/span>", l.html(n) } l.parent().remove() }, w = function () { var n; return n = e.days === 1 ? i(e.hours + 24) : i(e.hours), n = '<span class="number">' + n.charAt(0) + '<\/span><span class="number">' + n.charAt(1) + "<\/span>", e.hours < 2 ? (o.parent().find(".multi").addClass("hide"), o.parent().find(".single").removeClass("hide")) : (o.parent().find(".single").addClass("hide"), o.parent().find(".multi").removeClass("hide")), o.html(n) }, b = function () { var n = i(e.minutes); return n = '<span class="number">' + n.charAt(0) + '<\/span><span class="number">' + n.charAt(1) + "<\/span>", nt.html(n) }, k = function () { if (e.days < 2) { c !== undefined ? (f.find(".fs-countdown-timezone").append(c.clone()), c = undefined, s = f.find(".seconds")) : h && s.parent().removeClass("hide"); var n = i(e.seconds); n = '<span class="number">' + n.charAt(0) + '<\/span><span class="number">' + n.charAt(1) + "<\/span>"; s.html(n) } else h && (c = s.parent().clone().removeClass("hide"), s.parent().remove()) }, it = function () { e = a(); h ? (tt(), p(), w(), b(), k(), h = !1) : (e.seconds === 59 && (e.minutes === 59 && (e.hours === 23 && p(), w()), b()), k()); y() || (clearInterval(d), v()) }; y() ? d = setInterval(function () { it() }, 1e3) : v() } }); n.UiFSComingSoon = n.UiBloc.extend({ init: function (t, r, u, f) { var s = this, e, o; s._super(t, r); e = function () { var t = f.data("time"), n = new Date(t * 1e3), i = n.getFullYear(), r = n.getMonth() + 1, u = n.getDate(); return { year: i, month: r, day: u } }; o = function () { var t = e(), r = i(t.day) + "/" + i(t.month) + "/" + t.year; f.html(n.labels.MobileV3_FlashSalesList.FlashSalesStartingOn + " " + r) }; o() } }) }(window, jQuery); $("[data-apply-fs-filter]").on("click", function () { fs_filter_apply_filter($(this).attr("data-apply-fs-filter")) })