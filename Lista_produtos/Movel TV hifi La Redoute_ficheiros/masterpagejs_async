var CookieManager=function(){function t(){var r=Utils.CookieManager.ReadCookie("Segmentation"),i,n,t,u;if(r==null)return!1;for(i=r.split("&"),n=0;n<i.length;n++)if(t=i[n].split("="),t.length==2&&t[0]=="dt"&&(u=new Date(t[1]),u>new Date))return!0;return!1}function i(){var i,r,u;n.EnableSegmentationCookie&&(i=n.CustomerNumber,r=Utils.CookieManager.ReadCookie("Segmentation"),i!=null&&(r==null||n.InitSegmentationCookie&&!t())&&(u=JSON.stringify({request:{CustomerNumber:i}}),$.ajax({url:"/servicemyaccountnosession/getmarketingprofile",async:!0,cache:!1,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:u,success:function(n){var r="",u,t,f;if(n.d&&(n=n.d),n.Classifications!=null&&n.Classifications&&n.Classifications.length>0){for(tc_vars.user_classification=n.Classifications,r="CI="+i,u=0;u<n.Classifications.length;u++)t=n.Classifications[u],r+="&"+t.Key+"="+t.Value,t.Key=="clusterNum"&&(tc_vars.user_clusterNum=t.Value);f=new Date((new Date).setHours((new Date).getHours()+1));r+="&dt="+f.toUTCString();Utils.CookieManager.CreateCookie("Segmentation",r,365,!0)}}})))}function r(){var n=new Date,t=n.getTimezoneOffset();Utils.CookieManager.CreateCookie("BROWSERCOLORDEPTH",screen.colorDepth,1,!0,!0);Utils.CookieManager.CreateCookie("BROWSERJAVAENABLED",navigator.javaEnabled(),1,!0,!0);Utils.CookieManager.CreateCookie("BROWSERLANGUAGE",navigator.language,1,!0,!0);Utils.CookieManager.CreateCookie("BROWSERSCREENHEIGHT",screen.height,1,!0,!0);Utils.CookieManager.CreateCookie("BROWSERSCREENWIDTH",screen.width,1,!0,!0);Utils.CookieManager.CreateCookie("BROWSERTIMEZONE",t,1,!0,!0);Utils.CookieManager.CreateCookie("BROWSERJAVASCRIPTENABLED","true",1,!0,!0)}var n={InitSegmentationCookie:contextInfo!=null&&contextInfo.Configuration!=null&&contextInfo.Configuration.ConfigCookieManager!=null?contextInfo.Configuration.ConfigCookieManager.InitSegmentationCookie:!0,EnableSegmentationCookie:contextInfo!=null&&contextInfo.Configuration!=null&&contextInfo.Configuration.ConfigCookieManager!=null?contextInfo.Configuration.ConfigCookieManager.EnableSegmentationCookie:!1,CustomerNumber:contextInfo!=null&&contextInfo.Customer!=null&&typeof contextInfo.Customer.UserId!="undefined"&&contextInfo.Customer.UserId!=null?contextInfo.Customer.UserId:null};return{Initialise:function(){contextInfo.Configuration.ConfigFlags.CreateBrowserCookiesOnPayment==!1&&r();i()}}}(),siteSelector;$(window).on("load",function(){CookieManager.Initialise()});(function(n,t){"use strict";var i=n.LR_App,r="HandlerMaster";i.events.page={closedFromBottom:"pageScroll.closedFromBottom",resized:"page.size.change"};i.addComponent(r,function(r){this._super(r);var s=r.Model,u=i.utils,f,e,h=u.getScreenSize(),o=i.events.page;t(n).on("scroll",function(){f&&n.clearTimeout(f);f=n.setTimeout(function(){var i=t("body").height(),r=t(n).height(),u=t(this).scrollTop(),f=i-(u+r);f<1200&&s.$eventContainer.trigger(o.closedFromBottom)},100)});t(n).on("resize",function(){e&&n.clearTimeout(e);e=n.setTimeout(function(){var n=u.getScreenSize();h!==n&&(u.triggerCustomEvent(o.resized,{size:n}),h=n)},200)});s.$eventContainer.one(o.closedFromBottom,function(){r.initiateUiComponent("footer","UiFooter")})});i.utils.isAvailable(r)})(window,window.jQuery);siteSelector=function(){function n(n){return"siteSelector-"+n}function i(){return document.referrer===""||document.referrer.indexOf("google")>=0?!1:typeof siteSelectorConfig!="undefined"}function r(){return Utils.CookieManager.ReadCookie(n("layerShown"))==null?!1:!0}function u(){Utils.CookieManager.CreateCookie(n("layerShown"),1,0)}function f(){return siteSelectorConfig.VisitorCountryCode}function t(){var t=f();for(var n in siteSelectorConfig.Countries)if(siteSelectorConfig.Countries[n].CountryCode==t)return siteSelectorConfig.Countries[n];return null}function e(){var n=navigator.language||navigator.userLanguage,t,i;n=n.split("-")[0];t="en";for(i in siteSelectorConfig.SupportedLanguages)n.toLowerCase()==siteSelectorConfig.SupportedLanguages[i]&&(t=siteSelectorConfig.SupportedLanguages[i]);return t}function o(){var i=t(),n;return i==null?null:(n="nodelivery",i==null&&(n="nodelivery"),n=window.location.href.indexOf(i.SiteUrl)<=0?i.LayerType:null,n=="nodelivery"&&window.location.href.indexOf("redoute.com")>0&&(n=null),n)}function s(){res="";for(var n=window.location.host.split(".");n.length>2;)res.length>0&&(res="."+res),res=n.pop()+res;return res}function h(n){var f,r,i,u;if(n.d!=null&&(n=n.d),f=t(),f!=null){r=f.SiteUrl;r=r.replace(/http:\/\//g,"");r=r.replace(/https:\/\//g,"");r=r.replace(/-preview\./g,"");r=r.replace(/-preprod\./g,"");r=r.replace(/uat\./g,"");r=r.replace(/localhost\./g,"");n=n.replace(/\[SiteNameExternal\]/g,r);i=window.location.hostname;i=i.replace(/http:\/\//g,"");i=i.replace(/https:\/\//g,"");i=i.replace(/m-preview\./g,"");i=i.replace(/m-preprod\./g,"");i=i.replace(/localhost\./g,"");i=i.replace(/m\./g,"");i=i.replace(/uat\./g,"");n=n.replace(/\[SiteNameCurrent\]/g,i);u=$("<div>",{id:"siteSelectorContainer","class":"popin",html:n}).appendTo("body");u.popin();u.find("#btn-close").on("click",u.data("popin").close);u.data("popin").open()}}function c(i){var u,r,f,e;i.preventDefault();i.stopPropagation();u=t();r=u.SiteUrl;r.indexOf("https://")!=0&&(r="https://"+r);f=siteSelectorConfig.RedirectPreferenceDuration;e=s();r=r+"?omniturecode=COR"+e+"LayerGEO&flag=1";Utils.CookieManager.CreateCookie(n("RedirectPreference"),btoa(r),f);window.location=r}function l(n,t){var i={layerType:n,layerLanguage:t};$.ajax({url:"/servicegeneric/loadsiteselector",type:"GET",contentType:"application/json; charset=utf-8",data:i,success:function(n){h(n)}})}function a(){var i=Utils.CookieManager.ReadCookie(n("RedirectPreference")),t=atob(i);return t!=null&&t.indexOf("http")==0&&t.indexOf("https")==0?(window.location=t,!0):!1}function v(){var i=a(),n,t;if(!i&&!r()&&(n=o(),t=e(),n!=null&&n!="")){u();Utils.OmnitureManager.addEvents("event101");$(document).on("click","#btn-redirect",c);l(n,t)}}return{Initialise:function(){try{i()&&pageType!=PageTypeEnum.ProductPage&&pageType!=PageTypeEnum.MultiProductPage&&v()}catch(n){console.error(n.message)}}}}();$(function(){$("body").hasClass("cfao")||siteSelector.Initialise()}),function(n,t){"use strict";var i=n.LR_App,r="UiFooter";i.addComponent(r,function(i,r){var p,w;this._super(i,r);var ct=this,a=i.Model.pageType==="HomePage",v=i.Model.pageType==="BasketPage",o=!1,f=300,y=!1,u=t("#footerSwitchText");u.length>0&&(u=JSON.parse(u.text()),p=u.toggleBtnShowText,w=u.toggleBtnHideText);var e=t(".footer-services-title"),s=t("#footerServicesToggleBtn"),h=null;const b=document.querySelector(".widgetLine__2 ");let k=null,c=null,l=null,d=null,g=null,nt=null;document.querySelector("#blockOfLinksWidgets")&&(k=JSON.parse(document.querySelector("#blockOfLinksWidgets").text),c=k.widgets);e&&(l=document.createElement("ul"),d=document.createElement("li"),g=document.createElement("a"));b&&(nt=b.classList.contains("isLightWidget"));const tt=n=>{let t=d.cloneNode(),i=g.cloneNode();return t.classList.add("footer-services-link"),i.innerText=n.Label,i.setAttribute("href",n.URL),n.IsListItem&&t.classList.add("chevron-right"),n.URL.length==0?(t.classList.add("isNotLink"),t.innerText=n.Label):t.append(i),t},ft=n=>{const i=n.parentNode,r=i.getAttribute("id"),t=l.cloneNode();t.setAttribute("aria-expanded","true");t.setAttribute("class","footer-services-content");t.setAttribute("data-populated",!0);c.forEach(n=>{n.Instance.Name===r&&n.Instance.ComponentsContainer.Repeatables.forEach(n=>{t.append(tt(n))})});i.parentNode.append(t)},it=()=>{y||e.each((n,t)=>{const i=l.cloneNode();i.setAttribute("aria-expanded","true");i.setAttribute("class","footer-services-content");c.forEach(n=>{n.Instance.Name===t.id&&n.Instance.ComponentsContainer.Repeatables.forEach(n=>{i.append(tt(n))})});t.parentNode.append(i)}),h=t("ul.footer-services-content"),y=!0};var et=function(){return!o},ot=function(n,t,i){return n.text(n.text()==t?i:t)},rt=function(){s.toggleClass("footer-services-toggleBtn--isToggled");ot(s,w,p)},ut=function(){o?h.attr("aria-expanded","false").slideUp(f):h.attr("aria-expanded","true").slideDown(f);o=et()},st=function(t){var i=t,r=n.elementStatus.opened,u=i.hasClass(r);u?(i.removeClass(r),i.next("ul.footer-services-content").slideUp(f),u=!1):(i.addClass(r),i.next("ul.footer-services-content").slideDown(f),u=!0)};const ht=n=>{const t=n.parentNode.nextElementSibling;if(t&&t.dataset.populated)return!0};if(i.isMobile){(a||v)&&t("ul.footer-services-content").hide();e.on("click",function(n){v||a||ht(n.target)||ft(n.target);st(t(this))})}else{e.on("click",function(){nt&&(it(),ut(),rt())});s.on("click",function(){it();ut();rt();t(".footer-services-btn")[0].focus()})}});i.utils.isAvailable(r)}(window,window.jQuery)